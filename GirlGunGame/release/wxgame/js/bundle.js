!function(){"use strict";class e{constructor(){}static init(){Laya.ClassUtils.regClass}}e.width=640,e.height=1136,e.scaleMode="fixedwidth",e.screenMode="none",e.alignV="top",e.alignH="left",e.startScene="game/homePage.scene",e.sceneRoot="",e.debug=!1,e.stat=!1,e.physicsDebug=!1,e.exportSceneToJson=!0,e.init();var t,i,a=Laya.Sprite;class s extends a{constructor(){super(),this.sceneLayer=new a,this.panelLayer=new a,this.faceLayer=new a,this.alertLayer=new a,this.guideLayer=new a,this.addChild(this.sceneLayer),this.addChild(this.panelLayer),this.addChild(this.faceLayer),this.addChild(this.alertLayer),this.addChild(this.guideLayer)}}class n{constructor(){this.map={},this.mapList={}}register(e,t){this.map[e]=t}getOneByName(e){return this.map[e]}getTable(e){return this.mapList[e]}getDataByNameAndId(e,t){for(var i=this.getTable(e),a=i.length,s=0;s<a;s++)if(i[s].id==t)return i[s]}onParse(e){for(var t=0;t<e.length;t+=2){var i=e[t],a=this.getOneByName(i);if(console.log(i),null!=a){var s=e[t+1].split("\n");""===s[s.length-1]&&s.pop();for(var n=String(s[0]).replace("\r","").split("\t"),o=s.slice(1),h=[],r=0;r<o.length;r++){for(var l=String(o[r]).replace("\r","").split("\t"),p=new a,d=0,c=l.length;d<c;d++){var g=p[n[d]],u=l[d];"number"==typeof g?(g=parseInt(u+""))+""!=u&&(g=parseFloat(u+"")):g=u,p[n[d]]=g}h.push(p)}this.mapList[i]=h}else console.error("没有注册表-------"+i)}}}class o{constructor(){this.pre=""}setMusicVolume(e){u.gameSoundManager.setBgmMuted(0==e)}setSoundVolume(e){u.gameSoundManager.setEffMuted(0==e)}play(e,t=!1){this.soundName=e,this.isMusic=t;var i=this.pre+e;t?u.gameSoundManager.playBgm(i):u.gameSoundManager.playEffect(i)}onLoadCom(e,t){t?Laya.SoundManager.playMusic(e,0):Laya.SoundManager.playSound(e,1)}}class h{}h.INIT_COM="INIT_COMPLETE",h.START_BATTLE="START_BATTLE",h.MEMORY_WARNING="MEMORY_WARNING",h.CONFIG_OVER="CONFIG_OVER",h.GOLD_CHANGE="GOLD_CHANGE",h.HERO_UPDATE="HERO_UPDATE",h.WX_ON_SHOW="WX_ON_SHOW",h.WX_ON_HIDE="WX_ON_HIDE",h.SHOW_ACTION_RECT="SHOW_ACTION_RECT",h.BOOS_BLOOD_UPDATE="BOOS_BLOOD_UPDATE",h.PLAYER_INFO_UPDATE="PLAYER_INFO_UPDATE",h.TALENT_UPDATE="TALENT_UPDATE",h.PASS_CHAPTER="PASS_CHAPTER",h.LV_UP_VIEW="LV_UP_VIEW",h.LV_UP_VIEW_2="LV_UP_VIEW_2",h.ADD_COIN="ADD_COIN",h.APP_ENERGY="APP_ENERGY",h.SHOW_MAIN="SHOW_MAIN",h.RED_UPDATE="RED_UPDATE",h.NEW_DAY="NEW_DAY",h.AD_OVER="AD_OVER",h.AD_UPDATE_POWER="AD_UPDATE_POWER";class r{}r.AD_FAIL=18,r.AD_SUC=19,r.AD_SUC_OVER=20,r.AD_FAIL_2=21,r.SHOW_GAME_VIEW=10001,r.CLICK_START_BTN=10002,r.LOGIN_SUCCESS=10003,r.NEW_PLAYER=10004,r.SHOW_MAIN_VIEW=10005,r.BATTLE_GUIDE_0=10006,r.BATTLE_GUIDE_1=10007,r.BATTLE_GUIDE_2=10008,r.BATTLE_GUIDE_3=10009,r.BATTLE_GUIDE_4=10010,r.BATTLE_GUIDE_5=10011,r.BATTLE_GUIDE_6=10012,r.REBORTH_CLICK=10013,r.REBORTH_SUCCESS=10014,r.GOTO_FROG=10015;class l extends Laya.Sprite{constructor(){super(),this._bg=new Laya.Image("main/diban.png"),this._bg.sizeGrid="17,16,22,15",this.addChild(this._bg),this._bg.anchorX=this._bg.anchorY=.5,this._txt=new Laya.Label,this._txt.bold=!0,this._txt.color="#ffffff",this._txt.fontSize=20,this._txt.align="CENTER",this.addChild(this._txt),this._txt.anchorX=this._txt.anchorY=.5}setTips(e,t,i="#ffffff",a){null!=e&&""!=e&&(Laya.Tween.clearTween(this),this._txt.text=e,this._txt.color=i,this._bg.size(this._txt.textField.textWidth+200,this._txt.textField.textHeight+40),this.pos(.5*Laya.stage.width,.5*Laya.stage.height),Laya.stage.addChild(this),this.alpha=1,a?Laya.Tween.to(this,{y:.5*Laya.stage.height-200},t,null,Laya.Handler.create(this,this.onCom)):Laya.Tween.to(this,{alpha:0},t,null,Laya.Handler.create(this,this.onCom),500))}onCom(){this.removeSelf(),this._txt.text=""}static setTips(e,t=1200,i="#ffffff",a=!0){null==this._fly&&(this._fly=new l),this._fly.setTips(e,t,i,a)}}!function(e){e[e.AD_DIAMOND=0]="AD_DIAMOND",e[e.AD_REBORTH=1]="AD_REBORTH",e[e.AD_BATTLE10=2]="AD_BATTLE10",e[e.AD_CHANGE_SKILL=3]="AD_CHANGE_SKILL",e[e.AD_POWER=4]="AD_POWER"}(t||(t={}));class p{constructor(){}static init(){}static log(e,t=""){}}p.onlyid=Math.random(),function(e){e[e.REG=0]="REG",e[e.LOGIN=1]="LOGIN"}(i||(i={}));class d{constructor(){this.haveRight=!1,this.wxName=null,this.wxHead=null,this.adMap={},this.lastAdSucTime=0,this.currentAdType=0,this.adHandler=null,this.adStat=0,this.errCode=0,this.shareStartTime=0,this.shareTimes=0,this.shareTime=0,Laya.Browser.window.wx.updateShareMenu({}),Laya.Browser.window.wx.showShareMenu({}),Laya.Browser.window.wx.onShareAppMessage(()=>this.getShareObject()),Laya.Browser.window.wx.getSetting({success:e=>{1==e.authSetting["scope.userInfo"]?(console.log("已经有授权了"),this.getUserInfo()):(this.haveRight=!1,console.log("没有授权"))}}),Laya.Browser.window.wx.setKeepScreenOn({keepScreenOn:!0}),Laya.Browser.window.wx.onShow(e=>{u.sendEvent(h.WX_ON_SHOW)}),Laya.Browser.window.wx.onHide(e=>{u.sendEvent(h.WX_ON_HIDE)});const e=Laya.Browser.window.wx.getUpdateManager();e.onCheckForUpdate(function(e){console.log("版本更新回调:",e.hasUpdate)}),e.onUpdateReady(function(){Laya.Browser.window.wx.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用？",success:function(t){t.confirm&&e.applyUpdate()}})}),e.onUpdateFailed(function(){}),setTimeout(()=>{this.initAd(),this.initBanner()},3e3)}getUserInfo(){Laya.Browser.window.wx.getUserInfo({success:e=>{var t=e.userInfo;this.wxName=t.nickName,this.wxHead=t.avatarUrl;t.gender,t.province,t.city,t.country;console.log("已经授权了:",this.wxName,this.wxHead),this.haveRight=!0}})}callLaterFun(){this.initAd()}log(e,t=""){p.log(e,t)}initAd(){Laya.Browser.window.wx&&(this.adMap[t.AD_REBORTH]="d8b0aae30j4gcj918m",this.adMap[t.AD_BATTLE10]="d8b0aae30j4gcj918m",this.adMap[t.AD_CHANGE_SKILL]="d8b0aae30j4gcj918m"),this.ad=Laya.Browser.window.wx.createRewardedVideoAd({adUnitId:this.adMap[t.AD_REBORTH]}),this.ad.onClose(e=>{console.log("广告 观看结果返回"),(e&&e.isEnded||void 0===e)&&(this.lastAdSucTime=Laya.Browser.now(),this.exeHandler(),this.log(r.AD_SUC_OVER,this.currentAdType+""),u.sendEvent(h.AD_OVER))}),this.ad.onError(e=>{this.adStat=2,this.errCode=e.errCode,console.log("广告 加载错误:",e),1004==this.errCode&&(console.log("加载视频失败,30秒后重试"),Laya.timer.once(3e4,this,this.retryAdFun)),this.log(r.AD_FAIL,this.errCode+"")}),this.ad.onLoad(()=>{this.adStat=1,console.log("广告 加载成功-----------------")})}retryAdFun(){this.ad.load()}playAdVideo(e,t){if(this.currentAdType=e,null==Laya.Browser.window.wx)return t.runWith(1),void u.sendEvent(h.AD_OVER);if(2==this.adStat||null==this.ad)return void this.share2(t);this.adHandler=t;let i=this.adMap[e];Laya.Browser.window.wx.createRewardedVideoAd({adUnitId:i}),this.tryShowAD()}initAdBtn(e,t){e.gray=2==this.adStat,e.once(Laya.Event.UNDISPLAY,this,this.adUndisFun,[t])}adUndisFun(e){}tryShowAD(){this.log(r.AD_SUC),this.ad.show().catch(()=>{this.ad.load().then(()=>this.ad.show()).catch(e=>{console.log("广告再加载失败"),console.log(e),this.adStat=2,this.log(r.AD_FAIL_2)})})}exeHandler(){this.adHandler.runWith(1)}exeHandler2(){this.share(this.adHandler)}share2(e){var t=this.getShareObject();t.query="",t.imageUrlId="",Laya.Browser.window.wx.shareAppMessage(t),this.shareStartTime=Laya.Browser.now(),Laya.stage.once(h.WX_ON_SHOW,this,this.showFun,[e])}share(e,t=0){if(this.checkShare(),0==Laya.Browser.onMiniGame)return this.shareTimes++,void e.runWith(1);var i=this.getShareObject();i.query="",i.imageUrlId="",Laya.Browser.window.wx.shareAppMessage(i),this.shareStartTime=Laya.Browser.now();let a=this.shareTimes>=d.SHARE_MAX_TIMES;Laya.stage.once(h.WX_ON_SHOW,this,this.showFun,[a?null:e])}onlyShare(){var e=this.getShareObject();e.query="",Laya.Browser.window.wx.shareAppMessage(e)}showFun(e){null!=e?Laya.Browser.now()-this.shareStartTime>2e3?(this.shareTimes++,e.runWith(1)):l.setTips("请分享到不同群获得奖励"):l.setTips("分享成功")}checkShare(){let e=new Date,t=new Date(this.shareTime);e.getDate()!=t.getDate()&&(this.shareTimes=0),this.shareTime=Date.now()}getShareObject(){var e={title:"魔法飞弹",desc:"有人@你，和我一起来玩吧！",imageUrl:"https://img.kuwan511.com/arrowLegend/shareImg.jpg",destWidth:500,destHeight:400};return e}savePlayerData(e){if(0!=Laya.Browser.onMiniGame){var t={},i={key:"stageNum"};i.value=e+"",t.KVDataList=[i],t.success=(e=>{console.log("存储数据成功",e)}),t.fail=(e=>{console.log("失败",e)}),Laya.Browser.window.wx.setUserCloudStorage(t)}}initBanner(){let e=Laya.Browser.window.wx.getSystemInfoSync();console.log("======================",e.model,e.windowWidth,e.windowHeight,e.screenWidth,e.screenHeight);let t=0;"iPhone X"!=e.model&&"iPhone XR"!=e.model&&"iPhone XS Max"!=e.model&&"iPhone XS"!=e.model||(t=24);let i=(e.windowWidth-200)/2;this.bannerAd=Laya.Browser.window.wx.createBannerAd({adUnitId:"35kkgk805i952d16gc",adIntervals:60,style:{width:200,left:i}}),this.bannerAd.onError(function(e){}),this.bannerAd.onResize(i=>{this.bannerAd.style.left=.5*(e.windowWidth-i.width),this.bannerAd.style.top=e.windowHeight-i.height-t,console.log("banner pos",this.bannerAd.style.left,this.bannerAd.style.top)})}showBanner(){this.bannerAd&&this.bannerAd.show()}hideBanner(){this.bannerAd&&this.bannerAd.hide()}recorder(){console.log("开始录屏"),this.recorde||(this.recorde=Laya.Browser.window.tt.getGameRecorderManager(),this.recorde.onStart(e=>{}),this.recorde.onStop(e=>{this.videoUrl=e.videoPath,console.log("录屏结束"),this.isEnd=!0,this.isClickStop&&this.stopRecorder(this._hand)})),this.isClickStop=!1,this.isEnd=!1,this.recorde.start({duration:15})}stopRecorder(e){this._hand=e,this.isClickStop=!0,this.isEnd?Laya.Browser.window.wx.shareVideo({videoPath:this.videoUrl,success:e=>{this._hand&&this._hand.run()},fail:e=>{}}):this.recorde.stop()}}d.FLY_BOX=0,d.GAME_OVER=1,d.GET_PET=2,d.TIME_GOLD=3,d.TREASURE=4,d.ZHUAN=5,d.AD_DIALOG=7,d.NEXT_STAGE_CHAPING=6,d.REBORTH=11,d.SHARE_MAX_TIMES=6;class c{constructor(){this.bgmMap={},this.currentWxSound=null,this.bgmUrl=null,this.noBgm=!1,this.noEff=!1,Laya.timer.callLater(this,this.initEvent)}onWX_ON_SHOW(){Laya.Browser.onMiniGame&&this.currentWxSound&&this.currentWxSound.play()}onWX_ON_HIDE(){Laya.Browser.onMiniGame&&this.currentWxSound&&this.currentWxSound.pause()}initEvent(){Laya.stage.once(h.WX_ON_SHOW,this,this.onWX_ON_SHOW),Laya.stage.once(h.WX_ON_HIDE,this,this.onWX_ON_HIDE),Laya.stage.once(h.AD_OVER,this,this.onWX_ON_SHOW)}openSceneFun(e){this.bgmMap[e]&&this.playBgm(this.bgmMap[e])}reg(e,t){this.bgmMap[e]=t,e==c.BTN&&Laya.stage.on(Laya.Event.CLICK,this,this.clickFun)}clickFun(e){e.target instanceof Laya.Button&&this.playEffect(this.bgmMap[c.BTN])}playBgm(e){if(this.bgmUrl=e,Laya.Browser.onMiniGame){this.currentWxSound&&(this.currentWxSound.stop(),this.currentWxSound.destroy(),this.currentWxSound=null);let t=Laya.Browser.window.wx.createInnerAudioContext();t.autoplay=!0,t.loop=!0,t.src=Laya.URL.basePath+e,this.currentWxSound=t,this.setBgmMuted(this.noBgm)}else Laya.SoundManager.playMusic(e)}setBgmMuted(e){this.noBgm=e,Laya.Browser.onMiniGame&&this.currentWxSound?this.currentWxSound.volume=e?0:.5:Laya.SoundManager.musicMuted=e}setEffMuted(e){this.noEff=e}stopBgm(){Laya.Browser.onMiniGame?this.currentWxSound&&(this.currentWxSound.stop(),this.currentWxSound.destroy(),this.currentWxSound=null,console.log("音频已经销毁")):Laya.SoundManager.stopMusic()}playEffect(e){if(!this.noEff)if(Laya.Browser.onMiniGame){let t=Laya.Pool.getItem(e);null==t?new g(e):t.play()}else Laya.SoundManager.playSound(e)}}c.BTN="BTN";class g{constructor(e){this.url=e,this.wxSound=Laya.Browser.window.wx.createInnerAudioContext(),this.wxSound.autoplay=!0,this.wxSound.loop=!1,this.wxSound.src=Laya.URL.basePath+e,this.wxSound.onEnded(()=>{Laya.Pool.recover(this.url,this.wxSound)})}}class u{static init(){u.layerManager=new s,u.tableManager=new n,u.soundManager=new o,u.sdkManager=new d,u.gameSoundManager=new c}static sendEvent(e,t){Laya.stage.event(e,t)}static isSimulator(){return!!Laya.Browser.onMiniGame&&"devtools"==Laya.Browser.window.wx.getSystemInfoSync().brand}static RandomByArray(e,t=!1){let i=Math.random()*e.length,a=Math.floor(i),s=e[a];return t&&e.splice(a,1),s}static http(e,t,i,a=null,s=null,n=null){var o=new Laya.HttpRequest;let h=[],r="";if("string"==typeof t)r=t;else{for(let e in t)h.push(e+"="+t[e]);r=h.join("&")}return"GET"==i&&(e=e+"?"+r,t=null),o.send(e,r,i),a&&s&&o.once(Laya.Event.COMPLETE,a,s,n),o}}u.top=10,u.platformId=0,u.layerManager=null,u.tableManager=null,u.soundManager=null,u.sdkManager=null,u.eventManager=new Laya.EventDispatcher,u.dialogManager=new class{constructor(){this.dialogMap={}}register(e,t,i=null){this.dialogMap[e]=[t,i]}open(e){let t=this.dialogMap[e];Laya.loader.load(t[1],new Laya.Handler(this,this.loaderFun,[e]))}loaderFun(e){let t=new(0,this.dialogMap[e][0]);t.popup(!0,t.isShowEffect),t.once(Laya.Event.UNDISPLAY,this,this.undisFun,[t])}undisFun(e){e.destroy(!0)}},u.gameSoundManager=null;class m{constructor(){this.id=0,this.stageId=0,this.stageGroup="",this.numEnemy=0,this.mixEnemy=0,this.maxEnemy=0,this.enemyGroup=""}static getData(e,t){let i=m.dic[e],a=i.length;for(var s=0;s<a;s++)if(s+1==t)return i[s];return null}static getTotal(e){return m.dic[e].length}}m.NAME="sys_stageinfo.txt",m.dic={};class y{constructor(){this.id=0,this.moveType=0,this.moveSpeed=0,this.zoomMode=0,this.zoomShadow=0,this.enemyHp=0,this.enemyAttack=0,this.enemyBlack=0,this.enemySpeed=0,this.normalAttack=0,this.skillId="",this.isBoss=0,this.enemymode=0,this.enemyAi=0,this.txt="",this.enemyLevel=0,this.dropGold=0,this.dropExp=0,this.heroExp=0,this.dropItem=0}}y.NAME="sys_enemy.txt";class w{}w.GUIDE=1e4,w.HERO=9999,w.DOOR=9998,w.ANGLE=9997,w.OTHER_NPC=9996;class x{static isRiverPoint(e){return e>=100&&e<200}static isRiverScale9Grid(e){return e>200&&e<300}static isRiverScale9Grid2(e){return e>900&&e<1e3}static isRiverRow(e){return e>400&&e<500}static isRiverCol(e){return e>300&&e<400}static isThorn(e){return e>=500&&e<600}static isFlower(e){return e>=801&&e<=804}static isWall(e){return e>=1e3&&e<=5500}static isCube(e){return e>=1e3&&e<=5500||e>=1&&e<=10}static isFence(e){return e>=700&&e<800}static isRiverCube(e){return 900==e}static isMonster(e){return e>1e4}static isSawHeng(e){return e>=50&&e<60}static isSawZong(e){return e>=60&&e<70}static isNpc(e){return e==w.ANGLE||e==w.OTHER_NPC}}class f{constructor(){this.id=0,this.nameTxt="",this.txt="",this.bulletCd=0,this.bulletType=0,this.bulletMode=0,this.boomEffect=0,this.mixNum=0,this.maxNum=0,this.bulletAngle=0,this.bulletNum=0,this.bulletSpeed=0,this.bulletBlock=0,this.bulletEjection=0,this.ejectionNum=0,this.bulletsAoe=0,this.attackAngle=0,this.bulletSplit=0,this.splitNum=0,this.triggerComparison=0,this.skilltarget=0,this.callInfo="",this.damagePercent=0,this.skillEffect1=0,this.attackDistance=0}}f.NAME="sys_bullet.txt";var I,v=Laya.ClassUtils.regClass;!function(e){!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{},compId:2,child:[{type:"Animation",props:{y:0,var:"ani",source:"game/jiaxue.ani"},compId:3}],loadList:["game/jiaxue.ani"],loadList3D:[]},e.addBloodEffUI=t,v("ui.game.addBloodEffUI",t);class i extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(i.uiView)}}i.uiView={type:"View",props:{width:370,height:105},compId:2,child:[{type:"Box",props:{y:50,x:83,var:"pbox1"},compId:13,child:[{type:"Sprite",props:{texture:"bg/guandian.png"},compId:7},{type:"Sprite",props:{x:17,texture:"bg/guandian.png"},compId:8},{type:"Sprite",props:{x:34,texture:"bg/guandian.png"},compId:9}]},{type:"Box",props:{y:50,x:238,var:"pbox2"},compId:14,child:[{type:"Sprite",props:{texture:"bg/guandian.png"},compId:10},{type:"Sprite",props:{x:17,texture:"bg/guandian.png"},compId:11},{type:"Sprite",props:{x:34,texture:"bg/guandian.png"},compId:12}]},{type:"Box",props:{width:370,var:"box",height:105},compId:18}],loadList:["bg/guandian.png"],loadList3D:[]},e.battleIndexBoxUI=i,v("ui.game.battleIndexBoxUI",i);class a extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{var:"img",skin:"bg/boomEff.png",anchorY:.5,anchorX:.5},compId:3}],loadList:["bg/boomEff.png"],loadList3D:[]},e.boomRectUI=a,v("ui.game.boomRectUI",a);class s extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(s.uiView)}}s.uiView={type:"View",props:{width:110,height:130},compId:2,child:[{type:"Box",props:{y:0,x:0,width:110,height:130,bgColor:"#ffffff"},compId:3},{type:"Sprite",props:{y:7,x:7,width:96,texture:"loading/frog.jpg",height:96},compId:4},{type:"Image",props:{y:0,x:0,width:110,skin:"loading/yuanzhengkong.png",sizeGrid:"22,25,25,29",height:110},compId:6},{type:"Label",props:{width:110,text:"青蛙过河",height:22,fontSize:20,bottom:0,bold:!0,align:"center"},compId:7}],loadList:["loading/frog.jpg","loading/yuanzhengkong.png"],loadList3D:[]},e.gameIconUI=s,v("ui.game.gameIconUI",s);class n extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"Scene",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{y:11,x:8,width:1088,skin:"battleBg/1.png",sizeGrid:"680,0,594,0",height:1552},compId:3}],loadList:["battleBg/1.png"],loadList3D:[]},e.heheUI=n,v("ui.game.heheUI",n);class o extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(o.uiView)}}o.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Sprite",props:{texture:"loading/jiazai.jpg"},compId:5},{type:"Image",props:{x:245,var:"startBtn",stateNum:1,skin:"loading/btn_kaishi.png",scaleY:.6,scaleX:.6,bottom:139},compId:6},{type:"Image",props:{y:272,x:91,visible:!0,skin:"loading/logo.png"},compId:8},{type:"Box",props:{width:750,var:"loadingBox",height:118,bottom:20},compId:9,child:[{type:"Box",props:{y:0},compId:16,child:[{type:"Sprite",props:{width:750,texture:"loading/jianduxia.png",height:26},compId:11},{type:"Image",props:{width:750,var:"barImg",skin:"loading/jiandushang.png",height:26},compId:12}]},{type:"Sprite",props:{y:45,x:264,texture:"loading/shouci.png"},compId:10},{type:"Sprite",props:{y:-2.5,x:0,var:"sliderImg",texture:"loading/dan.png"},compId:13},{type:"Label",props:{y:83,x:325,width:100,var:"txt",text:"100%",height:34,fontSize:30,color:"#ffffff",bold:!0,align:"center"},compId:14}]},{type:"TextInput",props:{y:1005,x:235.5,width:278,var:"idTxt",prompt:"输入用户名",mouseEnabled:!0,height:83,fontSize:40,bgColor:"#ffffff"},compId:18}],loadList:["loading/jiazai.jpg","loading/btn_kaishi.png","loading/logo.png","loading/jianduxia.png","loading/jiandushang.png","loading/shouci.png","loading/dan.png"],loadList3D:[]},e.homePageUI=o,v("ui.game.homePageUI",o);class h extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(h.uiView)}}h.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{y:186,x:0,width:750,var:"mainBox",height:1027},compId:3},{type:"Box",props:{width:750,var:"topBox",top:80,height:106},compId:4},{type:"Box",props:{width:750,var:"bottomBox",height:122,bottom:0},compId:5}],loadList:[],loadList3D:[]},e.mainSceneUI=h,v("ui.game.mainSceneUI",h);class r extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(r.uiView)}}r.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{x:0,var:"img",skin:"guide/fangbian.png",bottom:0},compId:3}],loadList:["guide/fangbian.png"],loadList3D:[]},e.newGuideUI=r,v("ui.game.newGuideUI",r);class l extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(l.uiView)}}l.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{y:0,x:0,width:750,height:1700,bgColor:"#000000",alpha:.75},compId:6},{type:"Image",props:{x:580,skin:"guide/nvren.png",bottom:0},compId:3},{type:"Image",props:{y:903,x:66,width:479,skin:"guide/qipao.png",sizeGrid:"83,148,116,72",height:205},compId:4},{type:"Label",props:{y:934,x:90,wordWrap:!0,width:429,var:"txt",text:"滑动摇杆，控制角色到达指定位置。",height:101,fontSize:40,color:"#ffffff",bold:!0,align:"left"},compId:5}],loadList:["guide/nvren.png","guide/qipao.png"],loadList3D:[]},e.newGuide2UI=l,v("ui.game.newGuide2UI",l);class p extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(p.uiView)}}p.uiView={type:"View",props:{y:70,x:42,width:142,height:350,anchorY:.2,anchorX:.3},compId:2,child:[{type:"Box",props:{width:142,height:350},compId:7,child:[{type:"Image",props:{skin:"guide/huangdian.png"},compId:3},{type:"Image",props:{y:161,x:31,var:"img2",skin:"guide/huangjian.png"},compId:4},{type:"Image",props:{y:235,x:31,var:"img1",skin:"guide/huangjian.png"},compId:5},{type:"Image",props:{y:309,x:31,var:"img0",skin:"guide/huangjian.png"},compId:6}]}],loadList:["guide/huangdian.png","guide/huangjian.png"],loadList3D:[]},e.newGuide3UI=p,v("ui.game.newGuide3UI",p);class d extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(d.uiView)}}d.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{var:"bg",skin:"loading/zhudi.jpg"},compId:7}],loadList:["loading/zhudi.jpg"],loadList3D:[]},e.viewbgUI=d,v("ui.game.viewbgUI",d)}(e.game||(e.game={}))}(I||(I={})),function(e){!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{width:750,height:1700,bgColor:"#000000",alpha:.5},compId:12},{type:"Box",props:{y:10,width:600,height:400,centerY:0,centerX:0},compId:3,child:[{type:"Image",props:{y:0,x:0,width:600,skin:"main/fuhuodi2.jpg",sizeGrid:"193,104,147,117",height:400},compId:4},{type:"Label",props:{y:127,x:15,width:570,var:"txt",text:"本局将不会产生任何收益。",height:40,fontSize:36,color:"#ffffff",bold:!0,align:"center"},compId:6},{type:"Button",props:{y:271,x:55,width:200,var:"cancelBtn",stateNum:1,skin:"main/btn_hong.png",sizeGrid:"27,29,43,25",height:100},compId:8,child:[{type:"Sprite",props:{y:29,x:69,texture:"main/quxiao.png"},compId:9}]},{type:"Button",props:{y:271,x:335,width:200,var:"sureBtn",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"18,31,46,34",height:100},compId:10,child:[{type:"Sprite",props:{y:27,x:69,texture:"main/queding.png"},compId:11}]},{type:"Label",props:{y:180,x:15,width:570,var:"txt2",text:"本局将不会产生任何收益。",height:40,fontSize:36,color:"#ffffff",bold:!0,align:"center"},compId:14},{type:"Sprite",props:{y:19,x:245,texture:"main/biaotitishi.png"},compId:15}]}],loadList:["main/fuhuodi2.jpg","main/btn_hong.png","main/quxiao.png","main/btn_lv.png","main/queding.png","main/biaotitishi.png"],loadList3D:[]},e.alertUI=t,v("ui.test.alertUI",t);class i extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(i.uiView)}}i.uiView={type:"View",props:{width:600,height:400},compId:2,child:[{type:"Image",props:{y:0,x:0,width:600,skin:"main/fuhuodi2.jpg",sizeGrid:"128,62,71,54",height:400},compId:3},{type:"Button",props:{y:21,x:531,var:"cBtn",stateNum:1,skin:"main/btn_guanbi.png",name:"close"},compId:4}],loadList:["main/fuhuodi2.jpg","main/btn_guanbi.png"],loadList3D:[]},e.BaseTipDialogUI=i,v("ui.test.BaseTipDialogUI",i);class a extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"Dialog",props:{width:750,height:418},compId:2,child:[{type:"Box",props:{y:290,x:671,width:60,var:"lvBox",height:138},compId:11,child:[{type:"Image",props:{y:0,x:0,skin:"bg/jinengtiaoxia.png",sizeGrid:"0,22,0,22",alpha:.8},compId:3},{type:"Box",props:{y:0,x:0,var:"lvBar"},compId:12,child:[{type:"Image",props:{var:"jingyantiao",skin:"bg/jinengtiaoshang.png",sizeGrid:"-11,34,-17,24"},compId:4}]}]},{type:"Button",props:{y:141,x:698,var:"zanting",stateNum:1,skin:"bg/btn_zhanting.png",pivotY:34,pivotX:43},compId:6},{type:"Sprite",props:{y:28,x:39,texture:"bg/qianshu.png",scaleX:1,alpha:.8},compId:7},{type:"FontClip",props:{y:45,x:83,width:36,var:"jinbishu",value:"123",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.3,scaleX:.3,height:121,align:"left"},compId:8},{type:"Image",props:{y:26,x:8,skin:"bg/dongjin.png",scaleY:1,scaleX:1},compId:13},{type:"Box",props:{x:190,width:370,var:"indexBox",height:105},compId:28},{type:"Sprite",props:{y:18.5,x:339,var:"boss",texture:"bg/BOSS.png"},compId:27},{type:"Box",props:{y:112.5,x:190,var:"bossxuetiao"},compId:35,child:[{type:"Image",props:{y:38,x:41,width:331,skin:"bg/bosstiaoxia.png",sizeGrid:"0,21,0,22",height:42},compId:33},{type:"Image",props:{y:37,x:44,var:"bossxue",skin:"bg/bosstiaoshang.png"},compId:32},{type:"Sprite",props:{texture:"bg/bosstouxiang.png"},compId:34}]},{type:"Button",props:{y:166,x:54,var:"btnRecord",stateNum:1,skin:"main/rs_bg.png",scaleY:.7,scaleX:.7,anchorY:.5,anchorX:.5},compId:38,child:[{type:"Image",props:{y:46,x:51,skin:"main/rs_0.png"},compId:39},{type:"Image",props:{y:101,x:27,skin:"main/tili.png"},compId:40},{type:"Label",props:{y:101,x:65,width:28,text:"+1",height:20,fontSize:30,color:"#ffffff",bold:!0},compId:41}]}],loadList:["bg/jinengtiaoxia.png","bg/jinengtiaoshang.png","bg/btn_zhanting.png","bg/qianshu.png","main/clipshuzi.png","bg/dongjin.png","bg/BOSS.png","bg/bosstiaoxia.png","bg/bosstiaoshang.png","bg/bosstouxiang.png","main/rs_bg.png","main/rs_0.png","main/tili.png"],loadList3D:[]},e.battleUI=a,v("ui.test.battleUI",a);class s extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(s.uiView)}}s.uiView={type:"View",props:{y:34,x:34,width:69,height:69,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Button",props:{y:34,x:34,width:69,var:"box",height:69,anchorY:.5,anchorX:.5},compId:5,child:[{type:"Button",props:{y:0,x:0,var:"btn",stateNum:1,skin:"bg/xiaoguan.png"},compId:3,child:[{type:"Label",props:{y:23,x:13,wordWrap:!0,width:42,var:"shuziyou",text:"98",height:32,fontSize:24,color:"#f3e9e9",align:"center"},compId:4}]}]}],loadList:["bg/xiaoguan.png"],loadList3D:[]},e.battleLvUIUI=s,v("ui.test.battleLvUIUI",s);class n extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{x:0,width:750,height:1700,bgColor:"#000000",alpha:.7},compId:23},{type:"Box",props:{width:681,var:"box",height:900,centerY:0,centerX:0},compId:22,child:[{type:"Image",props:{width:681,skin:"main/biaotilan.png",sizeGrid:"0,23,0,125",height:99},compId:4},{type:"Box",props:{y:254,x:164,width:287,var:"box1",height:446,anchorX:.5},compId:25},{type:"Box",props:{y:254,x:496,width:287,var:"box2",height:446,anchorX:.5},compId:26},{type:"Sprite",props:{y:28.5,x:142,texture:"main/qing.png"},compId:27},{type:"guanggao",props:{y:744,x:149,var:"queding",runtime:"ui.test.guanggaoUI"},compId:36}]}],loadList:["main/biaotilan.png","main/qing.png"],loadList3D:[]},e.battlestopUI=n,v("ui.test.battlestopUI",n);class o extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(o.uiView)}}o.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{alpha:.6},compId:24,child:[{type:"Rect",props:{width:750,lineWidth:1,height:1700,fillColor:"#000000"},compId:25}]},{type:"Box",props:{x:0,width:750,height:1256,centerY:0},compId:23,child:[{type:"Label",props:{y:57,x:304.5,var:"baioti",text:"暂停",fontSize:70,color:"#ffffff",align:"center"},compId:5},{type:"Button",props:{y:927,x:530,width:296,var:"btnPlay",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"0,22,0,22",height:157,anchorY:.5,anchorX:.5},compId:17,child:[{type:"Sprite",props:{y:37,x:89,texture:"bg/sanjiao.png"},compId:18}]},{type:"Button",props:{y:720,x:195,width:296,var:"btnMusic",stateNum:1,skin:"main/btn_huang.png",sizeGrid:"0,22,0,22",height:157,anchorY:.5,anchorX:.5},compId:19,child:[{type:"Image",props:{y:39,x:173,var:"musicImg",skin:"bg/zhanting_0.png",scaleY:.8,scaleX:.8},compId:20},{type:"Sprite",props:{y:43,x:69,texture:"bg/yinyue.png"},compId:28}]},{type:"Button",props:{y:927,x:195,width:296,var:"btnHome",stateNum:1,skin:"main/btn_huang.png",sizeGrid:"0,22,0,22",height:157,anchorY:.5,anchorX:.5},compId:21,child:[{type:"Sprite",props:{y:32,x:86.5,texture:"bg/huijia.png"},compId:22}]},{type:"Button",props:{y:720,x:541,width:296,var:"btnSound",stateNum:1,skin:"main/btn_huang.png",sizeGrid:"0,22,0,22",height:157,anchorY:.5,anchorX:.5},compId:26,child:[{type:"Sprite",props:{y:43,x:76,texture:"bg/yinxiao.png"},compId:29},{type:"Image",props:{y:39,x:177,var:"soundImg",skin:"bg/zhanting_0.png",scaleY:.8,scaleX:.8},compId:27}]}]}],loadList:["main/btn_lv.png","bg/sanjiao.png","main/btn_huang.png","bg/zhanting_0.png","bg/yinyue.png","bg/huijia.png","bg/yinxiao.png"],loadList3D:[]},e.battlestop2UI=o,v("ui.test.battlestop2UI",o);class h extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(h.uiView)}}h.uiView={type:"View",props:{width:85,height:17,centerX:0},compId:2,child:[{type:"Sprite",props:{texture:"bg/xuetiaodi.png"},compId:3},{type:"Sprite",props:{var:"bar",texture:"bg/xuetiaoshanghong.png"},compId:4},{type:"Label",props:{y:-1,x:0,width:85,var:"txt",text:"600",stroke:3,height:18,fontSize:18,color:"#ffffff",bold:!0,align:"center"},compId:6}],loadList:["bg/xuetiaodi.png","bg/xuetiaoshanghong.png"],loadList3D:[]},e.Blood2UIUI=h,v("ui.test.Blood2UIUI",h);class r extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(r.uiView)}}r.uiView={type:"View",props:{width:85,height:24,centerX:0},compId:2,child:[{type:"Image",props:{y:7,x:0,skin:"bg/heroBlood.png"},compId:8},{type:"Image",props:{y:7,width:85,var:"bar",skin:"bg/xuetiaoshang.png",height:17},compId:10},{type:"Box",props:{y:7,width:85,var:"colBox",height:17},compId:7},{type:"Label",props:{y:2,x:0,width:85,var:"txt",text:"600",stroke:3,height:18,fontSize:18,color:"#ffffff",bold:!0,align:"center"},compId:6}],loadList:["bg/heroBlood.png","bg/xuetiaoshang.png"],loadList3D:[]},e.BloodUIUI=r,v("ui.test.BloodUIUI",r);class l extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(l.uiView)}}l.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Sprite",props:{y:451,x:0,width:750,texture:"main/jianhei.png",height:93},compId:4},{type:"Sprite",props:{y:544,x:0,texture:"main/dazhao.png"},compId:5},{type:"Button",props:{y:530,x:18,stateNum:2,skin:"main/btn_0.png"},compId:3},{type:"Sprite",props:{y:545,x:242,texture:"main/xiaobiao.png"},compId:6},{type:"Button",props:{y:537,x:243,stateNum:2,skin:"main/btn_1.png"},compId:8}],loadList:["main/jianhei.png","main/dazhao.png","main/btn_0.png","main/xiaobiao.png","main/btn_1.png"],loadList3D:[]},e.BottomBoxUI=l,v("ui.test.BottomBoxUI",l);class p extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(p.uiView)}}p.uiView={type:"View",props:{width:0,height:0},compId:2,child:[{type:"Sprite",props:{y:-19,x:-19,var:"img",texture:"bg/douying.png"},compId:3}],loadList:["bg/douying.png"],loadList3D:[]},e.BulletShadowUI=p,v("ui.test.BulletShadowUI",p);class d extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(d.uiView)}}d.uiView={type:"View",props:{width:160,height:160},compId:2,child:[{type:"Image",props:{y:80,x:80,skin:"main/erbei.png",anchorY:.5,anchorX:.5},compId:3}],animations:[{nodes:[{target:3,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:20},{value:1.25,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:35},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:39},{value:1.15,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:43},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:46},{value:1.1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:48},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:51}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:20},{value:1.25,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:35},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:39},{value:1.15,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:43},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:46},{value:1.1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:48},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:51}]}}],name:"ani1",id:1,frameRate:60,action:2}],loadList:["main/erbei.png"],loadList3D:[]},e.chengerUI=d,v("ui.test.chengerUI",d);class c extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(c.uiView)}}c.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"viewbg",props:{y:0,x:0,runtime:"ui.game.viewbgUI"},compId:29},{type:"Box",props:{y:111,x:37,width:675,var:"listBox",height:1100},compId:25}],loadList:[],loadList3D:[]},e.chengjiuUI=c,v("ui.test.chengjiuUI",c);class g extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(g.uiView)}}g.uiView={type:"View",props:{width:675,height:262},compId:1,child:[{type:"Image",props:{y:2,x:0,width:675,skin:"chengjiu/chengjiupai.png",sizeGrid:"0,58,0,88",height:260},compId:2},{type:"Image",props:{y:0,x:0,skin:"chengjiu/chengjiupai2.png"},compId:4},{type:"Label",props:{y:59,x:86,width:295,var:"chengjiuming",text:"玩家名字七个字",strokeColor:"#bc871f",stroke:3,height:33,fontSize:30,color:"#f3e9e9",align:"left"},compId:5},{type:"Label",props:{y:56,x:490,width:137,text:"等级：11",strokeColor:"#bc871f",stroke:3,height:33,fontSize:30,color:"#f3e9e9",align:"right"},compId:6},{type:"Label",props:{y:113,x:83,width:339,var:"xiangjie",text:"玩家名字七个字",strokeColor:"#bc871f",height:56,fontSize:24,color:"#af6538",align:"left"},compId:7},{type:"Button",props:{y:168,x:549,width:182,var:"lingqu",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"41,31,38,33",height:91,anchorY:.5,anchorX:.5},compId:8,child:[{type:"Image",props:{y:24,x:64,skin:"chengjiu/lingquzi.png"},compId:11}]},{type:"Image",props:{y:174,x:84,width:342,skin:"main/shukuang.png",sizeGrid:"0,52,0,49",height:41},compId:12},{type:"Image",props:{y:176,x:86,width:337,var:"jindu",skin:"main/jindutiao.png",sizeGrid:"0,46,0,55",height:37},compId:13},{type:"Image",props:{y:7,x:13,skin:"chengjiu/xiao.png"},compId:14}],loadList:["chengjiu/chengjiupai.png","chengjiu/chengjiupai2.png","main/btn_lv.png","chengjiu/lingquzi.png","main/shukuang.png","main/jindutiao.png","chengjiu/xiao.png"],loadList3D:[]},e.chengjiu_1UI=g,v("ui.test.chengjiu_1UI",g);class u extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(u.uiView)}}u.uiView={type:"View",props:{width:160,height:160},compId:2,child:[{type:"Image",props:{y:80,x:80,skin:"main/sanbei.png",anchorY:.5,anchorX:.5},compId:3}],animations:[{nodes:[{target:3,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:20},{value:1.25,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:35},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:39},{value:1.15,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:43},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:46},{value:1.1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:48},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:51}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:20},{value:1.25,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:35},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:39},{value:1.15,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:43},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:46},{value:1.1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:48},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:51}]}}],name:"ani1",id:1,frameRate:60,action:0}],loadList:["main/sanbei.png"],loadList3D:[]},e.chengsanUI=u,v("ui.test.chengsanUI",u);class m extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(m.uiView)}}m.uiView={type:"View",props:{},compId:2,child:[{type:"Box",props:{y:0,x:0,var:"heng",scaleX:1,anchorY:.35,anchorX:.65},compId:6,child:[{type:"Clip",props:{x:.5,var:"huoxing",skin:"bg/clip_huoxing.png",clipY:2,clipX:3,autoPlay:!0},compId:3},{type:"Image",props:{y:32,x:110.5,var:"dianju",skin:"bg/dianju.png",rotation:0,anchorY:.5,anchorX:.5},compId:4},{type:"Image",props:{y:31,x:88.5,var:"jia",skin:"bg/dianjujia.png"},compId:5}]},{type:"Box",props:{y:0,x:0,var:"zong",anchorY:.65,anchorX:.3},compId:9,child:[{type:"Clip",props:{y:101,x:30.381484041268237,var:"shudianju",skin:"bg/clip_dianjushu.png",clipY:3,clipX:3,anchorY:.5,anchorX:.5},compId:7},{type:"Clip",props:{x:42.38148404126824,width:58,var:"shuhuoxing",skin:"bg/clip_huoxing.png",rotation:62,height:48,clipY:2,clipX:3,autoPlay:!0},compId:8}]}],loadList:["bg/clip_huoxing.png","bg/dianju.png","bg/dianjujia.png","bg/clip_dianjushu.png"],loadList3D:[]},e.dianjuUI=m,v("ui.test.dianjuUI",m);class y extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(y.uiView)}}y.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{width:750,height:1700,bgColor:"#000000",alpha:.6},compId:4},{type:"Box",props:{y:0,x:0,width:750,height:1334},compId:8,child:[{type:"Box",props:{y:366,x:379,var:"bigBox"},compId:87,child:[{type:"Box",props:{y:5,width:742,var:"lightView",height:742,anchorY:.5,anchorX:.5},compId:20,child:[{type:"Image",props:{skin:"shengli/guangzhuan1.png"},compId:21},{type:"Image",props:{y:0,x:741,skin:"shengli/guangzhuan1.png",scaleX:-1},compId:25},{type:"Image",props:{y:740,x:0,skin:"shengli/guangzhuan1.png",scaleY:-1},compId:24},{type:"Image",props:{y:741,x:742,skin:"shengli/guangzhuan1.png",scaleY:-1,scaleX:-1},compId:23}]},{type:"Box",props:{width:532,var:"topBox",height:494,anchorY:.5,anchorX:.5},compId:42,child:[{type:"Image",props:{y:152,x:167,skin:"shengli/qi.png"},compId:14},{type:"Image",props:{x:321,skin:"shengli/haojiao.png"},compId:15},{type:"Image",props:{x:194,skin:"shengli/haojiao.png",scaleX:-1},compId:16},{type:"Image",props:{y:157,skin:"shengli/shenglibu.png"},compId:17},{type:"Image",props:{y:102,x:183,skin:"shengli/dunpai.png"},compId:18},{type:"FontClip",props:{y:161.5,x:206,width:159,var:"cengshu",value:"12",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.7,scaleX:.7,height:133,align:"center"},compId:30}]},{type:"Box",props:{y:176,x:10,var:"expBox",anchorY:.5,anchorX:.5},compId:43,child:[{type:"Image",props:{x:12.5,width:430,skin:"bg/qianshu.png",sizeGrid:"0,56,0,50",height:67},compId:32},{type:"Box",props:{y:3,x:-.5,width:439,var:"expBar",height:67},compId:41,child:[{type:"Image",props:{width:439,var:"dengjitiao",skin:"bg/jingyantiaoshang.png",sizeGrid:"0,24,0,29",height:59},compId:33},{type:"Image",props:{width:437,skin:"bg/jingyantiaoguang.png",sizeGrid:"0,38,0,44",height:67},compId:40}]},{type:"Image",props:{y:-12,x:-28,width:64,skin:"shengli/dunpai.png",height:90},compId:31},{type:"FontClip",props:{y:11,x:-19,width:182,var:"dengji",value:"12",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.3,scaleX:.3,height:121,align:"center"},compId:39}]}]},{type:"Box",props:{y:665,x:371,var:"lingqu",anchorY:.5,anchorX:.5},compId:44,child:[{type:"Image",props:{y:0,x:0,width:441,skin:"main/biaotihuang.png",sizeGrid:"0,38,0,36",height:99},compId:45},{type:"Sprite",props:{y:24,x:168,texture:"main/jainglizi.png"},compId:46}]}]},{type:"Box",props:{y:800,x:375,width:256,var:"lanBox",height:78,anchorY:.5,anchorX:.5},compId:74,child:[{type:"Sprite",props:{y:3,x:0,texture:"juese/jiangbeihei.png",scaleY:.3,scaleX:.3},compId:77},{type:"Sprite",props:{texture:"juese/jiangbei.png",scaleY:.3,scaleX:.3},compId:78},{type:"FontClip",props:{y:24,x:120,width:500,var:"lanzuan",value:"+120",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.4,scaleX:.4,height:120,align:"left"},compId:79}]},{type:"Box",props:{y:900,x:375,width:256,var:"ziBox",height:78,anchorY:.5,anchorX:.5},compId:75,child:[{type:"Sprite",props:{y:3,texture:"juese/jiangbeihei.png",scaleY:.3,scaleX:.3},compId:80},{type:"Sprite",props:{x:0,texture:"juese/jiangbei1.png",scaleY:.3,scaleX:.3},compId:81},{type:"FontClip",props:{y:24,x:120,width:500,var:"hongzuan",value:"+120",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.4,scaleX:.4,height:120,align:"left"},compId:82}]},{type:"Box",props:{y:1e3,x:375,width:256,var:"coinBox",height:78,anchorY:.5,anchorX:.5},compId:76,child:[{type:"Sprite",props:{y:-14,x:0,texture:"juese/jiangbi.png",scaleY:.35,scaleX:.35},compId:83},{type:"FontClip",props:{y:24,x:120,width:500,var:"coinClip",value:"+120",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.4,scaleX:.4,height:120,align:"left"},compId:84},{type:"FontClip",props:{y:24,x:310,width:500,var:"deltaCoin",value:"+120",skin:"main/greenFont.png",sheet:"123456 7890-+ /:cdef",scaleY:.4,scaleX:.4,height:120,align:"left"},compId:85}]},{type:"Box",props:{y:1080,x:196,width:358,var:"fuhuo",height:100},compId:89,child:[{type:"guanggao",props:{var:"fuhuoBtn",runtime:"ui.test.guanggaoUI"},compId:88},{type:"chenger",props:{y:-68,x:258,runtime:"ui.test.chengerUI"},compId:90}]},{type:"Box",props:{y:1218,x:295,var:"closeTxt",bottom:76},compId:91,child:[{type:"Text",props:{var:"clickClose",text:"点击关闭",fontSize:40,color:"#ffffff",runtime:"laya.display.Text"},compId:92}]}],loadList:["shengli/guangzhuan1.png","shengli/qi.png","shengli/haojiao.png","shengli/shenglibu.png","shengli/dunpai.png","main/clipshuzi.png","bg/qianshu.png","bg/jingyantiaoshang.png","bg/jingyantiaoguang.png","main/biaotihuang.png","main/jainglizi.png","juese/jiangbeihei.png","juese/jiangbei.png","juese/jiangbei1.png","juese/jiangbi.png","main/greenFont.png"],loadList3D:[]},e.GameOverUI=y,v("ui.test.GameOverUI",y);class w extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(w.uiView)}}w.uiView={type:"View",props:{width:600,height:600},compId:2,child:[{type:"Light",props:{y:300,x:300,var:"light",blendMode:"lighter",anchorY:.5,anchorX:.5,runtime:"ui.test.LightUI"},compId:4},{type:"Image",props:{y:431,x:177,width:244,skin:"main/yuanhei.png",sizeGrid:"0,28,0,30",height:64},compId:14},{type:"Label",props:{y:431,x:156,width:288,var:"label",text:"X 1000",height:64,fontSize:60,color:"#ffffff",align:"center"},compId:5},{type:"GoldView",props:{y:150,x:155,var:"v1",runtime:"ui.test.GoldViewUI"},compId:13}],loadList:["main/yuanhei.png"],loadList3D:[]},e.GetItemCellUI=w,v("ui.test.GetItemCellUI",w);class x extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(x.uiView)}}x.uiView={type:"Dialog",props:{width:750,isModal:!0,height:1200},compId:2,child:[{type:"viewbg",props:{y:10,x:10,centerY:0,centerX:0,runtime:"ui.game.viewbgUI"},compId:18},{type:"Box",props:{y:0,x:0,width:750,var:"box",height:1e3},compId:15},{type:"Button",props:{y:1100,x:375,width:358,var:"rebornBtn",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"0,27,0,28",scaleY:1,scaleX:1,name:"close",height:100,anchorY:.5,anchorX:.5},compId:16,child:[{type:"Label",props:{y:30,x:68,width:222,var:"deshuliang",text:"确定",height:40,fontSize:28,color:"#ffffff",align:"center"},compId:17}]}],loadList:["main/btn_lv.png"],loadList3D:[]},e.GetItemDialogUI=x,v("ui.test.GetItemDialogUI",x);class f extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(f.uiView)}}f.uiView={type:"View",props:{width:300,height:300},compId:2,child:[{type:"ViewStack",props:{y:19,x:23,var:"vs"},compId:10,child:[{type:"Box",props:{y:8,x:1,visible:!1,var:"red",name:"item1"},compId:3,child:[{type:"Sprite",props:{y:7,x:0,texture:"juese/jiangbeihei.png"},compId:11},{type:"Sprite",props:{texture:"juese/jiangbei1.png"},compId:6},{type:"Image",props:{y:0,x:0,skin:"juese/jiangbeiguang1.png",blendMode:"lighter",alpha:.5},compId:7}]},{type:"Box",props:{y:8,visible:!1,var:"blue",name:"item2"},compId:4,child:[{type:"Sprite",props:{y:6,x:0,texture:"juese/jiangbeihei.png"},compId:12},{type:"Sprite",props:{texture:"juese/jiangbeilan.png"},compId:8},{type:"Sprite",props:{texture:"juese/jiangbeiguanglan.png",blendMode:"lighter",alpha:.5},compId:9}]},{type:"Image",props:{x:1,visible:!1,var:"gold",skin:"juese/jiangbi.png",name:"item0"},compId:5}]}],loadList:["juese/jiangbeihei.png","juese/jiangbei1.png","juese/jiangbeiguang1.png","juese/jiangbeilan.png","juese/jiangbeiguanglan.png","juese/jiangbi.png"],loadList3D:[]},e.GoldViewUI=f,v("ui.test.GoldViewUI",f);class I extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(I.uiView)}}I.uiView={type:"Scene",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{y:-219,x:-210,skin:"main/guang1.png",blendMode:"lighter"},compId:3},{type:"Image",props:{y:-219,x:-210,skin:"main/guang2.png",blendMode:"lighter"},compId:4},{type:"Image",props:{y:-281,x:-223,skin:"main/guang1.png",rotation:12,blendMode:"lighter"},compId:5},{type:"Image",props:{y:-254,x:-156,skin:"main/guang2.png",rotation:-3,blendMode:"lighter"},compId:6}],animations:[{nodes:[{target:3,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"alpha",index:45},{value:0,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"alpha",index:95},{value:0,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"alpha",index:389},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:442}]}},{target:4,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:4,label:null,key:"alpha",index:45},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:95},{value:1,tweenMethod:"linearNone",tween:!0,target:4,label:null,key:"alpha",index:115},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:183}]}},{target:5,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"alpha",index:115},{value:1,tweenMethod:"linearNone",tween:!0,target:5,key:"alpha",index:183},{value:1,tweenMethod:"linearNone",tween:!0,target:5,label:null,key:"alpha",index:244},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"alpha",index:313}]}},{target:6,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:6,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:6,label:null,key:"alpha",index:244},{value:1,tweenMethod:"linearNone",tween:!0,target:6,key:"alpha",index:313},{value:1,tweenMethod:"linearNone",tween:!0,target:6,label:null,key:"alpha",index:389},{value:0,tweenMethod:"linearNone",tween:!0,target:6,key:"alpha",index:442}]}}],name:"ani1",id:1,frameRate:40,action:2}],loadList:["main/guang1.png","main/guang2.png"],loadList3D:[]},e.guangUI=I,v("ui.test.guangUI",I);class b extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(b.uiView)}}b.uiView={type:"View",props:{width:358,height:100},compId:2,child:[{type:"Button",props:{y:50,x:179,width:358,var:"fuhuo",stateNum:1,skin:"main/btn_zi.png",sizeGrid:"0,27,0,28",scaleY:1,scaleX:1,height:100,anchorY:.5,anchorX:.5},compId:3,child:[{type:"Sprite",props:{y:4,x:90,texture:"main/action.png"},compId:4},{type:"Label",props:{y:30,x:159,width:122,var:"deshuliang",text:"免费获得",height:40,fontSize:28,color:"#ffffff",align:"left"},compId:5}]}],animations:[{nodes:[{target:3,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:4},{value:.9,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:7},{value:1.1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:11},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:15},{value:1,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"scaleY",index:30}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:4},{value:.9,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:7},{value:1.1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:11},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:15},{value:1,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"scaleX",index:30}]}}],name:"ani1",id:1,frameRate:24,action:0}],loadList:["main/btn_zi.png","main/action.png"],loadList3D:[]},e.guanggaoUI=b,v("ui.test.guanggaoUI",b);class L extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(L.uiView)}}L.uiView={type:"View",props:{width:0,height:0},compId:2,child:[{type:"Clip",props:{y:-46.5,x:-107,var:"huoxing",skin:"bg/clip_huoxing.png",clipY:2,clipX:3,autoPlay:!0},compId:3},{type:"Box",props:{y:-29,x:-29,width:58,var:"box",height:58},compId:6,child:[{type:"Image",props:{y:29,x:29,var:"dianju",skin:"bg/dianju.png",rotation:0,anchorY:.5,anchorX:.5},compId:4}]},{type:"Image",props:{y:0,x:-20.5,var:"jia",skin:"bg/dianjujia.png"},compId:5}],loadList:["bg/clip_huoxing.png","bg/dianju.png","bg/dianjujia.png"],loadList3D:[]},e.HengjuUI=L,v("ui.test.HengjuUI",L);class _ extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(_.uiView)}}_.uiView={type:"View",props:{},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:132,texture:"bg/renlankuang.png",pivotY:55,pivotX:66,height:110},compId:3},{type:"Sprite",props:{y:0,x:0,width:50,var:"dir",texture:"bg/andanlandian.png",pivotY:110,pivotX:25,height:40},compId:4}],loadList:["bg/renlankuang.png","bg/andanlandian.png"],loadList3D:[]},e.HeroFootUI=_,v("ui.test.HeroFootUI",_);class k extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(k.uiView)}}k.uiView={type:"Scene",props:{width:750,height:1334},loadList:[],loadList3D:[]},e.hongtanUI=k,v("ui.test.hongtanUI",k);class S extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(S.uiView)}}S.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:0,x:-51,skin:"bg/tianshiying.png",scaleY:.8,scaleX:.8,anchorY:.5,anchorX:.5},compId:5},{type:"Image",props:{y:-188,x:-29,skin:"bg/zhuanpan.png"},compId:4},{type:"Image",props:{y:-225,x:-164,skin:"bg/huzi.png"},compId:3,child:[{type:"Image",props:{y:7,x:15,var:"tan",skin:"bg/tantan.jpg",scaleY:1.1,scaleX:1.1},compId:6}]}],animations:[{nodes:[{target:3,keyframes:{y:[{value:-232,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:0},{value:-255,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:20},{value:-232,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"y",index:40}],x:[{value:-162,tweenMethod:"linearNone",tween:!0,target:3,key:"x",index:0},{value:-162,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"x",index:40}]}}],name:"ani1",id:1,frameRate:24,action:2}],loadList:["bg/tianshiying.png","bg/zhuanpan.png","bg/huzi.png","bg/tantan.jpg"],loadList3D:[]},e.huziUI=S,v("ui.test.huziUI",S);class M extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(M.uiView)}}M.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{width:750,height:1700,bgColor:"#000000"},compId:3},{type:"Label",props:{x:0,width:750,var:"initTxt",text:"0%",height:100,fontSize:60,color:"#ffffff",centerY:0,bold:!0,align:"center"},compId:4}],loadList:[],loadList3D:[]},e.initViewUI=M,v("ui.test.initViewUI",M);class D extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(D.uiView)}}D.uiView={type:"View",props:{width:750,height:1334},compId:1,child:[{type:"viewbg",props:{runtime:"ui.game.viewbgUI"},compId:51},{type:"Box",props:{y:141,x:0,width:751,height:1093},compId:119,child:[{type:"Button",props:{y:274,x:111,visible:!0,var:"zuo",stateNum:1,skin:"main/btn_zuo.png",anchorY:.5,anchorX:.5},compId:43},{type:"Button",props:{y:276,x:633,width:63,visible:!0,var:"you",stateNum:1,skin:"main/btn_zuo.png",scaleX:-1,anchorY:.5,anchorX:.5},compId:44},{type:"Box",props:{y:465,x:384,var:"roleBox"},compId:114,child:[{type:"Image",props:{skin:"ren/ying.png",anchorY:.5,anchorX:.5},compId:115}]},{type:"Sprite",props:{y:110,x:296,var:"qidai",texture:"juese/weikai.png",scaleY:.7,scaleX:.7},compId:117},{type:"Box",props:{y:665,x:0,width:751,height:428},compId:94,child:[{type:"Image",props:{y:122,width:495,skin:"juese/juese_zi.png",sizeGrid:"0,16,0,15",height:305},compId:31},{type:"Image",props:{y:-14,x:34,var:"shengming",skin:"juese/juese_di.png"},compId:21,child:[{type:"Image",props:{y:92,x:41,skin:"juese/juese_jiaxue.png"},compId:9},{type:"Label",props:{y:5,x:54,width:74,text:"生命",height:39,fontSize:36,color:"#ffffff",align:"left"},compId:22},{type:"Image",props:{y:171,x:32,skin:"juese/shengming.png"},compId:68},{type:"FontClip",props:{y:177,x:69,width:461,var:"shengmingjia",value:"+1",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.25,scaleX:.25,height:115,align:"center"},compId:69},{type:"ViewStack",props:{y:216.8,x:41,var:"vs1",selectedIndex:0},compId:108,child:[{type:"Box",props:{name:"item0"},compId:106,child:[{type:"FontClip",props:{y:4,x:65.5,width:180,var:"hpLv",value:"99",spaceX:-3,skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:vbnd",scaleY:.25,scaleX:.25,height:113,align:"center"},compId:86},{type:"Sprite",props:{x:-.5,texture:"main/dengji.png",scaleY:.6,scaleX:.6},compId:87}]},{type:"Sprite",props:{y:3,x:11,texture:"juese/max.png",name:"item1"},compId:107}]},{type:"ViewStack",props:{y:280,x:-32.25,width:257,var:"vs11",height:127},compId:112,child:[{type:"Button",props:{y:64,x:126,width:182,var:"shengmingniu",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"41,31,38,33",name:"item1",height:91,anchorY:.5,anchorX:.5},compId:32,child:[{type:"Image",props:{y:12,x:71,skin:"juese/shengzizi.png",scaleY:.8,scaleX:.8},compId:60},{type:"Sprite",props:{y:38.5,x:40,texture:"main/jinbi.png",scaleY:.5,scaleX:.5},compId:75},{type:"Text",props:{y:37,x:70.5,var:"hpGold",text:"1000",fontSize:28,color:"#ffffff",align:"left",runtime:"laya.display.Text"},compId:76}]},{type:"Box",props:{y:31,x:27.399999999999977,var:"box1",name:"item0"},compId:72,child:[{type:"Image",props:{y:5,x:16,width:151,skin:"juese/juese_tiaoxia.png",height:40},compId:12},{type:"Image",props:{y:4.5,x:16,width:151,var:"tiao",skin:"main/juese_tiaoshang.png",height:36},compId:13},{type:"Button",props:{y:24.5,x:184,var:"jia",stateNum:1,skin:"juese/btn_jia.png",scaleY:1.2,scaleX:1.2,anchorY:.5,anchorX:.5},compId:59},{type:"Image",props:{y:24,x:16,var:"redImg",skin:"main/baoshi.png",anchorY:.5,anchorX:.5},compId:58},{type:"FontClip",props:{y:50,x:11,width:917,var:"xueshu",value:"1299/1234",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.2,scaleX:.2,height:115,align:"center"},compId:14},{type:"juese_zuanguang",props:{y:23,x:17,var:"a1",runtime:"ui.test.juese_zuanguangUI"},compId:99}]}]},{type:"juese_2",props:{y:111.5,x:147.5,var:"lv1",runtime:"ui.test.juese_2UI"},compId:126}]},{type:"Image",props:{y:-13,x:276,var:"gongji",skin:"juese/juese_di.png"},compId:23,child:[{type:"Image",props:{y:92,x:41,skin:"juese/juese_jiagong.png"},compId:24},{type:"Label",props:{y:5,x:54,width:74,text:"攻击",height:39,fontSize:36,color:"#ffffff",align:"left"},compId:29},{type:"Image",props:{y:172,x:28,skin:"juese/gongji.png"},compId:70},{type:"FontClip",props:{y:175,x:70,width:461,var:"gongjijia",value:"+1",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.25,scaleX:.25,height:115,align:"center"},compId:71},{type:"ViewStack",props:{y:212,x:39,var:"vs2"},compId:111,child:[{type:"Sprite",props:{y:3,x:11,var:"atkMax",texture:"juese/max.png",name:"item1"},compId:102},{type:"Box",props:{y:0,x:0,width:110,name:"item0",height:35.4},compId:110,child:[{type:"FontClip",props:{y:4,x:65,width:180,var:"atkLv",value:"99",spaceX:-3,skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:vbnd",scaleY:.25,scaleX:.25,height:113,align:"center"},compId:88},{type:"Sprite",props:{texture:"main/dengji.png",scaleY:.6,scaleX:.6},compId:89}]}]},{type:"ViewStack",props:{y:290,x:-18,width:234,var:"vs12",height:116},compId:113,child:[{type:"Button",props:{y:53,x:105,width:182,var:"gongjiniu",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"41,31,38,33",name:"item1",height:91,anchorY:.5,anchorX:.5},compId:66,child:[{type:"Image",props:{y:13,x:77,skin:"juese/shengzizi.png",scaleY:.8,scaleX:.8},compId:77},{type:"Sprite",props:{y:39,x:46,texture:"main/jinbi.png",scaleY:.5,scaleX:.5},compId:78},{type:"Text",props:{y:38,x:76,var:"atkGold",text:"1000",fontSize:28,color:"#ffffff",align:"left",runtime:"laya.display.Text"},compId:79}]},{type:"Box",props:{y:16,x:5,width:230,var:"box2",name:"item0",height:84},compId:73,child:[{type:"Image",props:{y:9,x:16,width:151,skin:"juese/juese_tiaoxia.png",height:40},compId:61},{type:"Image",props:{y:8.5,x:17,var:"tiao2",skin:"main/juese_tiaoshang.png",height:36},compId:62},{type:"Button",props:{y:28.5,x:185,var:"jia2",stateNum:1,skin:"juese/btn_jia.png",scaleY:1.2,scaleX:1.2,anchorY:.5,anchorX:.5},compId:63},{type:"Image",props:{y:28,x:18,var:"blueImg",skin:"main/baoshi2.png",anchorY:.5,anchorX:.5},compId:64},{type:"FontClip",props:{y:51,x:11,width:910,var:"gongshu",value:"1299/1234",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.2,scaleX:.2,height:115,align:"center"},compId:65},{type:"juese_zuanguang",props:{y:22,x:28,var:"a2",runtime:"ui.test.juese_zuanguangUI"},compId:101}]}]},{type:"juese_2",props:{y:111,x:148,var:"lv2",runtime:"ui.test.juese_2UI"},compId:127}]},{type:"Box",props:{y:1,x:496,width:327,height:427},compId:93,child:[{type:"Image",props:{y:122,x:-1,width:255,skin:"juese/juese_lan.png",sizeGrid:"0,16,0,15",height:304},compId:30},{type:"Box",props:{y:-17,x:37.5},compId:120,child:[{type:"Image",props:{x:1,width:175,skin:"juese/juese_hei.png",sizeGrid:"23,70,19,34",height:367,alpha:.5},compId:38},{type:"Image",props:{y:206,x:2,skin:"juese/juesekuai.png"},compId:40},{type:"Image",props:{y:49,width:177,var:"jinengtubiao",skin:"main/kawen.png",height:177},compId:39},{type:"Label",props:{y:10,x:20,width:133,var:"jinengming",text:"技能名字",height:33,fontSize:30,color:"#f3e9e9",align:"center"},compId:41},{type:"Label",props:{y:254,x:9,wordWrap:!0,width:157,var:"skillLabel",text:"技能说明技能说明技能说明技能说明技能说明",height:114,fontSize:22,color:"#f3e9e9",align:"center"},compId:42}]}]}]},{type:"Box",props:{y:545,x:36},compId:95,child:[{type:"Image",props:{y:4,width:674,skin:"juese/juese_hei.png",sizeGrid:"15,26,22,22",height:69,alpha:.5},compId:53},{type:"Sprite",props:{x:63,texture:"juese/juese_jiaxue.png"},compId:54},{type:"Sprite",props:{y:2,x:364,texture:"juese/juese_jiagong.png"},compId:55},{type:"FontClip",props:{y:23,x:169,var:"shengmingshu",value:"600",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.3,scaleX:.3,align:"left"},compId:56},{type:"FontClip",props:{y:23,x:460,var:"gongjishu",value:"600",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.3,scaleX:.3,align:"left"},compId:57},{type:"FontClip",props:{y:23,x:250,var:"hpAddFc",value:"+11",skin:"main/greenFont.png",sheet:"123456 7890-+ /:%.ab",scaleY:.3,scaleX:.3,align:"left"},compId:90},{type:"FontClip",props:{y:23,x:542,var:"atkAddFc",value:"+11",skin:"main/greenFont.png",sheet:"123456 7890-+ /:%.ab",scaleY:.3,scaleX:.3,align:"left"},compId:91}]},{type:"shengjiEFF",props:{y:241,x:284,var:"lvEff",scaleY:2,scaleX:2,blendMode:"lighter",runtime:"ui.test.shengjiEFFUI"},compId:97},{type:"ViewStack",props:{y:407,x:204,width:387,var:"vs109",height:116},compId:145,child:[{type:"Box",props:{y:1.5,x:-12,name:"item1"},compId:138,child:[{type:"Image",props:{y:22,x:41,width:331,skin:"bg/bosstiaoxia.png",sizeGrid:"0,20,0,20",height:42},compId:140},{type:"Sprite",props:{y:24,x:44,var:"zitiao",texture:"juese/suipianshang.png"},compId:141},{type:"Sprite",props:{texture:"juese/suipian.png"},compId:142},{type:"FontClip",props:{y:25,x:128,width:599,var:"hongzuan",value:"123/900",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.3,scaleX:.3,height:120,align:"center"},compId:143},{type:"Text",props:{y:78,x:71,text:"累计观看视频50次",fontSize:30,color:"#ffffff",bold:!0,align:"center",runtime:"laya.display.Text"},compId:146}]},{type:"Button",props:{y:50.5,x:176,width:280,var:"fuhuo",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"0,27,0,28",scaleY:1,scaleX:1,name:"item2",height:100,anchorY:.5,anchorX:.5},compId:139,child:[{type:"Sprite",props:{y:25.5,x:74.5,texture:"main/xuanzezi.png"},compId:144}]},{type:"yixuanze",props:{y:-19.5,x:35,var:"xuan",name:"item0",runtime:"ui.test.yixuanzeUI"},compId:148}]}]}],loadList:["main/btn_zuo.png","ren/ying.png","juese/weikai.png","juese/juese_zi.png","juese/juese_di.png","juese/juese_jiaxue.png","juese/shengming.png","main/clipshuzi.png","main/dengji.png","juese/max.png","main/btn_lv.png","juese/shengzizi.png","main/jinbi.png","juese/juese_tiaoxia.png","main/juese_tiaoshang.png","juese/btn_jia.png","main/baoshi.png","juese/juese_jiagong.png","juese/gongji.png","main/baoshi2.png","juese/juese_lan.png","juese/juese_hei.png","juese/juesekuai.png","main/kawen.png","main/greenFont.png","bg/bosstiaoxia.png","juese/suipianshang.png","juese/suipian.png","main/xuanzezi.png"],loadList3D:[]},e.jueseUI=D,v("ui.test.jueseUI",D);class T extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(T.uiView)}}T.uiView={type:"View",props:{width:265,height:540},compId:1,child:[{type:"Box",props:{y:5,width:265,var:"ren"},compId:7,child:[{type:"Image",props:{y:436,skin:"ren/ying.png"},compId:9},{type:"Image",props:{y:5,x:-110,skin:"ren/juese1.png"},compId:8}]}],loadList:["ren/ying.png","ren/juese1.png"],loadList3D:[]},e.juese_1UI=T,v("ui.test.juese_1UI",T);class E extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(E.uiView)}}E.uiView={type:"Scene",props:{},compId:2,child:[{type:"Image",props:{y:0,x:0,skin:"main/juese_sheng.png",anchorY:1,anchorX:.5},compId:3}],animations:[{nodes:[{target:3,keyframes:{y:[{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:0},{value:-18,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:10},{value:0,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"y",index:20}]}},{target:2,keyframes:{scaleY:[{value:.8,tweenMethod:"linearNone",tween:!0,target:2,key:"scaleY",index:0},{value:1.1,tweenMethod:"linearNone",tween:!0,target:2,key:"scaleY",index:10},{value:.8,tweenMethod:"linearNone",tween:!0,target:2,label:null,key:"scaleY",index:20}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:2,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:2,label:null,key:"scaleX",index:20}]}}],name:"ani1",id:1,frameRate:24,action:0}],loadList:["main/juese_sheng.png"],loadList3D:[]},e.juese_2UI=E,v("ui.test.juese_2UI",E);class A extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(A.uiView)}}A.uiView={type:"Dialog",props:{width:750,isModal:!0,height:1200},compId:2,child:[{type:"viewbg",props:{y:0,x:0,var:"bg",runtime:"ui.game.viewbgUI"},compId:29},{type:"Box",props:{width:750,height:506,centerY:-150,centerX:0},compId:4,child:[{type:"Light",props:{y:259,x:375,var:"light",blendMode:"lighter",anchorY:.5,anchorX:.5,runtime:"ui.test.LightUI"},compId:20},{type:"Button",props:{y:661,x:375,width:358,var:"rebornBtn",stateNum:1,skin:"main/btn_zi.png",sizeGrid:"0,27,0,28",scaleY:1,scaleX:1,height:100,anchorY:.5,anchorX:.5},compId:7,child:[{type:"Sprite",props:{y:7,x:46,texture:"main/action.png"},compId:14},{type:"Label",props:{y:29,x:98,width:222,var:"deshuliang",text:"随机获得6~10个",height:40,fontSize:28,color:"#ffffff",align:"center"},compId:13}]},{type:"Button",props:{y:68,x:614,var:"closeBtn",stateNum:1,skin:"main/btn_guanbi.png",name:"close"},compId:9},{type:"GoldView",props:{y:53,x:145,var:"v1",scaleY:1.6,scaleX:1.6,runtime:"ui.test.GoldViewUI"},compId:28},{type:"Box",props:{y:474,x:262},compId:31,child:[{type:"Image",props:{width:244,skin:"main/yuanhei.png",sizeGrid:"0,28,0,30",height:64},compId:30},{type:"Label",props:{y:12,x:38,width:167,text:"水晶不足",height:40,fontSize:36,color:"#ffffff",align:"center"},compId:10}]}]},{type:"Text",props:{y:943,x:361,runtime:"laya.display.Text"},compId:33},{type:"FontClip",props:{y:926,x:206,width:691,var:"fc",value:"11:11",skin:"main/redFont.png",sheet:"123456 7890-+ /:abcd",scaleY:.5,scaleX:.5,height:113,align:"center"},compId:34}],loadList:["main/btn_zi.png","main/action.png","main/btn_guanbi.png","main/yuanhei.png","main/redFont.png"],loadList3D:[]},e.juese_tishiUI=A,v("ui.test.juese_tishiUI",A);class C extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(C.uiView)}}C.uiView={type:"Scene",props:{},compId:2,child:[{type:"Image",props:{y:0,x:0,skin:"juese/1.png",anchorY:.5,anchorX:.5},compId:3}],animations:[{nodes:[{target:3,keyframes:{visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:3,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:3,key:"visible",index:58},{value:!1,tweenMethod:"linearNone",tween:!1,target:3,label:null,key:"visible",index:100}],skin:[{value:"juese/1.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:0},{value:"juese/2.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:3},{value:"juese/3.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:6},{value:"juese/4.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:9},{value:"juese/5.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:12},{value:"juese/6.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:15},{value:"juese/7.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:18},{value:"juese/8.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:21},{value:"juese/9.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:24},{value:"juese/10.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:27},{value:"juese/11.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:30},{value:"juese/11.png",tweenMethod:"linearNone",tween:!1,target:3,label:null,key:"skin",index:38},{value:"juese/12.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:41},{value:"juese/13.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:44},{value:"juese/14.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:47},{value:"juese/15.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:50},{value:"juese/16.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:53},{value:"juese/17.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:56},{value:"juese/17.png",tweenMethod:"linearNone",tween:!1,target:3,label:null,key:"skin",index:58},{value:"juese/17.png",tweenMethod:"linearNone",tween:!1,target:3,label:null,key:"skin",index:100}]}}],name:"ani1",id:1,frameRate:24,action:2}],loadList:["juese/1.png","juese/2.png","juese/3.png","juese/4.png","juese/5.png","juese/6.png","juese/7.png","juese/8.png","juese/9.png","juese/10.png","juese/11.png","juese/12.png","juese/13.png","juese/14.png","juese/15.png","juese/16.png","juese/17.png"],loadList3D:[]},e.juese_zuanguangUI=C,v("ui.test.juese_zuanguangUI",C);class B extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(B.uiView)}}B.uiView={type:"View",props:{width:742,height:742},compId:2,child:[{type:"Sprite",props:{y:0,x:0,texture:"main/guangzhuan1.png"},compId:9},{type:"Sprite",props:{y:0,x:742,texture:"main/guangzhuan1.png",scaleX:-1},compId:10},{type:"Sprite",props:{y:742,x:0,texture:"main/guangzhuan1.png",scaleY:-1},compId:11},{type:"Sprite",props:{y:742,x:742,texture:"main/guangzhuan1.png",scaleY:-1,scaleX:-1},compId:12}],loadList:["main/guangzhuan1.png"],loadList3D:[]},e.LightUI=B,v("ui.test.LightUI",B);class N extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(N.uiView)}}N.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{width:750,height:1700,bgColor:"#ffffff"},compId:3},{type:"Box",props:{width:156,scaleY:1.5,scaleX:1.5,height:156,centerY:0,centerX:0},compId:5,child:[{type:"Clip",props:{y:0,x:0,var:"clip",skin:"loading/loadingClip.png",interval:150,clipY:4,clipX:4,autoPlay:!0},compId:10},{type:"Label",props:{y:58,x:0,width:156,var:"txt",text:"10%",height:40,fontSize:36,color:"#b7b7b7",bold:!0,align:"center"},compId:7}]}],loadList:["loading/loadingClip.png"],loadList3D:[]},e.LoadingUI=N,v("ui.test.LoadingUI",N);class V extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(V.uiView)}}V.uiView={type:"View",props:{width:750,height:500},compId:2,child:[{type:"TextInput",props:{y:121,x:236,width:278,var:"t1",prompt:"输入用户名",height:83,fontSize:40,bgColor:"#ffffff"},compId:3}],loadList:[],loadList3D:[]},e.LoginViewUI=V,v("ui.test.LoginViewUI",V);class U extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(U.uiView)}}U.uiView={type:"View",props:{width:750,height:141},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:750,texture:"main/hei.jpg",height:141,alpha:.7},compId:63},{type:"Image",props:{y:0,x:0,width:501,skin:"main/touxiangdi.png",sizeGrid:"0,85,0,54",height:106,alpha:1},compId:40},{type:"Image",props:{y:8,x:8,width:69,var:"headImg",scaleY:1.2,scaleX:1.2,height:69},compId:42},{type:"Image",props:{y:8,x:8,skin:"main/touxiangkuang.png",scaleY:1.2,scaleX:1.2},compId:41},{type:"Image",props:{y:106,x:0,width:447,skin:"main/jingyantiaodi.png",sizeGrid:"0,67,0,42",height:35},compId:43},{type:"Image",props:{y:106,x:0,width:449,var:"jingyantiao",skin:"main/jingyantiaoshang.png",sizeGrid:"0,64,0,26",height:35},compId:44},{type:"FontClip",props:{y:114,x:82,width:226,var:"dengji",value:"12",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.2,scaleX:.2,height:115,align:"left"},compId:21},{type:"Label",props:{y:11,x:101,width:229,var:"nameTxt",text:"玩家名字七个字",height:33,fontSize:30,color:"#f3e9e9",align:"left"},compId:45},{type:"Image",props:{y:105.5,x:8,width:26,skin:"main/dunpai.png",height:35},compId:61},{type:"Image",props:{y:109,x:38,skin:"main/dengji.png",scaleY:.5,scaleX:.5},compId:46},{type:"Image",props:{y:65,x:123,var:"goldImg",skin:"main/dongjin.png",anchorY:.5,anchorX:.5},compId:47},{type:"FontClip",props:{y:53,x:140,width:582,var:"coinClip",value:"12999",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.2,scaleX:.2,height:115,align:"left"},compId:48},{type:"Sprite",props:{y:50,x:265,texture:"main/tili.png"},compId:49},{type:"FontClip",props:{y:80,x:310,width:472,var:"timerClip",value:"00:00",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.15,scaleX:.15,height:122},compId:56},{type:"FontClip",props:{y:53,x:302,width:434,var:"tiliClip",value:"20/20",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.2,scaleX:.2,height:147},compId:57},{type:"FontClip",props:{y:32,x:325,width:472,var:"appEnergyClip",value:"-5",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.15,scaleX:.15,height:122},compId:58},{type:"Button",props:{y:63,x:413,var:"jia",stateNum:1,skin:"main/btn_jia.png",scaleY:1,scaleX:1,anchorY:.5,anchorX:.5},compId:62}],loadList:["main/hei.jpg","main/touxiangdi.png","main/touxiangkuang.png","main/jingyantiaodi.png","main/jingyantiaoshang.png","main/clipshuzi.png","main/dunpai.png","main/dengji.png","main/dongjin.png","main/tili.png","main/btn_jia.png"],loadList3D:[]},e.mainUIUI=U,v("ui.test.mainUIUI",U);class Y extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(Y.uiView)}}Y.uiView={type:"View",props:{width:750,height:1334},loadList:[],loadList3D:[]},e.MainUITestUI=Y,v("ui.test.MainUITestUI",Y);class P extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(P.uiView)}}P.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:101,x:0,skin:"bg/tianshiying.png",anchorY:.5,anchorX:.5},compId:3},{type:"Box",props:{y:-3,x:-7},compId:4,child:[{type:"Image",props:{y:-53,x:97,skin:"bg/guichibang.png",rotation:0,anchorY:.5,anchorX:0},compId:5},{type:"Image",props:{y:-61,x:-86,skin:"bg/guichibang.png",scaleX:-1,rotation:0,anchorY:.5,anchorX:0},compId:6},{type:"Image",props:{y:-75,x:-12,skin:"bg/gui.png",scaleY:1.3,scaleX:1.3,anchorY:.5,anchorX:.5},compId:7},{type:"Image",props:{y:-199,x:-102,var:"tan",skin:"bg/tantan.jpg",scaleY:1.1,scaleX:1.1},compId:8}]}],animations:[{nodes:[{target:4,keyframes:{y:[{value:-105.5,tweenMethod:"linearNone",tween:!0,target:4,key:"y",index:0},{value:-135,tweenMethod:"linearNone",tween:!0,target:4,key:"y",index:20},{value:-105.5,tweenMethod:"linearNone",tween:!0,target:4,label:null,key:"y",index:40}],x:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:20},{value:0,tweenMethod:"linearNone",tween:!0,target:4,label:null,key:"x",index:40}]}},{target:5,keyframes:{y:[{value:-61,tweenMethod:"linearNone",tween:!0,target:5,label:null,key:"y",index:0}],x:[{value:89,tweenMethod:"linearNone",tween:!0,target:5,label:null,key:"x",index:0}],rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:0},{value:30,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:20},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:40}]}},{target:6,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:6,key:"rotation",index:0},{value:-30,tweenMethod:"linearNone",tween:!0,target:6,key:"rotation",index:20},{value:0,tweenMethod:"linearNone",tween:!0,target:6,key:"rotation",index:40}]}},{target:3,keyframes:{y:[{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:0}],scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:20},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:40}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:20},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:40}]}}],name:"ani1",id:1,frameRate:24,action:2}],loadList:["bg/tianshiying.png","bg/guichibang.png","bg/gui.png","bg/tantan.jpg"],loadList3D:[]},e.moguiUI=P,v("ui.test.moguiUI",P);class H extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(H.uiView)}}H.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{alpha:.6},compId:20,child:[{type:"Rect",props:{width:750,lineWidth:1,height:1700,fillColor:"#000000"},compId:21}]},{type:"Box",props:{centerY:0,centerX:0},compId:19,child:[{type:"Image",props:{y:0,x:34,width:681,skin:"main/biaotihong.png",sizeGrid:"0,23,0,125",height:99},compId:3},{type:"Label",props:{y:31,x:196.5,var:"biaoti2",text:"你遇见了恶魔",fontSize:48,color:"#000000",alpha:.5,align:"center"},compId:4,child:[{type:"Script",props:{y:1,x:0,strength:2,runtime:"laya.effect.BlurFilterSetter"},compId:6}]},{type:"Label",props:{y:25,x:196.5,var:"baioti",text:"你遇见了恶魔",fontSize:48,color:"#ffffff",align:"center"},compId:5},{type:"mogui",props:{y:305,x:344.5,scaleY:.8,scaleX:.8,runtime:"ui.test.moguiUI"},compId:7},{type:"Label",props:{y:433,x:135,text:"是否与魔鬼签订契约？",fontSize:48,color:"#ffffff",align:"center"},compId:8},{type:"Label",props:{y:520,x:190,var:"txt",text:"失去274生命上限",fontSize:48,color:"#ffffff",align:"center"},compId:9},{type:"Label",props:{y:726,width:750,var:"tisheng",text:"攻速提升",fontSize:48,color:"#ffffff",align:"center"},compId:11},{type:"Sprite",props:{y:568,x:297,texture:"main/PT1.png"},compId:12},{type:"Image",props:{y:808,x:301.5,width:147,var:"skillBox",height:147},compId:13},{type:"Button",props:{y:1096,x:546,width:204,var:"btn_lv",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"0,22,0,23",height:91,anchorY:.5,anchorX:.5},compId:15,child:[{type:"Image",props:{y:17,x:69,skin:"main/qianding.png"},compId:17}]},{type:"Button",props:{y:1096,x:212,width:204,var:"btn_hong",stateNum:1,skin:"main/btn_hong.png",sizeGrid:"0,22,0,23",height:91,anchorY:.5,anchorX:.5},compId:16,child:[{type:"Image",props:{y:19,x:64,skin:"main/jujue.png"},compId:18}]}]}],loadList:["main/biaotihong.png","main/PT1.png","main/btn_lv.png","main/qianding.png","main/btn_hong.png","main/jujue.png"],loadList3D:[]},e.mogui_1UI=H,v("ui.test.mogui_1UI",H);class R extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(R.uiView)}}R.uiView={type:"Scene",props:{width:750,height:1334},loadList:[],loadList3D:[]},e.newhandUI=R,v("ui.test.newhandUI",R);class X extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(X.uiView)}}X.uiView={type:"View",props:{width:100,height:100},compId:2,child:[{type:"Clip",props:{y:-137,x:-155,var:"lightClip",skin:"guide/clip_guang.png",scaleY:2,scaleX:2,clipY:2,clipX:4,blendMode:"lighter"},compId:9},{type:"Image",props:{y:43,x:12,skin:"guide/xiaoshou.png",anchorY:.5,anchorX:.5},compId:3}],animations:[{nodes:[{target:3,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:2},{value:.8,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"scaleY",index:6},{value:1,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"scaleY",index:8}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:2},{value:.8,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"scaleX",index:6},{value:1,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"scaleX",index:8}],rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"rotation",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"rotation",index:8}]}}],name:"ani1",id:1,frameRate:24,action:0}],loadList:["guide/clip_guang.png","guide/xiaoshou.png"],loadList3D:[]},e.newhand1UI=X,v("ui.test.newhand1UI",X);class z extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(z.uiView)}}z.uiView={type:"Dialog",props:{width:600,isModal:!0,height:450},compId:2,child:[{type:"BaseTipDialog",props:{y:0,x:0,runtime:"ui.test.BaseTipDialogUI"},compId:42},{type:"Image",props:{y:19,x:245,skin:"main/biaotitishi.png"},compId:28},{type:"Text",props:{y:111,x:6,width:588,var:"title",text:"体力不足",height:36,fontSize:36,color:"#ffffff",bold:!0,align:"center",runtime:"laya.display.Text"},compId:10},{type:"ViewStack",props:{y:129,x:6,var:"vs"},compId:40,child:[{type:"Box",props:{y:38,x:2,width:535,name:"item0",height:174},compId:38,child:[{type:"Sprite",props:{y:14,x:244,var:"xin",texture:"main/daxin.png"},compId:9},{type:"Text",props:{y:138,x:110,width:380,var:"l1",text:"剩余次数:0/3",height:36,fontSize:36,color:"#ffffff",bold:!0,align:"center",runtime:"laya.display.Text"},compId:12}]},{type:"Box",props:{y:11,x:211,width:184,name:"item1",height:218},compId:39,child:[{type:"GoldView",props:{y:1,x:0,var:"dia",scaleY:.6,scaleX:.6,runtime:"ui.test.GoldViewUI"},compId:36},{type:"FontClip",props:{y:170,x:-195,width:1950,var:"fc",value:"11:11",skin:"main/redFont.png",sheet:"123456 7890-+ /:abcd",scaleY:.3,scaleX:.3,name:"item1",height:100,align:"center"},compId:35}]}]},{type:"guanggao",props:{y:350,x:121,var:"btnView",runtime:"ui.test.guanggaoUI"},compId:41}],loadList:["main/biaotitishi.png","main/daxin.png","main/redFont.png"],loadList3D:[]},e.NoResDialogUI=z,v("ui.test.NoResDialogUI",z);class G extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(G.uiView)}}G.uiView={type:"Dialog",props:{width:750,isModal:!0,height:1334},compId:2,child:[{type:"Light",props:{y:606,x:375,var:"light",blendMode:"lighter",anchorY:.5,anchorX:.5,runtime:"ui.test.LightUI"},compId:4},{type:"Button",props:{y:606,x:375,var:"icon",stateNum:2,skin:"main/btn_2.png",selected:!0,scaleY:1.5,scaleX:1.5,anchorY:.5,anchorX:.5},compId:3},{type:"Image",props:{y:341,x:384,var:"title",skin:"main/changhong2.png",anchorY:.5,anchorX:.5},compId:6,child:[{type:"Sprite",props:{y:16.25,x:88.75,texture:"main/xitongzi.png"},compId:8}]},{type:"Box",props:{x:295,visible:!1,var:"closeText",bottom:268},compId:9,child:[{type:"Text",props:{var:"clickClose",text:"点击关闭",fontSize:40,color:"#ffffff",runtime:"laya.display.Text"},compId:10}]}],loadList:["main/btn_2.png","main/changhong2.png","main/xitongzi.png"],loadList3D:[]},e.OpenIconUI=G,v("ui.test.OpenIconUI",G);class j extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(j.uiView)}}j.uiView={type:"Dialog",props:{width:750,isShowEffect:!1,height:1334},compId:2,child:[{type:"Image",props:{y:109,x:34,width:682,skin:"main/fuhuodi2.jpg",sizeGrid:"113,70,76,69",height:1073},compId:3},{type:"Button",props:{y:123,x:617,width:80,var:"guanbi",stateNum:1,skin:"main/btn_guanbi.png",name:"close",height:80},compId:4},{type:"Sprite",props:{y:100,x:200,texture:"main/changhong2.png"},compId:5},{type:"Sprite",props:{y:100,x:264,texture:"paihang/paihangzi.png"},compId:6},{type:"Tab",props:{y:252,x:57,var:"tab",stateNum:2,space:30,skin:"main/btn_anniu.png",labels:","},compId:7},{type:"Image",props:{y:357,x:57,width:628,skin:"main/tishilan.png",sizeGrid:"16,14,22,14",height:765,alpha:.6},compId:11},{type:"List",props:{y:358,x:0,width:759,var:"list",height:732},compId:13,child:[{type:"paihang1",props:{y:0,x:0,renderType:"render",runtime:"ui.test.paihang1UI"},compId:14}]},{type:"WXOpenDataViewer",props:{y:358,x:60,width:627,var:"wxOpen",iconSign:"wx",height:763,runtime:"laya.ui.WXOpenDataViewer"},compId:15},{type:"Sprite",props:{y:262.5,x:116,texture:"paihang/haoyouzi.png"},compId:16},{type:"Sprite",props:{y:262.5,x:339,texture:"paihang/shijiezi.png"},compId:18},{type:"Text",props:{y:1133,x:525.5224609375,var:"myText",text:"我的名次:11",fontSize:30,color:"#ffffff",runtime:"laya.display.Text"},compId:19}],loadList:["main/fuhuodi2.jpg","main/btn_guanbi.png","main/changhong2.png","paihang/paihangzi.png","main/btn_anniu.png","main/tishilan.png","paihang/haoyouzi.png","paihang/shijiezi.png"],loadList3D:[]},e.paihangUI=j,v("ui.test.paihangUI",j);class O extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(O.uiView)}}O.uiView={type:"View",props:{width:750,height:92},compId:2,child:[{type:"Image",props:{y:3.5,x:68,var:"paiming",skin:"paihang/yiming.png"},compId:3},{type:"Image",props:{y:4.5,x:144,width:77,var:"touxiang",height:77},compId:4},{type:"Sprite",props:{y:90,x:71,width:600,texture:"paihang/xiaoxi.png"},compId:5},{type:"Text",props:{y:25,x:224,width:283,var:"mingzi",text:"玩家弓箭七个字",height:36,fontSize:36,color:"#ffffff",bold:!0,runtime:"laya.display.Text"},compId:6},{type:"FontClip",props:{y:22,x:487.5,width:364,var:"goldFc",value:"9999",spaceX:0,skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:%.ab",scaleY:.4,scaleX:.4,height:113,align:"right"},compId:7},{type:"Sprite",props:{y:22,x:632.5,texture:"paihang/fen.png"},compId:8},{type:"FontClip",props:{y:23,x:29.5,width:364,var:"fc1",value:"10",spaceX:0,skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:%.ab",scaleY:.4,scaleX:.4,height:113,align:"center"},compId:9}],loadList:["paihang/yiming.png","paihang/xiaoxi.png","main/clipshuzi.png","paihang/fen.png"],loadList3D:[]},e.paihang1UI=O,v("ui.test.paihang1UI",O);class F extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(F.uiView)}}F.uiView={type:"Scene",props:{width:750,height:1334},compId:2,child:[{type:"Sprite",props:{y:-154,x:-54,texture:"qiandao/tou.png"},compId:3},{type:"Image",props:{y:233,x:45,width:667,skin:"main/fuhuodi2.jpg",sizeGrid:"154,70,76,69",height:1036},compId:4},{type:"Image",props:{y:219,x:129,width:500,skin:"main/paihangbangdi.png",sizeGrid:"0,177,0,175",height:130},compId:5},{type:"Sprite",props:{y:220,x:312,texture:"qiandao/qiandaozi.png"},compId:11},{type:"Button",props:{y:233,x:621,width:91,var:"guanbi",stateNum:1,skin:"main/btn_guanbi.png",name:"close",height:91},compId:12},{type:"qiandao1",props:{y:355,x:62,runtime:"ui.test.qiandao1UI"},compId:14},{type:"qiandao1",props:{y:355,x:279,runtime:"ui.test.qiandao1UI"},compId:15},{type:"qiandao1",props:{y:355,x:496,runtime:"ui.test.qiandao1UI"},compId:16},{type:"qiandao1",props:{y:593,x:62,runtime:"ui.test.qiandao1UI"},compId:17},{type:"qiandao1",props:{y:593,x:279,runtime:"ui.test.qiandao1UI"},compId:18},{type:"qiandao1",props:{y:593,x:496,runtime:"ui.test.qiandao1UI"},compId:19},{type:"qiandao2",props:{y:834,x:49,runtime:"ui.test.qiandao2UI"},compId:20},{type:"Button",props:{y:1175,x:175,width:214,var:"LingBtn",stateNum:1,skin:"main/btn_huang.png",sizeGrid:"0,19,0,18",height:94,anchorY:.5,anchorX:.5},compId:21,child:[{type:"Sprite",props:{y:17,x:62,texture:"qiandao/qiandaoanniu.png"},compId:22}]},{type:"Button",props:{y:1175,x:496,width:396,var:"AdLingBtn",stateNum:1,skin:"main/btn_zi.png",sizeGrid:"0,31,0,36",height:94,anchorY:.5,anchorX:.5},compId:25,child:[{type:"Sprite",props:{y:4.5,x:81,texture:"main/action.png"},compId:27},{type:"Sprite",props:{y:16.5,x:144,texture:"main/shuangbei.png"},compId:29}]}],loadList:["qiandao/tou.png","main/fuhuodi2.jpg","main/paihangbangdi.png","qiandao/qiandaozi.png","main/btn_guanbi.png","main/btn_huang.png","qiandao/qiandaoanniu.png","main/btn_zi.png","main/action.png","main/shuangbei.png"],loadList3D:[]},e.qiandaoUI=F,v("ui.test.qiandaoUI",F);class W extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(W.uiView)}}W.uiView={type:"Scene",props:{width:202,height:209},compId:2,child:[{type:"Image",props:{y:0,x:0,width:202,skin:"qiandao/riliye.png",sizeGrid:"0,78,0,65",height:209},compId:3},{type:"Image",props:{y:0,x:0,width:202,visible:!0,var:"xuanzhong",skin:"qiandao/riliyeguang.png",sizeGrid:"0,78,0,65",height:209,alpha:0},compId:5},{type:"Sprite",props:{y:43,x:41.5,var:"tianshu",texture:"qiandao/yitian.png"},compId:6},{type:"Sprite",props:{y:86,x:72.5,var:"tupian",texture:"main/jinbi.png"},compId:8},{type:"Label",props:{y:144,x:50,width:102,var:"cengshuTxt",text:"×1234",height:36,fontSize:36,color:"#702915",align:"center"},compId:9}],loadList:["qiandao/riliye.png","qiandao/riliyeguang.png","qiandao/yitian.png","main/jinbi.png"],loadList3D:[]},e.qiandao1UI=W,v("ui.test.qiandao1UI",W);class q extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(q.uiView)}}q.uiView={type:"Scene",props:{width:657,height:243},compId:2,child:[{type:"Image",props:{y:0,x:0,width:657,skin:"qiandao/riliye.png",sizeGrid:"90,78,89,67",height:243},compId:4},{type:"Sprite",props:{y:50,x:35.5,texture:"qiandao/diqitian.png"},compId:5},{type:"Sprite",props:{y:110,x:470,texture:"qiandao/qitian.png"},compId:6}],loadList:["qiandao/riliye.png","qiandao/diqitian.png","qiandao/qitian.png"],loadList3D:[]},e.qiandao2UI=q,v("ui.test.qiandao2UI",q);class K extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(K.uiView)}}K.uiView={type:"View",props:{width:604,height:91},compId:2,child:[{type:"Image",props:{y:0,x:0,width:604,var:"bg",skin:"rank/paiminglv.png",sizeGrid:"21,40,18,38",height:91},compId:4},{type:"Image",props:{y:4,x:6,width:592,var:"di",skin:"rank/paimingBG.png",sizeGrid:"18,88,12,88",height:83},compId:3},{type:"FontClip",props:{y:21,x:391,width:125,var:"jifen",value:"11",skin:"rank/clip_shuzi.png",sheet:"1234 5678 90-+",height:51,align:"right"},compId:5},{type:"FontClip",props:{y:21,x:-11,width:125,var:"mingci",value:"11",skin:"rank/clip_shuzi.png",sheet:"1234 5678 90-+",height:51,align:"center"},compId:6},{type:"Image",props:{y:12.5,x:20,var:"title",skin:"rank/jinpai.png"},compId:7},{type:"Text",props:{y:27,x:184,width:211,var:"mingzi",text:"骑马合成冲",strokeColor:"#000000",stroke:2,height:39,fontSize:30,color:"#ffffff",runtime:"laya.display.Text"},compId:8},{type:"Image",props:{y:20.5,x:111,width:50,var:"img",height:50},compId:11}],loadList:["rank/paiminglv.png","rank/paimingBG.png","rank/clip_shuzi.png","rank/jinpai.png"],loadList3D:[]},e.RankCellUI=K,v("ui.test.RankCellUI",K);class Z extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(Z.uiView)}}Z.uiView={type:"Dialog",props:{width:750,isShowEffect:!1,isModal:!0,height:1200},compId:2,child:[{type:"Image",props:{y:0,x:34,width:682,skin:"main/fuhuodi2.jpg",sizeGrid:"102,70,76,69",height:1109},compId:17},{type:"Tab",props:{y:142,x:70,var:"tab",stateNum:2,selectedIndex:0,labels:","},compId:11},{type:"WXOpenDataViewer",props:{y:200,x:70,width:610,var:"wxopen",iconSign:"wx",height:800,runtime:"laya.ui.WXOpenDataViewer"},compId:9},{type:"Sprite",props:{y:148,x:84,texture:"rank/haoyou.png",mouseEnabled:!1},compId:12},{type:"Sprite",props:{y:147.5,x:193,texture:"rank/shijie.png",mouseEnabled:!1},compId:13},{type:"Image",props:{y:17,skin:"rank/paihangbangzi.png",centerX:0},compId:18},{type:"Button",props:{y:8,x:614,width:80,stateNum:1,skin:"timegold/btn_guanbi.png",name:"close",height:80},compId:19},{type:"Box",props:{y:200,x:71,width:641,var:"worldBox",height:930},compId:23,child:[{type:"Text",props:{y:848,x:364,width:249,var:"myText",text:"当前排名:未上榜",height:40,fontSize:30,color:"#ffffff",align:"right",runtime:"laya.display.Text"},compId:16},{type:"List",props:{y:0,x:0,width:613,height:818},compId:21,child:[{type:"RankCell",props:{y:0,x:0,renderType:"render",runtime:"ui.test.RankCellUI"},compId:22}]}]}],loadList:["main/fuhuodi2.jpg","rank/haoyou.png","rank/shijie.png","rank/paihangbangzi.png","timegold/btn_guanbi.png"],loadList3D:[]},e.RankDialogUI=Z,v("ui.test.RankDialogUI",Z);class J extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(J.uiView)}}J.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{width:750,height:1700,bgColor:"#000000",alpha:.75},compId:3},{type:"Box",props:{width:750,height:506,centerY:-2,centerX:3},compId:6,child:[{type:"BaseTipDialog",props:{y:53,x:75.5,var:"bgv",runtime:"ui.test.BaseTipDialogUI"},compId:43},{type:"Button",props:{y:460,x:374,width:240,visible:!1,var:"rebornBtn",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"0,27,0,28",scaleY:1,scaleX:1,height:100,anchorY:.5,anchorX:.5},compId:7,child:[{type:"Image",props:{y:29,x:89,skin:"main/queding.png"},compId:17}]},{type:"Label",props:{y:360,x:276,width:167,text:"剩余次数：",height:40,fontSize:36,color:"#ffffff",align:"center"},compId:13},{type:"Label",props:{y:360,x:443,width:45,var:"txt",text:"2",height:40,fontSize:36,color:"#ffffff",align:"left"},compId:14},{type:"Image",props:{y:68,x:331,skin:"main/biaotifuhuo.png"},compId:15},{type:"Label",props:{y:221,x:353,width:45,var:"daojishi",height:64,fontSize:60,color:"#ffffff",align:"center"},compId:40}]},{type:"Button",props:{y:870,x:375,width:358,var:"fuhuo",stateNum:1,skin:"main/btn_zi.png",sizeGrid:"0,27,0,28",scaleY:1,scaleX:1,height:100,anchorY:.5,anchorX:.5},compId:36,child:[{type:"Sprite",props:{y:4,x:90,texture:"main/action.png"},compId:37},{type:"Label",props:{y:30,x:150,width:122,var:"deshuliang",text:"免费复活",height:40,fontSize:28,color:"#ffffff",align:"left"},compId:38}]},{type:"Image",props:{y:586,x:296,var:"jindu",skin:"main/quantiao.png"},compId:41},{type:"Box",props:{y:667,x:375,var:"centerBox"},compId:42}],loadList:["main/btn_lv.png","main/queding.png","main/biaotifuhuo.png","main/btn_zi.png","main/action.png","main/quantiao.png"],loadList3D:[]},e.ReborthUI=J,v("ui.test.ReborthUI",J);class Q extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(Q.uiView)}}Q.uiView={type:"View",props:{width:50,height:100},compId:2,child:[{type:"Image",props:{y:59,x:25,skin:"main/hongdian.png",anchorY:.5,anchorX:.5},compId:3}],animations:[{nodes:[{target:3,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:19},{value:1.2,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:24},{value:.9,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:28},{value:1.1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:32},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:35}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,label:null,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:19},{value:1.2,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:24},{value:.9,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:28},{value:1.1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:32},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:35}]}}],name:"ani1",id:1,frameRate:24,action:0}],loadList:["main/hongdian.png"],loadList3D:[]},e.RedPointViewUI=Q,v("ui.test.RedPointViewUI",Q);class $ extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView($.uiView)}}$.uiView={type:"View",props:{y:45,x:100,width:200,height:90,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Sprite",props:{y:16,x:16,texture:"main/tili.png",scaleY:2,scaleX:2},compId:3},{type:"FontClip",props:{y:20,x:85,var:"fc",value:"-20",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.4,scaleX:.4},compId:4}],loadList:["main/tili.png","main/clipshuzi.png"],loadList3D:[]},e.ReducePowerUI=$,v("ui.test.ReducePowerUI",$);class ee extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(ee.uiView)}}ee.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{var:"sp",skin:"bg/rockerBg.png",anchorY:.5,anchorX:.5},compId:3},{type:"Box",props:{width:304,var:"dir",height:304,anchorY:.5,anchorX:.5},compId:7,child:[{type:"Sprite",props:{y:26,x:26.5,texture:"bg/rollDir.png"},compId:5}]},{type:"Image",props:{var:"sp0",skin:"bg/rockerBall.png",rotation:0,anchorY:.5,anchorX:.5},compId:4}],loadList:["bg/rockerBg.png","bg/rollDir.png","bg/rockerBall.png"],loadList3D:[]},e.RockerViewUI=ee,v("ui.test.RockerViewUI",ee);class te extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(te.uiView)}}te.uiView={type:"View",props:{width:0,height:0},compId:2,child:[{type:"Image",props:{y:0,x:0,var:"bg",skin:"bg/501.png",sizeGrid:"0,64,0,64"},compId:3}],loadList:["bg/501.png"],loadList3D:[]},e.SawHengUI=te,v("ui.test.SawHengUI",te);class ie extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(ie.uiView)}}ie.uiView={type:"View",props:{width:0,height:0},compId:2,child:[{type:"Image",props:{var:"bg",skin:"bg/502.png",sizeGrid:"64,0,64,0"},compId:3}],loadList:["bg/502.png"],loadList3D:[]},e.SawZongUI=ie,v("ui.test.SawZongUI",ie);class ae extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(ae.uiView)}}ae.uiView={type:"Scene",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{x:0,centerY:0},compId:20,child:[{type:"Image",props:{y:0,x:0,skin:"main/jiandi.jpg"},compId:3}]},{type:"Box",props:{x:18.5,centerY:0},compId:21,child:[{type:"Image",props:{x:.5,width:714,skin:"main/biaotilan.png",sizeGrid:"0,38,0,134",height:99},compId:4},{type:"Label",props:{y:24,x:210.5,var:"biaoti2",text:"1.我也草原",fontSize:60,color:"#000000",alpha:.5,align:"center"},compId:5,child:[{type:"Script",props:{y:1,x:0,strength:2,runtime:"laya.effect.BlurFilterSetter"},compId:7}]},{type:"Label",props:{y:19,x:212.5,var:"biaoti",text:"1.我也草原",fontSize:60,color:"#ffffff",align:"center"},compId:6},{type:"Label",props:{y:686,x:171.5,var:"changdu2",text:"章节长度：50",fontSize:60,color:"#000000",alpha:.5,align:"center"},compId:8,child:[{type:"Script",props:{y:1,x:0,strength:2,runtime:"laya.effect.BlurFilterSetter"},compId:10}]},{type:"Label",props:{y:682,x:172.5,var:"changdu",text:"章节长度：50",fontSize:60,color:"#ffffff",align:"center"},compId:9},{type:"Label",props:{y:781,x:37.5,width:630,var:"miaoshu2",text:"一片肥沃的草原，是打猎的好地方",height:34,fontSize:34,color:"#000000",alpha:.5,align:"center"},compId:11,child:[{type:"Script",props:{y:1,x:0,strength:2,runtime:"laya.effect.BlurFilterSetter"},compId:13}]},{type:"Label",props:{y:776,x:37.5,width:630,var:"miaoshu",text:"一片肥沃的草原，是打猎的好地方",fontSize:34,color:"#ffffff",align:"center"},compId:12},{type:"Button",props:{y:958,x:354.5,width:301,var:"btn_jinru",stateNum:1,skin:"main/btn_huang.png",sizeGrid:"0,16,0,18",height:157,anchorY:.5,anchorX:.5},compId:14,child:[{type:"Label",props:{y:42,x:90,text:"进入",fontSize:60,color:"#000000",alpha:.5,align:"center"},compId:15,child:[{type:"Script",props:{y:0,x:0,strength:2,runtime:"laya.effect.BlurFilterSetter"},compId:17}]},{type:"Label",props:{y:38,x:93,text:"进入",strokeColor:"#000000",stroke:3,fontSize:60,color:"#ffffff",align:"center"},compId:16}]},{type:"Button",props:{y:1155,x:41.5,var:"fanhui",stateNum:1,skin:"main/btn_lan.png",anchorY:.5,anchorX:.5},compId:18,child:[{type:"Image",props:{y:17,x:19,skin:"main/toujian.png"},compId:19}]},{type:"xiaodao",props:{y:151,x:14,runtime:"ui.test.xiaodaoUI"},compId:22},{type:"Label",props:{y:944,x:245,var:"tiaojian2",text:"通过第1章解锁",height:34,fontSize:34,color:"#000000",alpha:.5,align:"center"},compId:23,child:[{type:"Script",props:{y:1,x:0,strength:2,runtime:"laya.effect.BlurFilterSetter"},compId:25}]},{type:"Label",props:{y:938,x:245.06494140625,var:"tiaojian",text:"通过第1章解锁",fontSize:34,color:"#ffffff",align:"center"},compId:24}]}],loadList:["main/jiandi.jpg","main/biaotilan.png","main/btn_huang.png","main/btn_lan.png","main/toujian.png"],loadList3D:[]},e.selectmissionUI=ae,v("ui.test.selectmissionUI",ae);class se extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(se.uiView)}}se.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"viewbg",props:{runtime:"ui.game.viewbgUI"},compId:28},{type:"Box",props:{width:750,height:1334,centerY:0},compId:27},{type:"Box",props:{y:273,x:99.5,width:551,var:"box1",height:708},compId:43,child:[{type:"Label",props:{y:-75,x:-99.5,width:750,var:"id",text:"ID:1234",height:45,fontSize:40,color:"#ffffff",align:"center"},compId:29},{type:"Label",props:{y:-12,x:-99.5,width:750,var:"ver",text:"VER:4.0.2",height:45,fontSize:40,color:"#ffffff",align:"center"},compId:31},{type:"Sprite",props:{y:58,x:216,texture:"shezhi/yuyan.png"},compId:32},{type:"Button",props:{y:162,x:275.5,width:540,var:"yuyan",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"0,31,0,33",height:91,anchorY:.5,anchorX:.5},compId:33,child:[{type:"Sprite",props:{y:18,x:179,texture:"shezhi/jianti.png"},compId:38}]},{type:"Button",props:{y:343,x:275,width:540,var:"yinxiao",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"0,31,0,33",height:91,anchorY:.5,anchorX:.5},compId:36,child:[{type:"Image",props:{y:19,x:241,var:"soundImg",skin:"shezhi/kai.png"},compId:39}]},{type:"Button",props:{y:477,x:5,width:540,var:"yinyue",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"0,31,0,33",height:91},compId:37,child:[{type:"Image",props:{y:21,x:240,var:"musicImg",skin:"shezhi/kai.png"},compId:40}]},{type:"Sprite",props:{y:239,x:216,texture:"shezhi/yinxiao.png"},compId:41},{type:"Sprite",props:{y:420,x:216,texture:"shezhi/yinyue.png"},compId:42},{type:"Button",props:{y:611,x:5.5,width:540,var:"zuobi",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"0,31,0,33",label:"作弊",height:91},compId:44}]}],loadList:["shezhi/yuyan.png","main/btn_lv.png","shezhi/jianti.png","shezhi/kai.png","shezhi/yinxiao.png","shezhi/yinyue.png"],loadList3D:[]},e.settingUI=se,v("ui.test.settingUI",se);class ne extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(ne.uiView)}}ne.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"viewbg",props:{scaleY:1.5,runtime:"ui.game.viewbgUI"},compId:24},{type:"Light",props:{y:371,x:375,width:742,var:"lightView",height:742,blendMode:"lighter",anchorY:.5,anchorX:.5,runtime:"ui.test.LightUI"},compId:3},{type:"Box",props:{y:341,x:373,var:"dunpaiBox",anchorY:.5,anchorX:.5},compId:54,child:[{type:"Image",props:{skin:"main/dunpai.png"},compId:4},{type:"FontClip",props:{y:62,x:32,width:159,var:"lvClip",value:"12",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.6,scaleX:.6,height:121,align:"center"},compId:5}]},{type:"Box",props:{y:536,x:372,var:"lvBox",anchorY:.5,anchorX:.5},compId:55,child:[{type:"Image",props:{width:520,skin:"main/yuanhei.png",sizeGrid:"0,28,0,30",height:64},compId:7},{type:"Label",props:{y:5,x:21,width:477,text:"等级达到     级",height:52,fontSize:48,color:"#ffffff",align:"center"},compId:6},{type:"Label",props:{y:6,x:298,width:63,var:"lvLabel",text:"10",height:52,fontSize:48,color:"#ffffff",align:"center"},compId:23}]},{type:"Box",props:{y:671,x:371,var:"lingqu",anchorY:.5,anchorX:.5},compId:56,child:[{type:"Image",props:{x:-.5,width:441,skin:"main/biaotihuang.png",sizeGrid:"0,38,0,36",height:99},compId:8},{type:"Sprite",props:{y:24,x:167.5,texture:"main/jainglizi.png"},compId:10}]},{type:"Button",props:{y:1130,x:375,width:358,var:"rebornBtn",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"0,27,0,28",name:"close",height:100,anchorY:.5,anchorX:.5},compId:20,child:[{type:"Label",props:{y:24,x:66,width:222,var:"deshuliang",text:"确定",height:40,fontSize:36,color:"#ffffff",align:"center"},compId:21}]},{type:"Box",props:{y:800,x:375,width:256,var:"lanBox",height:78,anchorY:.5,anchorX:.5},compId:39,child:[{type:"Sprite",props:{y:3,x:0,texture:"juese/jiangbeihei.png",scaleY:.3,scaleX:.3},compId:42},{type:"Sprite",props:{texture:"juese/jiangbei.png",scaleY:.3,scaleX:.3},compId:43},{type:"FontClip",props:{y:24,x:120,width:500,var:"lanzuan",value:"+120",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.4,scaleX:.4,height:120,align:"left"},compId:44}]},{type:"Box",props:{y:900,x:375,width:256,var:"ziBox",height:78,anchorY:.5,anchorX:.5},compId:40,child:[{type:"Sprite",props:{y:3,texture:"juese/jiangbeihei.png",scaleY:.3,scaleX:.3},compId:45},{type:"Sprite",props:{x:0,texture:"juese/jiangbei1.png",scaleY:.3,scaleX:.3},compId:46},{type:"FontClip",props:{y:24,x:120,width:500,var:"hongzuan",value:"+120",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.4,scaleX:.4,height:120,align:"left"},compId:47}]},{type:"Box",props:{y:1e3,x:375,width:256,var:"coinBox",height:78,anchorY:.5,anchorX:.5},compId:50,child:[{type:"Sprite",props:{y:-6,x:0,texture:"juese/jiangbi.png",scaleY:.35,scaleX:.35},compId:51},{type:"FontClip",props:{y:24,x:120,width:500,var:"coinClip",value:"+120",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.4,scaleX:.4,height:120,align:"left"},compId:52},{type:"FontClip",props:{y:24,x:310,width:500,var:"deltaCoin",value:"+120",skin:"main/greenFont.png",sheet:"123456 7890-+ /:cdef",scaleY:.4,scaleX:.4,height:120,align:"left"},compId:53}]}],loadList:["main/dunpai.png","main/clipshuzi.png","main/yuanhei.png","main/biaotihuang.png","main/jainglizi.png","main/btn_lv.png","juese/jiangbeihei.png","juese/jiangbei.png","juese/jiangbei1.png","juese/jiangbi.png","main/greenFont.png"],loadList3D:[]},e.shengjiUI=ne,v("ui.test.shengjiUI",ne);class oe extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(oe.uiView)}}oe.uiView={type:"View",props:{width:100,height:100},compId:2,child:[{type:"SkeletonPlayer",props:{y:50,x:50,var:"sk1",url:"juese/levelUp.sk",runtime:"laya.ani.bone.Skeleton"},compId:4}],loadList:["juese/levelUp.sk"],loadList3D:[]},e.shengjiEFFUI=oe,v("ui.test.shengjiEFFUI",oe);class he extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(he.uiView)}}he.uiView={type:"View",props:{width:287,height:446},compId:2,child:[{type:"Image",props:{y:0,x:0,width:287,skin:"bg/kapai.png",sizeGrid:"23,23,24,27",height:446},compId:3},{type:"Label",props:{y:15,x:64,width:160,var:"txt",text:"汉字",height:30,fontSize:30,color:"#ffffff",align:"center"},compId:4},{type:"Box",props:{y:60,x:52,width:183,var:"imgBox",height:183},compId:6,child:[{type:"Image",props:{y:91,x:91,var:"img",skin:"main/kawen.png",anchorY:.5,anchorX:.5},compId:11}]},{type:"Label",props:{y:259,x:24,wordWrap:!0,width:240,var:"shuoming",text:"汉字",height:162,fontSize:30,color:"#ffffff",align:"left"},compId:9}],loadList:["bg/kapai.png","main/kawen.png"],loadList3D:[]},e.SkillGridUI=he,v("ui.test.SkillGridUI",he);class re extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(re.uiView)}}re.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Sprite",props:{y:-95,x:0,texture:"main/tiaoaa.jpg"},compId:3},{type:"Sprite",props:{y:1334,x:0,texture:"main/tiaoaa.jpg"},compId:4},{type:"Sprite",props:{y:-351,x:0,width:750,texture:"main/5122.jpg",height:256},compId:5},{type:"Sprite",props:{y:1429,x:0,width:750,texture:"main/5122.jpg",height:256},compId:6}],loadList:["main/tiaoaa.jpg","main/5122.jpg"],loadList3D:[]},e.StageBgUI=re,v("ui.test.StageBgUI",re);class le extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(le.uiView)}}le.uiView={type:"View",props:{width:750,height:1334,centerY:0},compId:2,child:[{type:"viewbg",props:{runtime:"ui.game.viewbgUI"},compId:29},{type:"Image",props:{y:141,width:698,var:"tianfudi",skin:"tianfu/tiandi.png",sizeGrid:"89,0,115,0",height:1065,centerX:0},compId:31,child:[{type:"Button",props:{y:923,x:360,width:250,var:"shengmingniu",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"41,31,38,33",height:91,anchorY:.5,anchorX:.5},compId:114,child:[{type:"FontClip",props:{y:24,x:44,width:386,var:"qianshu",value:"1299",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.3,scaleX:.3,height:115,align:"right"},compId:116},{type:"Image",props:{y:24,x:158,skin:"main/dongjin.png"},compId:117}]},{type:"List",props:{y:77,x:69,width:588,var:"list",spaceY:35,spaceX:25,repeatY:3,repeatX:3,height:755},compId:115,child:[{type:"TianFuCell",props:{y:0,x:0,renderType:"render",runtime:"ui.test.TianFuCellUI"},compId:118}]},{type:"Box",props:{zOrder:100,y:276,x:5,visible:!1,var:"tipBox"},compId:123,child:[{type:"Sprite",props:{y:53,texture:"tianfu/qipao.png"},compId:124},{type:"Sprite",props:{x:101,texture:"tianfu/qipaojian.png"},compId:125},{type:"Text",props:{y:86,x:9,width:287,var:"txt5",valign:"middle",text:"这里是天赋信息",height:90,fontSize:30,align:"center",runtime:"laya.display.Text"},compId:126}]},{type:"Text",props:{y:814.5,x:205,width:310,var:"lvTime",text:"已升级0次",height:35,fontSize:28,color:"#482910",align:"center",runtime:"laya.display.Text"},compId:129}]}],loadList:["tianfu/tiandi.png","main/btn_lv.png","main/clipshuzi.png","main/dongjin.png","tianfu/qipao.png","tianfu/qipaojian.png"],loadList3D:[]},e.talentUI=le,v("ui.test.talentUI",le);class pe extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(pe.uiView)}}pe.uiView={type:"View",props:{width:660,height:179},compId:2,child:[{type:"Box",props:{y:0,x:0},compId:9,child:[{type:"Box",props:{y:0,x:0,var:"b1"},compId:27,child:[{type:"Box",props:{y:27,x:212,width:66,var:"xian1",height:127},compId:19,child:[{type:"Image",props:{x:59,width:7,skin:"tianfu/lvtiao.png",height:126},compId:23},{type:"Image",props:{x:59,width:7,skin:"tianfu/lvtiao.png",rotation:90,height:59},compId:24},{type:"Image",props:{y:119,x:59,width:7,skin:"tianfu/lvtiao.png",rotation:90,height:59},compId:25}]},{type:"talent_1",props:{var:"t1",runtime:"ui.test.talent_1UI"},compId:6}]},{type:"Box",props:{y:27,x:443,var:"b2"},compId:26,child:[{type:"Box",props:{y:0,x:0,width:66,scaleX:-1,height:127},compId:18,child:[{type:"Image",props:{x:59,width:7,skin:"tianfu/lvtiao.png",height:126},compId:20},{type:"Image",props:{x:59,width:7,skin:"tianfu/lvtiao.png",rotation:90,height:59},compId:21},{type:"Image",props:{y:119,x:59,width:7,skin:"tianfu/lvtiao.png",rotation:90,height:59},compId:22}]},{type:"talent_1",props:{y:-27,x:-18,var:"t2",runtime:"ui.test.talent_1UI"},compId:7}]},{type:"Box",props:{y:49.75,x:233},compId:8,child:[{type:"Image",props:{y:-.5,skin:"tianfu/biaoti.png"},compId:3},{type:"FontClip",props:{y:28.5,x:108,width:253,var:"dengji0",value:"10",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.3,scaleX:.3,height:115,align:"left"},compId:4},{type:"Image",props:{y:24.5,x:41,skin:"main/dengji.png",scaleY:.7,scaleX:.7},compId:5}]}]}],loadList:["tianfu/lvtiao.png","tianfu/biaoti.png","main/clipshuzi.png","main/dengji.png"],loadList3D:[]},e.TalentCellUI=pe,v("ui.test.TalentCellUI",pe);class de extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(de.uiView)}}de.uiView={type:"Dialog",props:{width:750,isModal:!0,height:1200},compId:2,child:[{type:"viewbg",props:{centerY:0,centerX:0,runtime:"ui.game.viewbgUI"},compId:22},{type:"Text",props:{y:857,x:241,var:"l1",text:"请选择您的天赋",fontSize:40,color:"#ffffff",runtime:"laya.display.Text"},compId:9},{type:"TalentZhuan",props:{y:476,x:164,var:"b0",anchorY:.5,anchorX:.5,runtime:"ui.test.TalentZhuanUI"},compId:10},{type:"TalentZhuan",props:{y:476,x:380,var:"b1",anchorY:.5,anchorX:.5,runtime:"ui.test.TalentZhuanUI"},compId:16},{type:"TalentZhuan",props:{y:476,x:595,var:"b2",anchorY:.5,anchorX:.5,runtime:"ui.test.TalentZhuanUI"},compId:17},{type:"TalentZhuan",props:{y:715,x:165,var:"b3",anchorY:.5,anchorX:.5,runtime:"ui.test.TalentZhuanUI"},compId:18},{type:"TalentZhuan",props:{y:715,x:380,var:"b4",anchorY:.5,anchorX:.5,runtime:"ui.test.TalentZhuanUI"},compId:19},{type:"TalentZhuan",props:{y:715,x:595,var:"b5",anchorY:.5,anchorX:.5,runtime:"ui.test.TalentZhuanUI"},compId:20},{type:"Box",props:{width:252,var:"box1",height:166,centerY:0,centerX:0,anchorY:.5,anchorX:.5},compId:24,child:[{type:"Image",props:{y:57,x:-95,width:449,skin:"main/yuanhei.png",sizeGrid:"0,28,0,30",height:64},compId:37},{type:"Text",props:{y:9,x:48.5,width:155,var:"l11",text:"攻击力",height:46,fontSize:30,color:"#ffffff",align:"center",runtime:"laya.display.Text"},compId:27},{type:"FontClip",props:{y:75,x:-131,width:697,var:"f1",value:"+11.1%",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:%.ab",scaleY:.3,scaleX:.3,height:113,align:"right"},compId:34},{type:"FontClip",props:{y:75,x:181,width:700,var:"f2",value:"+11.1%",skin:"main/greenFont.png",sheet:"123456 7890-+ /:%.ab",scaleY:.3,scaleX:.3,height:113,align:"left"},compId:35},{type:"Sprite",props:{y:75,x:104.5,texture:"main/jiantou.png",scaleY:.6,scaleX:.6},compId:36}]},{type:"Image",props:{y:-8,var:"nameImg",skin:"tianfu/gongzi.png",centerX:0},compId:25},{type:"Box",props:{x:301,bottom:50},compId:26,child:[{type:"Text",props:{var:"clickClose",text:"点击关闭",fontSize:40,color:"#ffffff",runtime:"laya.display.Text"},compId:23}]}],loadList:["main/yuanhei.png","main/clipshuzi.png","main/greenFont.png","main/jiantou.png","tianfu/gongzi.png"],loadList3D:[]},e.TalentViewUI=de,v("ui.test.TalentViewUI",de);class ce extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(ce.uiView)}}ce.uiView={type:"View",props:{width:175,height:212},compId:2,child:[{type:"TianFuCell",props:{y:0,x:175,var:"back",scaleX:-1,runtime:"ui.test.TianFuCellUI"},compId:3},{type:"TianFuCell",props:{y:0,x:0,var:"wenhao",runtime:"ui.test.TianFuCellUI"},compId:4}],loadList:[],loadList3D:[]},e.TalentZhuanUI=ce,v("ui.test.TalentZhuanUI",ce);class ge extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(ge.uiView)}}ge.uiView={type:"View",props:{width:231,height:179},compId:2,child:[{type:"Image",props:{y:19,x:18,skin:"tianfu/pan.png"},compId:27},{type:"Image",props:{y:22,x:23,width:186,var:"wenHao",skin:"tianfu/dang.jpg",height:132},compId:9},{type:"Box",props:{y:2,x:21,width:200,visible:!1,var:"infoBox",height:164},compId:26,child:[{type:"Sprite",props:{y:23.5,x:6,var:"icon",texture:"tianfu/icon1.jpg"},compId:4},{type:"Image",props:{y:120.5,x:5,width:184,var:"tiao2",skin:"juese/juese_tiaoshang.png",height:31},compId:5},{type:"Label",props:{y:57.5,x:103,width:89,var:"jinengming",text:"技能名",strokeColor:"#351d03",stroke:3,height:33,fontSize:26,color:"#f3e9e9",align:"left"},compId:6},{type:"FontClip",props:{y:125.5,x:9,width:881,var:"qianshu2",value:"1299/1300",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:cdef",scaleY:.2,scaleX:.2,height:115,align:"center"},compId:7},{type:"Image",props:{y:24.5,x:182,var:"sheng",skin:"main/juese_sheng.png",anchorY:.5,anchorX:.5},compId:8}]},{type:"Image",props:{y:-1,x:0,width:231,visible:!1,var:"select",skin:"tianfu/xuanzhong1.png",sizeGrid:"57,40,49,42",height:179},compId:28}],loadList:["tianfu/pan.png","tianfu/dang.jpg","tianfu/icon1.jpg","juese/juese_tiaoshang.png","main/clipshuzi.png","main/juese_sheng.png","tianfu/xuanzhong1.png"],loadList3D:[]},e.talent_1UI=ge,v("ui.test.talent_1UI",ge);class ue extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(ue.uiView)}}ue.uiView={type:"View",props:{width:300,height:300},compId:2,child:[{type:"Box",props:{y:81,x:74,width:93,var:"box",pivotY:47,pivotX:47,height:93},compId:5,child:[{type:"Sprite",props:{y:48,x:45,width:90,var:"s2",texture:"main/baoshi2.png",pivotY:48,pivotX:45,height:96},compId:3},{type:"Sprite",props:{y:48,x:45,width:90,var:"s1",texture:"main/baoshi2.png",pivotY:48,pivotX:45,height:96},compId:4}]}],animations:[{nodes:[{target:5,keyframes:{y:[{value:81,tweenMethod:"backIn",tween:!0,target:5,key:"y",index:0},{value:239,tweenMethod:"linearNone",tween:!1,target:5,key:"y",index:40}],x:[{value:74,tweenMethod:"backIn",tween:!0,target:5,key:"x",index:0},{value:236,tweenMethod:"backIn",tween:!0,target:5,key:"x",index:40}]}}],name:"ani1",id:1,frameRate:24,action:0}],loadList:["main/baoshi2.png"],loadList3D:[]},e.TestViewUI=ue,v("ui.test.TestViewUI",ue);class me extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(me.uiView)}}me.uiView={type:"View",props:{width:175,height:212},compId:2,child:[{type:"Image",props:{y:13,x:12,var:"bg1",skin:"tianfu/PTkuang.png"},compId:3},{type:"Sprite",props:{y:28.5,x:29,var:"box2",texture:"tianfu/touwen.png"},compId:10},{type:"Image",props:{y:0,x:0,width:175,var:"select",skin:"tianfu/xuanzhong1.png",sizeGrid:"50,50,38,47",height:212,blendMode:"lighter"},compId:13},{type:"Box",props:{y:28.5,x:29,width:117,var:"box1",height:161},compId:14,child:[{type:"Image",props:{var:"logo1",skin:"tianfu/gongji.png"},compId:9},{type:"Image",props:{y:123,var:"txtImg",skin:"tianfu/gongzi.png",centerX:0},compId:11},{type:"Box",props:{y:-39.5,x:-38,var:"lvBox"},compId:21,child:[{type:"Sprite",props:{y:.5,width:54,texture:"tianfu/quan.png",height:55},compId:20},{type:"FontClip",props:{y:14.5,x:5,width:180,var:"lv",value:"99",spaceX:-3,skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:vbnd",scaleY:.25,scaleX:.25,height:113,align:"center"},compId:12}]}]}],loadList:["tianfu/PTkuang.png","tianfu/touwen.png","tianfu/xuanzhong1.png","tianfu/gongji.png","tianfu/gongzi.png","tianfu/quan.png","main/clipshuzi.png"],loadList3D:[]},e.TianFuCellUI=me,v("ui.test.TianFuCellUI",me);class ye extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(ye.uiView)}}ye.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:133.45000000000002,x:0,skin:"bg/tianshiying.png",scaleY:1.09,scaleX:1.09,anchorY:.5,anchorX:.5},compId:6},{type:"Box",props:{y:0,x:0},compId:7,child:[{type:"Image",props:{y:-68,x:-77,skin:"bg/qipaowen.png",rotation:-12.15,anchorY:.4,anchorX:1},compId:4},{type:"Image",props:{y:-68,x:100,skin:"bg/qipaowen.png",scaleX:-1,rotation:12.15,anchorY:.4,anchorX:1},compId:5},{type:"Image",props:{y:-75,x:-12,skin:"bg/tianshi.png",scaleY:1.3,scaleX:1.3,anchorY:.5,anchorX:.5},compId:3},{type:"Image",props:{y:-228,x:-115,var:"tan",skin:"bg/tantan.jpg",scaleY:1.1,scaleX:1.1},compId:8}]}],animations:[{nodes:[{target:7,keyframes:{y:[{value:-133.45000000000002,tweenMethod:"linearNone",tween:!0,target:7,key:"y",index:0},{value:-176,tweenMethod:"linearNone",tween:!0,target:7,key:"y",index:20},{value:-133.45000000000002,tweenMethod:"linearNone",tween:!0,target:7,label:null,key:"y",index:40}],x:[{value:-8,tweenMethod:"linearNone",tween:!0,target:7,key:"x",index:0}]}},{target:6,keyframes:{y:[{value:0,tweenMethod:"linearNone",tween:!0,target:6,key:"y",index:0}],x:[{value:2,tweenMethod:"linearNone",tween:!0,target:6,key:"x",index:0}],scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:6,key:"scaleY",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:6,key:"scaleY",index:20},{value:1,tweenMethod:"linearNone",tween:!0,target:6,key:"scaleY",index:40}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:6,key:"scaleX",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:6,key:"scaleX",index:20},{value:1,tweenMethod:"linearNone",tween:!0,target:6,key:"scaleX",index:40}]}},{target:4,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"rotation",index:0},{value:-27,tweenMethod:"linearNone",tween:!0,target:4,key:"rotation",index:20},{value:0,tweenMethod:"linearNone",tween:!0,target:4,label:null,key:"rotation",index:40}]}},{target:5,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:0},{value:27,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:20},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:40}]}}],name:"ani1",id:1,frameRate:24,action:2}],loadList:["bg/tianshiying.png","bg/qipaowen.png","bg/tianshi.png","bg/tantan.jpg"],loadList3D:[]},e.tianshiUI=ye,v("ui.test.tianshiUI",ye);class we extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(we.uiView)}}we.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{x:0,width:750,height:1700,bgColor:"#000000",alpha:.7},compId:23},{type:"Box",props:{width:681,var:"box",height:900,centerY:0,centerX:0},compId:22,child:[{type:"Image",props:{width:681,skin:"main/biaotilan.png",sizeGrid:"0,23,0,125",height:99},compId:4},{type:"Box",props:{y:254,x:164,width:287,var:"box1",height:446,anchorX:.5},compId:25},{type:"Box",props:{y:254,x:496,width:287,var:"box2",height:446,anchorX:.5},compId:26},{type:"Sprite",props:{y:28.5,x:142,texture:"main/qing.png"},compId:27},{type:"Button",props:{y:887,x:330,width:303,var:"queding",stateNum:1,skin:"main/btn_lv.png",sizeGrid:"0,32,0,34",height:91,anchorY:.5,anchorX:.5},compId:30,child:[{type:"Image",props:{y:20.5,x:89,skin:"main/action.png",scaleY:.6,scaleX:.6},compId:31},{type:"Image",props:{y:22,x:131,skin:"main/shuaxin.png",scaleY:.6,scaleX:.6},compId:33}]}]}],loadList:["main/biaotilan.png","main/qing.png","main/btn_lv.png","main/action.png","main/shuaxin.png"],loadList3D:[]},e.tianshi_1UI=we,v("ui.test.tianshi_1UI",we);class xe extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(xe.uiView)}}xe.uiView={type:"Dialog",props:{width:750,isModal:!0,height:1100},compId:2,child:[{type:"Light",props:{y:481.5,x:356,var:"light",scaleY:2,scaleX:2,anchorY:.5,anchorX:.5,runtime:"ui.test.LightUI"},compId:30},{type:"Image",props:{y:37,x:34,width:682,skin:"main/fuhuodi2.jpg",sizeGrid:"128,70,76,66",height:931},compId:3},{type:"Image",props:{y:223,x:163,skin:"timegold/jiangbi.png",scaleY:.8,scaleX:.8},compId:7},{type:"Image",props:{y:459,x:55,width:642,skin:"main/tishilan.png",sizeGrid:"28,18,26,20",height:406,alpha:.3},compId:9},{type:"FontClip",props:{y:326,x:364,width:494,var:"goldFc",value:"1000",spaceX:0,skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:%.ab",scaleY:.4,scaleX:.4,height:113,align:"center"},compId:10},{type:"Button",props:{y:583,x:378,width:434,var:"LingBtn",stateNum:1,skin:"main/btn_huang.png",sizeGrid:"0,19,0,18",height:94,anchorY:.5,anchorX:.5},compId:11,child:[{type:"Sprite",props:{y:17,x:62,texture:"timegold/shenglilingqu.png"},compId:13},{type:"FontClip",props:{y:17,x:155,width:343,var:"btn1Fc",value:"9999",skin:"main/clipshuzi.png",sheet:"123456 7890ab cdef",scaleY:.4,scaleX:.4,height:113,align:"center"},compId:14},{type:"Sprite",props:{y:13,x:298.5,texture:"main/jinbi.png"},compId:31}]},{type:"Button",props:{y:732,x:380,width:439,var:"AdLingBtn",stateNum:1,skin:"main/btn_zi.png",sizeGrid:"0,31,0,36",height:94,anchorY:.5,anchorX:.5},compId:15,child:[{type:"FontClip",props:{y:18,x:153,width:352,var:"btn2Fc",value:"9999",spaceX:-4,skin:"main/clipshuzi.png",sheet:"123456 7890ab cdefg",scaleY:.4,scaleX:.4,height:113,align:"center"},compId:17},{type:"Sprite",props:{y:4.5,x:79,texture:"main/action.png"},compId:32},{type:"Sprite",props:{y:14,x:299.5,texture:"main/jinbi.png"},compId:33}]},{type:"Button",props:{y:45.5,x:617,width:80,var:"guanbi",stateNum:1,skin:"main/btn_guanbi.png",name:"close",height:80},compId:21},{type:"Text",props:{y:205,x:300,text:"您赚取了",fontSize:36,color:"#ffffff",bold:!0,runtime:"laya.display.Text"},compId:22},{type:"Image",props:{y:68,x:248,skin:"timegold/biaoti_jinbi.png"},compId:29},{type:"chengsan",props:{y:619,x:497,var:"v3bei",runtime:"ui.test.chengsanUI"},compId:34}],loadList:["main/fuhuodi2.jpg","timegold/jiangbi.png","main/tishilan.png","main/clipshuzi.png","main/btn_huang.png","timegold/shenglilingqu.png","main/jinbi.png","main/btn_zi.png","main/action.png","main/btn_guanbi.png","timegold/biaoti_jinbi.png"],loadList3D:[]},e.TimeGoldUI=xe,v("ui.test.TimeGoldUI",xe);class fe extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(fe.uiView)}}fe.uiView={type:"View",props:{width:140,height:161},compId:2,child:[{type:"Button",props:{y:0,x:-1,width:140,var:"goldBtn",stateNum:1,skin:"main/guanjikuang.png",sizeGrid:"24,20,27,22",height:161},compId:3,child:[{type:"FontClip",props:{y:121,x:9,width:621,var:"goldFc",value:"10000",spaceX:-4,skin:"main/clipshuzi.png",sheet:"123456 7890ab cdefg",scaleY:.2,scaleX:.2,height:113,align:"center"},compId:6},{type:"Box",props:{width:119,var:"shanbox",top:0,right:0,left:0,height:161,bottom:0,anchorY:.5,anchorX:.5},compId:12},{type:"Image",props:{y:48.5,skin:"main/heiBG.png",centerX:0},compId:15},{type:"Image",props:{y:51.5,skin:"main/jinbi.png",centerX:0},compId:5},{type:"FontClip",props:{y:18,x:15,width:540,var:"timeFc",value:"11:11",skin:"main/clipshuzi.png",sheet:"123456 7890-+ /:%.ab",scaleY:.2,scaleX:.2,height:113,align:"center"},compId:16}]}],loadList:["main/guanjikuang.png","main/clipshuzi.png","main/heiBG.png","main/jinbi.png"],loadList3D:[]},e.TimeLogoUI=fe,v("ui.test.TimeLogoUI",fe);class Ie extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(Ie.uiView)}}Ie.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"viewbg",props:{runtime:"ui.game.viewbgUI"},compId:26},{type:"Box",props:{y:141,x:0,width:750,var:"box",height:1093},compId:24},{type:"Box",props:{y:158,x:22,width:705,var:"box1",height:396},compId:40,child:[{type:"TimeLogo",props:{zOrder:100,y:30,x:559.2,var:"timeLogo",runtime:"ui.test.TimeLogoUI"},compId:27},{type:"Button",props:{zOrder:100,y:277,x:63.2,var:"rankBtn",stateNum:1,skin:"main/btn_paihang.png",scaleY:.8,scaleX:.8,anchorY:.5,anchorX:.5},compId:33},{type:"Button",props:{zOrder:100,y:277,x:638.2,var:"sign7Btn",stateNum:1,skin:"main/btn_qiandao.png",scaleY:.8,scaleX:.8,gray:!0,anchorY:.5,anchorX:.5},compId:34,child:[{type:"Sprite",props:{zOrder:101,y:7,x:42,texture:"main/suo2.png",scaleY:.8,scaleX:.8},compId:39}]},{type:"Button",props:{zOrder:100,y:86,x:63.2,var:"shareBtn",stateNum:1,skin:"main/btn_fenxiang.png",scaleY:.8,scaleX:.8,anchorY:.5,anchorX:.5},compId:35},{type:"gameIcon",props:{y:382,x:589.2,var:"frogBtn",runtime:"ui.game.gameIconUI"},compId:41}]}],loadList:["main/btn_paihang.png","main/btn_qiandao.png","main/suo2.png","main/btn_fenxiang.png"],loadList3D:[]},e.worldUI=Ie,v("ui.test.worldUI",Ie);class ve extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(ve.uiView)}}ve.uiView={type:"View",props:{width:750,height:900},compId:2,child:[{type:"Box",props:{y:894,x:11,width:739},compId:27,child:[{type:"Sprite",props:{texture:"main/xuxian.png"},compId:10},{type:"Sprite",props:{x:50,texture:"main/xuxian.png"},compId:12},{type:"Sprite",props:{x:100,texture:"main/xuxian.png"},compId:13},{type:"Sprite",props:{x:150,texture:"main/xuxian.png"},compId:14},{type:"Sprite",props:{x:200,texture:"main/xuxian.png"},compId:15},{type:"Sprite",props:{x:250,texture:"main/xuxian.png"},compId:16},{type:"Sprite",props:{x:300,texture:"main/xuxian.png"},compId:17},{type:"Sprite",props:{x:350,texture:"main/xuxian.png"},compId:18},{type:"Sprite",props:{x:400,texture:"main/xuxian.png"},compId:19},{type:"Sprite",props:{x:450,texture:"main/xuxian.png"},compId:20},{type:"Sprite",props:{x:500,texture:"main/xuxian.png"},compId:21},{type:"Sprite",props:{x:550,texture:"main/xuxian.png"},compId:22},{type:"Sprite",props:{x:600,texture:"main/xuxian.png"},compId:23},{type:"Sprite",props:{x:650,texture:"main/xuxian.png"},compId:24},{type:"Sprite",props:{x:700,texture:"main/xuxian.png"},compId:28}]},{type:"Box",props:{y:93,x:176},compId:30,child:[{type:"Image",props:{skin:"main/changhong.png"},compId:4},{type:"Image",props:{y:8,x:128,width:139,var:"titleTxt",height:39},compId:7}]},{type:"Image",props:{y:184.5,x:-17,var:"noOpenImg",skin:"chapters/wait.png",scaleY:1.2,scaleX:1.2},compId:34},{type:"Box",props:{y:208,x:40.5,width:680,var:"openBox",height:656},compId:36,child:[{type:"Button",props:{y:355,x:342,width:684,var:"mapBtn",stateNum:1,skin:"chapters/chapter_img_1.png",height:531,anchorY:.5,anchorX:.5},compId:3},{type:"Image",props:{y:364,x:341,var:"suo",skin:"main/suo2.png",anchorY:.5,anchorX:.5},compId:8},{type:"Image",props:{x:203,width:288,var:"box1",skin:"main/yuanhei.png",sizeGrid:"0,28,0,30",height:64},compId:31,child:[{type:"Label",props:{y:0,x:1,width:286,var:"cengshuTxt",valign:"middle",text:"最高层数",height:64,fontSize:36,color:"#f6ecec",align:"center"},compId:32}]},{type:"Box",props:{y:158,x:171,width:345,var:"clickBox",height:373},compId:33}]}],loadList:["main/xuxian.png","main/changhong.png","chapters/wait.png","chapters/chapter_img_1.png","main/suo2.png","main/yuanhei.png"],loadList3D:[]},e.worldCellUI=ve,v("ui.test.worldCellUI",ve);class be extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(be.uiView)}}be.uiView={type:"Scene",props:{width:684,height:531},compId:2,child:[{type:"Image",props:{y:0,x:0,var:"dao",skin:"main/erdao.png"},compId:3}],loadList:["main/erdao.png"],loadList3D:[]},e.xiaodaoUI=be,v("ui.test.xiaodaoUI",be);class Le extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(Le.uiView)}}Le.uiView={type:"View",props:{},compId:2,child:[{type:"Sprite",props:{y:125,x:17,width:120,texture:"bg/tianshiying.png",height:58},compId:4},{type:"Image",props:{y:2.6666666666666665,x:-1,skin:"xiongmao/5.png"},compId:3}],animations:[{nodes:[{target:3,keyframes:{y:[{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:0},{value:-.25,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:3},{value:-.16666666666666674,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:6},{value:.4166666666666665,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:9},{value:.2777777777777777,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:10},{value:.6388888888888888,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:11},{value:3,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:12},{value:2.3333333333333335,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:13},{value:2.6666666666666665,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:14},{value:-5,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:15},{value:-4.666666666666667,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:16},{value:-4.833333333333334,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:17},{value:-7,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:18},{value:-8,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:21},{value:-7.5,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:24},{value:-7.333333333333334,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:25},{value:-7.166666666666667,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:26},{value:-1,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:27}],x:[{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"x",index:0},{value:.33333333333333326,tweenMethod:"linearNone",tween:!0,target:3,key:"x",index:1},{value:1.166666666666667,tweenMethod:"linearNone",tween:!0,target:3,key:"x",index:2},{value:4,tweenMethod:"linearNone",tween:!0,target:3,key:"x",index:3},{value:3.333333333333333,tweenMethod:"linearNone",tween:!0,target:3,key:"x",index:6},{value:3.166666666666666,tweenMethod:"linearNone",tween:!0,target:3,key:"x",index:9},{value:2.7777777777777777,tweenMethod:"linearNone",tween:!0,target:3,key:"x",index:10},{value:2.888888888888889,tweenMethod:"linearNone",tween:!0,target:3,key:"x",index:11},{value:-1,tweenMethod:"linearNone",tween:!0,target:3,key:"x",index:12}],skin:[{value:"xiongmao/1.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:0},{value:"xiongmao/2.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:3},{value:"xiongmao/3.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:6},{value:"xiongmao/4.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:9},{value:"xiongmao/5.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:12},{value:"xiongmao/6.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:15},{value:"xiongmao/7.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:18},{value:"xiongmao/8.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:21},{value:"xiongmao/9.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:24},{value:"xiongmao/10.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:27},{value:"xiongmao/11.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:30},{value:"xiongmao/12.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:33},{value:"xiongmao/13.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:36},{value:"xiongmao/14.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:39},{value:"xiongmao/15.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:42},{value:"xiongmao/16.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:45},{value:"xiongmao/17.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:48},{value:"xiongmao/18.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:51},{value:"xiongmao/19.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:54},{value:"xiongmao/20.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:57},{value:"xiongmao/21.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:60},{value:"xiongmao/22.png",tweenMethod:"linearNone",tween:!1,target:3,key:"skin",index:63}]}}],name:"ani1",id:1,frameRate:24,action:2}],loadList:["bg/tianshiying.png","xiongmao/5.png","xiongmao/1.png","xiongmao/2.png","xiongmao/3.png","xiongmao/4.png","xiongmao/6.png","xiongmao/7.png","xiongmao/8.png","xiongmao/9.png","xiongmao/10.png","xiongmao/11.png","xiongmao/12.png","xiongmao/13.png","xiongmao/14.png","xiongmao/15.png","xiongmao/16.png","xiongmao/17.png","xiongmao/18.png","xiongmao/19.png","xiongmao/20.png","xiongmao/21.png","xiongmao/22.png"],loadList3D:[]},e.xiongmaoUI=Le,v("ui.test.xiongmaoUI",Le);class _e extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(_e.uiView)}}_e.uiView={type:"View",props:{},compId:2,child:[{type:"Sprite",props:{y:-33.5,x:-72,texture:"bg/tianshiying.png"},compId:5},{type:"Sprite",props:{y:-161,x:-72,texture:"bg/xiongmao.png"},compId:4}],loadList:["bg/tianshiying.png","bg/xiongmao.png"],loadList3D:[]},e.xiongmao1UI=_e,v("ui.test.xiongmao1UI",_e);class ke extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(ke.uiView)}}ke.uiView={type:"Scene",props:{width:300,height:150},compId:2,child:[{type:"Image",props:{y:75,x:150,skin:"juese/juese_yixuanze.png",anchorY:.5,anchorX:.5},compId:3}],animations:[{nodes:[{target:3,keyframes:{y:[{value:75,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:0}],scaleY:[{value:3,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:5},{value:1.1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:9},{value:.9,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:12},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:15}],scaleX:[{value:3,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:5},{value:1.1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:9},{value:.9,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:12},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:15}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:5}]}}],name:"ani1",id:1,frameRate:24,action:1}],loadList:["juese/juese_yixuanze.png"],loadList3D:[]},e.yixuanzeUI=ke,v("ui.test.yixuanzeUI",ke);class Se extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(Se.uiView)}}Se.uiView={type:"View",props:{},compId:2,child:[{type:"Image",props:{y:0,x:0,skin:"zhaohuan/yuandi.png",anchorY:.5,anchorX:.5},compId:3},{type:"Image",props:{y:8,x:0,skin:"zhaohuan/yun.png",anchorY:.5,anchorX:.5},compId:4},{type:"Image",props:{y:17,x:-2,skin:"zhaohuan/guangzhu.png",anchorY:1,anchorX:.5},compId:5}],animations:[{nodes:[{target:5,keyframes:{scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleY",index:0},{value:4,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleY",index:5},{value:4,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleY",index:15},{value:4,tweenMethod:"linearNone",tween:!0,target:5,label:null,key:"scaleY",index:18}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleX",index:0},{value:.2,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleX",index:5},{value:.8,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleX",index:15},{value:.8,tweenMethod:"linearNone",tween:!0,target:5,label:null,key:"scaleX",index:18}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:5,key:"alpha",index:15},{value:1,tweenMethod:"linearNone",tween:!0,target:5,label:null,key:"alpha",index:18},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"alpha",index:24}]}},{target:4,keyframes:{scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:0},{value:1.5,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:29}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:0},{value:1.5,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:29}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:8},{value:1,tweenMethod:"linearNone",tween:!0,target:4,label:null,key:"alpha",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:25}]}},{target:3,keyframes:{scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:15}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:15}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:8},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"alpha",index:22}]}}],name:"ani1",id:1,frameRate:60,action:1}],loadList:["zhaohuan/yuandi.png","zhaohuan/yun.png","zhaohuan/guangzhu.png"],loadList3D:[]},e.zhaohuanUI=Se,v("ui.test.zhaohuanUI",Se);class Me extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(Me.uiView)}}Me.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{alpha:.6},compId:21,child:[{type:"Rect",props:{width:750,lineWidth:1,height:1700,fillColor:"#000000"},compId:22}]},{type:"Box",props:{x:12,centerY:0},compId:20,child:[{type:"Image",props:{width:726,skin:"main/biaotihuang.png",sizeGrid:"0,23,0,135",height:99},compId:4},{type:"Sprite",props:{y:32,x:279,texture:"bg/xingyunda.png"},compId:8},{type:"Image",props:{y:497,x:354,var:"pan",skin:"bg/zhuanpan2.png",rotation:31,anchorY:.49,anchorX:.505},compId:9},{type:"Image",props:{y:269,x:353,var:"zhen",skin:"bg/zhen.png",rotation:0,anchorY:.4,anchorX:.5},compId:10},{type:"Button",props:{y:1035,x:357,width:296,var:"btn_kaishi",stateNum:1,skin:"main/btn_huang.png",sizeGrid:"0,22,0,22",height:157,anchorY:.5,anchorX:.5},compId:11,child:[{type:"Image",props:{y:43,x:98,skin:"main/kaishi.png"},compId:13}]},{type:"Image",props:{y:550,x:249,var:"pan4",skin:"bg/zhuan_baoji.png",rotation:-122,anchorY:.5,anchorX:.5},compId:14},{type:"Image",props:{y:385,x:353,var:"pan0",skin:"bg/zhuan_qiansan.png",rotation:0,anchorY:.5,anchorX:.5},compId:15},{type:"Image",props:{y:438,x:460,var:"pan1",skin:"bg/zhuan_qianer.png",rotation:60,anchorY:.5,anchorX:.5},compId:16},{type:"Image",props:{y:438,x:249,var:"pan5",skin:"bg/zhuan_qianyi.png",rotation:-60,anchorY:.5,anchorX:.5},compId:17},{type:"Image",props:{y:609,x:353,var:"pan3",skin:"bg/zhuan_xixue.png",rotation:180,anchorY:.5,anchorX:.5},compId:18},{type:"Image",props:{y:556,x:458,var:"pan2",skin:"bg/zhuan_jiaxue.png",rotation:120,anchorY:.5,anchorX:.5},compId:19}]}],loadList:["main/biaotihuang.png","bg/xingyunda.png","bg/zhuanpan2.png","bg/zhen.png","main/btn_huang.png","main/kaishi.png","bg/zhuan_baoji.png","bg/zhuan_qiansan.png","bg/zhuan_qianer.png","bg/zhuan_qianyi.png","bg/zhuan_xixue.png","bg/zhuan_jiaxue.png"],loadList3D:[]},e.zhuanpanUI=Me,v("ui.test.zhuanpanUI",Me);class De extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(De.uiView)}}De.uiView={type:"View",props:{width:0,height:0},compId:2,child:[{type:"Clip",props:{y:0,x:0,var:"shudianju",skin:"bg/clip_dianjushu.png",scaleY:1.2,scaleX:1.2,clipY:3,clipX:3,anchorY:.5,anchorX:.5},compId:3},{type:"Clip",props:{y:-107,x:12,width:58,var:"shuhuoxing",skin:"bg/clip_huoxing.png",rotation:62,height:48,clipY:2,clipX:3,autoPlay:!0},compId:4}],loadList:["bg/clip_dianjushu.png","bg/clip_huoxing.png"],loadList3D:[]},e.ZongjuUI=De,v("ui.test.ZongjuUI",De)}(e.test||(e.test={}))}(I||(I={}));class b extends Laya.EventDispatcher{constructor(){super(),b.init_&&(this.initShader(),b.init_=!0)}setShader0(e,t){8e3!=t||b.sp||(b.sp=e)}initShader(){var e={a_Position:Laya.VertexMesh.MESH_POSITION0,a_Normal:Laya.VertexMesh.MESH_NORMAL0,a_Texcoord:Laya.VertexMesh.MESH_TEXTURECOORDINATE0,a_BoneWeights:Laya.VertexMesh.MESH_BLENDWEIGHT0,a_BoneIndices:Laya.VertexMesh.MESH_BLENDINDICES0},t={u_Bones:Laya.Shader3D.PERIOD_CUSTOM,u_CameraPos:Laya.Shader3D.PERIOD_CAMERA,u_MvpMatrix:Laya.Shader3D.PERIOD_SPRITE,u_WorldMat:Laya.Shader3D.PERIOD_SPRITE,u_texture:Laya.Shader3D.PERIOD_MATERIAL,u_marginalColor:Laya.Shader3D.PERIOD_MATERIAL,"u_DirectionLight.Direction":Laya.Shader3D.PERIOD_SCENE,"u_DirectionLight.Color":Laya.Shader3D.PERIOD_SCENE},i=Laya.Shader3D.add("CustomShader"),a=new Laya.SubShader(e,t,Laya.SkinnedMeshSprite3D.shaderDefines);i.addSubShader(a),a.addShaderPass('\n        #include "Lighting.glsl";\n        attribute vec4 a_Position;\n        attribute vec2 a_Texcoord;\n        attribute vec3 a_Normal;\n        uniform mat4 u_MvpMatrix;\n        uniform mat4 u_WorldMat;\n        varying vec2 v_Texcoord;\n        varying vec3 v_Normal;\n        #ifdef BONE\n        attribute vec4 a_BoneIndices;\n        attribute vec4 a_BoneWeights;\n        const int c_MaxBoneCount = 24;\n        uniform mat4 u_Bones[c_MaxBoneCount];\n        #endif\n        #if defined(DIRECTIONLIGHT)\n        varying vec3 v_PositionWorld;\n        #endif\n        void main()\n        {\n        #ifdef BONE\n        mat4 skinTransform=mat4(0.0);\n        skinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n        skinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n        skinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n        skinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n        vec4 position = skinTransform * a_Position;\n        gl_Position=u_MvpMatrix * position;\n        mat3 worldMat=mat3(u_WorldMat * skinTransform);\n        #else\n        gl_Position=u_MvpMatrix * a_Position;\n        mat3 worldMat=mat3(u_WorldMat);\n        #endif\n        v_Texcoord=a_Texcoord;\n        v_Normal=worldMat*a_Normal;\n        #if defined(DIRECTIONLIGHT)\n        #ifdef BONE\n        v_PositionWorld=(u_WorldMat*position).xyz;\n        #else\n        v_PositionWorld=(u_WorldMat*a_Position).xyz;\n        #endif\n        #endif\n        gl_Position=remapGLPositionZ(gl_Position); \n        }','\n        #ifdef FSHIGHPRECISION\n        precision highp float;\n        #else\n        precision mediump float;\n        #endif\n        #include "Lighting.glsl";\n        varying vec2 v_Texcoord;\n        uniform sampler2D u_texture;\n        uniform vec3 u_marginalColor;\n        varying vec3 v_Normal;\n        #if defined(DIRECTIONLIGHT)\n        uniform vec3 u_CameraPos;\n        varying vec3 v_PositionWorld;\n        uniform DirectionLight u_DirectionLight;\n        #endif\n        void main()\n        {\n        gl_FragColor=texture2D(u_texture,v_Texcoord);\n        vec3 normal=normalize(v_Normal);\n        vec3 toEyeDir = normalize(u_CameraPos-v_PositionWorld);\n        float Rim = 1.0 - max(0.0,dot(toEyeDir, normal));\n        vec3 Emissive = 15.0 * u_DirectionLight.Color * u_marginalColor * pow(Rim,3.0); \n        gl_FragColor = texture2D(u_texture, v_Texcoord) + vec4(Emissive,1.0);\n        }')}}b.init_=!0;class L extends Laya.BaseMaterial{constructor(){super(),this._addReference(3),this.setShaderName("CustomShader")}get diffuseTexture(){return this._shaderValues.getTexture(L.DIFFUSETEXTURE)}set diffuseTexture(e){this._shaderValues.setTexture(L.DIFFUSETEXTURE,e)}set marginalColor(e){this._shaderValues.setVector(L.MARGINALCOLOR,e)}}L.DIFFUSETEXTURE=Laya.Shader3D.propertyNameToID("u_texture"),L.MARGINALCOLOR=Laya.Shader3D.propertyNameToID("u_marginalColor");class _ extends b{constructor(e){super(),this.spArr=[],this.cpArr=[],this.sp=e;for(let a=0;a<1;a++)if(e.getChildAt(a)instanceof Laya.Sprite3D){var t=e.getChildAt(a);for(let e=0;e<t._children.length;e++)if(t._children[e]instanceof Laya.SkinnedMeshSprite3D){var i=t._children[e];this.spArr[a]||(this.spArr[a]=[],this.cpArr[a]=[]),this.spArr[a][e]=i.skinnedMeshRenderer.sharedMaterials,this.cpArr[a][e]=i.skinnedMeshRenderer.sharedMaterials,this.initShander(a,e)}}}initShander(e,t){var i=this.spArr[e][t],a=[];this.cpArr[e][t]=a;for(let e=0;e<i.length;e++){var s=i[e];let t=new L;a.push(t);var n,o=s._shaderValues.getData();for(let e in o){var h=o[e];h instanceof Laya.Texture2D&&(n=h,t.diffuseTexture=n)}t.marginalColor=new Laya.Vector3(1,1,1)}}clearShader(){if(this.sp){for(let s=0;s<1;s++)if(this.sp.getChildAt(s)instanceof Laya.Sprite3D){var e=this.sp.getChildAt(s);for(let s=0;s<e._children.length;s++)if(e._children[s]instanceof Laya.SkinnedMeshSprite3D){var t=e._children[s].skinnedMeshRenderer.sharedMaterials;for(let e=0;e<t.length;e++){var i=t[e]._shaderValues.getData();for(let e in i){var a=i[e];a instanceof Laya.Texture2D&&a&&a.destroy()}}}}this.cpArr.length=this.spArr.length=0}}setShader0(e,t){for(let s=0;s<1;s++)if(e.getChildAt(s)instanceof Laya.Sprite3D){var i=e.getChildAt(s);for(let e=0;e<i._children.length;e++)if(i._children[e]instanceof Laya.SkinnedMeshSprite3D){var a=i._children[e];a.skinnedMeshRenderer.sharedMaterials=0==t?this.spArr[s][e]:this.cpArr[s][e]}}}}_.map={};var k=Laya.Point;class S{static intersectionP(e,t,i,a){var s=new k(e.x,e.y),n=((e.x-i.x)*(i.y-a.y)-(e.y-i.y)*(i.x-a.x))/((e.x-t.x)*(i.y-a.y)-(e.y-t.y)*(i.x-a.x));return s.x+=(t.x-e.x)*n,s.y+=(t.y-e.y)*n,s}static intersectionMao(e,t){return S.intersectionP(e.p0,e.p1,t.p0,t.p1)}static simpleLineTestXY(e,t,i,a,s,n,o,h,r,l){return((i-e)*(n-t)-(s-e)*(a-t))*((i-e)*(h-t)-(o-e)*(a-t))<=0&&((o-s)*(t-n)-(e-s)*(h-n))*((o-s)*(a-n)-(i-s)*(h-n))<=0?S.intersectionMao(r,l):null}static simpleLineTestMao(e,t){return S.simpleLineTestXY(e.p0.x,e.p0.y,e.p1.x,e.p1.y,t.p0.x,t.p0.y,t.p1.x,t.p1.y,e,t)}}var M,D,T,E,A,C=Laya.Point;class B{constructor(e,t,i,a){this.p0_=new C,this.p1_=new C,this.p0_.x=e,this.p0_.y=t,this.p1_.x=i,this.p1_.y=a}reset(e,t,i,a){this.p0_.x=e,this.p0_.y=t,this.p1_.x=i,this.p1_.y=a}reset00(e,t){var i=this.getlen(),a=this.atan2();this.p0_.x=e,this.p0_.y=t,this.p1_.x=e+Math.cos(a)*i,this.p1_.y=t+Math.sin(a)*i}resetlen(e){var t=e,i=this.atan2();this.p1_.x=this.p0_.x+Math.cos(i)*t,this.p1_.y=this.p0_.y+Math.sin(i)*t}draw(e,t,i=1){e.drawLine(this.p0_.x,this.p0_.y,this.p1_.x,this.p1_.y,t,i)}get p0(){return this.p0_}get p1(){return this.p1_}set x0(e){this.p0_.x=e}get x0(){return this.p0_.x}set y0(e){this.p0_.y=e}get y0(){return this.p0_.y}set x1(e){this.p1_.x=e}get x1(){return this.p1_.x}set y1(e){this.p1_.y=e}get y1(){return this.p1_.y}get x_len(){return this.x1-this.x0}get y_len(){return this.y1-this.y0}getlen(){var e=this.x_len,t=this.y_len;return Math.sqrt(e*e+t*t)}getF0(){var e=this.x_len,t=this.y_len;return new B(this.x0,this.y0,this.x0-t,this.y0+e)}getF1(){var e=this.x_len,t=this.y_len;return new B(this.x0,this.y0,this.x0+t,this.y0-e)}lineTest(e){return S.simpleLineTestMao(this,e)}atan2(){return Math.atan2(this.y1-this.y0,this.x1-this.x0)}rad(e){var t=this.getlen();return this.p1.x=this.p0.x+t*Math.cos(e),this.p1.y=this.p0.y+t*Math.sin(e),e}getCenter(){var e=this.atan2(),t=this.getlen()/2;return new Laya.Point(this.p0.x+t*Math.cos(e),this.p0.y+t*Math.sin(e))}rebound(e){e=e;var t=this.lineTest(e);if(!t)return null;var i=e.getF0(),a=Math.sqrt(i.x_len*i.x_len+i.y_len*i.y_len),s=i.x_len/a,n=i.y_len/a,o=-(this.x_len*s+this.y_len*n)*s,h=-(this.x_len*s+this.y_len*n)*n,r=this.x_len+o,l=this.y_len+h,p=2*r-this.x_len,d=2*l-this.y_len;return new B(t.x,t.y,t.x+p,t.y+d)}rebound_error(e){var t=this.lineTest(e);if(!t)return null;var i=new B(this.x0,this.y0,t.x,t.y),a=e.getlen(),s=e.x_len/a,n=e.y_len/a,o=-(i.x_len*s+i.y_len*n)*s,h=-(i.x_len*s+i.y_len*n)*n,r=i.x_len+o,l=i.y_len+h,p=2*r-i.x_len,d=2*l-i.y_len;return i.reset(t.x,t.y,t.x+p,t.y+d),i}static len(e,t,i,a){var s=i-e,n=a-t;return Math.sqrt(s*s+n*n)}}class N{constructor(e,t){this.x_=0,this.y_=0,this.ww_=2,this.hh_=2,this.cx_=1,this.cy_=1,this.h2_=1,this.w2_=1,this.top_=0,this.left_=0,this.right_=0,this.bottom_=0,this.value=-1,this.cdTime=0,this.ww_=e,this.hh_=t,this.h2_=this.hh_/2,this.w2_=this.ww_/2,this.setXY(0,0)}setVV(e,t,i,a){var s=Math.abs(i),n=Math.abs(a);return s>0&&n>0?(this.ww_=s,this.hh_=n,this.h2_=this.hh_/2,this.w2_=this.ww_/2,this.setXY(Math.min(e,e+i),Math.min(t,t+a))):0==s&&n>0?(this.ww_=2,this.hh_=n,this.h2_=this.hh_/2,this.w2_=this.ww_/2,this.setXY(e-1,Math.min(t,t+a))):s>0&&0==n?(this.ww_=s,this.hh_=2,this.h2_=this.hh_/2,this.w2_=this.ww_/2,this.setXY(Math.min(e,e+i),t-1)):(this.ww_=2,this.hh_=2,this.h2_=this.hh_/2,this.w2_=this.ww_/2,this.setXY(e-1,t-1)),this}get ww(){return this.ww_}get hh(){return this.hh_}setXY(e,t){this.x_=e,this.y_=t,this.cx_=this.x_+this.w2_,this.cy_=this.y_+this.h2_,this.update()}setCenter(e,t){this.cx_=e,this.cy_=t,this.x_=this.cx_-this.w2_,this.y_=this.cy_-this.h2_,this.update()}setRq(e,t,i,a){return this.ww_=i,this.hh_=a,this.h2_=this.hh_/2,this.w2_=this.ww_/2,this.setXY(e,t),this}update(){this.top_=this.y_,this.left_=this.x_,this.bottom_=this.y_+this.hh_,this.right_=this.x_+this.ww_}get cx(){return this.cx_}get cy(){return this.cy_}get x(){return this.x_}get y(){return this.y_}get top(){return this.top_}get bottom(){return this.bottom_}get left(){return this.left_}get right(){return this.right_}hit(e,t){return e.x<t.right&&e.right>t.x&&e.y<t.bottom&&e.bottom>t.y}static faceTo(e,t){var i=t.cx-e.cx,a=t.cy-e.cy;return Math.atan2(a,i)}static faceTo3D(e,t){var i=t.cx-e.cx,a=e.cy-t.cy;return Math.atan2(a,i)}static faceToLenth(e,t){var i=e.x-t.x,a=e.y-t.y;return Math.sqrt(i*i+a*a)}getLeft(e=null){return this.getLine(this.left,this.top,this.left,this.bottom,e)}getRight(e=null){return this.getLine(this.right,this.top,this.right,this.bottom,e)}getTop(e=null){return this.getLine(this.left,this.top,this.right,this.top,e)}getBottom(e=null){return this.getLine(this.left,this.bottom,this.right,this.bottom,e)}getLine(e,t,i,a,s){var n=s;return n?n.reset(e,t,i,a):n=new B(e,t,i,a),n}}class V{constructor(){this._bounce=0,this.proType_=0,this.damage=10,this.ammoClip=-1,this.attackCD=1e3,this.rspeed=20}set bounce(e){this._bounce=e}get bounce(){return this._bounce}set proType(e){this.proType_=e,this.proType_<=800?this.rspeed=0:this.rspeed=20}get proType(){return this.proType_}}class U extends I.test.HeroFootUI{constructor(){super()}}class Y{}Y.Hero=9999,Y.RockGolem_Blue=8e3,Y.Rock=801,Y.HeroArrow=799,Y.MonstorArrow=798;class P extends I.test.BloodUIUI{constructor(){super(),this._rect=new Laya.Rectangle,this.shape=new Laya.Sprite,this.shape.y=this.bar.y+2}init(e){this.gameData=e,this._rect.x=0,this._rect.y=0,this._rect.width=this.gameData.hp/this.gameData.maxhp*this.width,this._rect.height=17,this.bar.scrollRect=this._rect,this.txt.text=""+this.gameData.hp,this.colBox.removeChildren();for(var t=this.gameData.maxhp/200,i=this.width/t,a=1;a<t;a++){var s=new Laya.Image;s.skin="bg/xuetiaogang.png",this.colBox.addChild(s),s.y=2,s.x=i*a}}update(e){this.gameData.hp-=e,this.gameData.hp=Math.max(this.gameData.hp,0),this._rect.width=this.gameData.hp/this.gameData.maxhp*this.width,this.bar.scrollRect=this._rect,this.txt.text=""+this.gameData.hp,Laya.Tween.clearTween(this.shape),this.shape.graphics.clear(),this.shape.graphics.drawRect(0,0,e/this.gameData.maxhp*this.width,13,"#ffffff"),this.addChild(this.shape),this.shape.x=this._rect.width,Laya.Tween.to(this.shape,{width:0},300,null,new Laya.Handler(this,this.onCom)),0==this.gameData.hp&&this.removeSelf()}onCom(){this.shape.removeSelf()}}class H extends I.test.Blood2UIUI{constructor(){super(),this._rect=new Laya.Rectangle,this.shape=new Laya.Sprite,this.shape.y=this.bar.y+2,this.txt.visible=!1}init(e){this.gameData=e,this._rect.x=0,this._rect.y=0,this._rect.width=this.gameData.hp/this.gameData.maxhp*this.width,this._rect.height=17,this.bar.scrollRect=this._rect,this.txt.text=""+this.gameData.hp}update(e){this.gameData.hp-=e,this.gameData.hp=Math.max(this.gameData.hp,0),this._rect.width=this.gameData.hp/this.gameData.maxhp*this.width,this.bar.scrollRect=this._rect,this.txt.text=""+this.gameData.hp,Laya.Tween.clearTween(this.shape),this.shape.graphics.clear(),this.shape.graphics.drawRect(0,0,e/this.gameData.maxhp*this.width,13,"#ffffff"),this.addChild(this.shape),this.shape.x=this._rect.width,Laya.Tween.to(this.shape,{width:0},300,null,new Laya.Handler(this,this.onCom)),0==this.gameData.hp&&this.removeSelf()}onCom(){this.shape.removeSelf()}}class R extends Laya.Sprite{constructor(){super(),this.bloodCount=0}init(e){this._data=e,this._data.proType==Y.Hero?(this.ui||(this.ui=new P),this.ui.init(this._data),this.addChild(this.ui)):this._data.proType==Y.RockGolem_Blue&&(this.ui2||(this.ui2=new H),this.ui2.init(this._data),this.addChild(this.ui2))}update(e){this._data.proType==Y.Hero?this.ui.update(e):this._data.proType==Y.RockGolem_Blue&&this.ui2.update(e)}}R.TAG="Blood";class X{constructor(){this.run_=!1}die(){}}X.closeCombat="Attack1",X.NormalAttack="Attack",X.Idle="Idle",X.Die="Die",X.Run="Run",X.TakeDamage="TakeDamage",X.SkillStart="SkillStart",X.SkillLoop="SkillLoop",X.SkillEnd="SkillEnd";class z extends Laya.FontClip{constructor(){super()}onInit(e,t){this.imgUrl||(this.imgUrl=e,this.skin=e,this.sheet=t,this.anchorX=this.anchorY=.5)}static getFontClip(e=1,t="main/clipshuzi.png",i){let a=Laya.Pool.getItemByClass(z.TAG+t,z);return a.onInit(t,i||"123456 7890-+ /:cdef"),a.scale(e||1,e||1),a}recover(){this.removeSelf(),Laya.Pool.recover(z.TAG+this.imgUrl,this)}}z.TAG="BitmapNumber";class G{constructor(){}static add(e,t,i,a){let s=z.getFontClip(.05,a);i&&Ft.shakeBattle(),s.value=e;let n=-ti.ww2+Math.random()*ti.ww,o=Math.random()*ti.ww;t.addChild(s),s.pos(n,o),t.bloodCount++;let h=.3;i&&(h=.4),Laya.Tween.to(s,{y:o-100,scaleX:h,scaleY:h},300,Laya.Ease.circOut),Laya.timer.once(500,this,()=>{s.recover()})}}class j extends Laya.EventDispatcher{constructor(e,t=600){super(),this.buffAry=[],this.tScale=1,this.isIce=!1,this.unBlocking=!1,this.hurtValue=0,this.speed_=6,this._pos2=new Laya.Vector3(0,0,0),this.moven2d_=0,this.facen2d_=0,this.facen3d_=0,this.acstr_="",this.rotationEulerY=0,this.keyNum=-1,this.gamedata_=new V,this.gamedata_.hp=this.gamedata_.maxhp=t,this.gamedata_.proType=e,this.rotationEulerY=0}checkBlackList(e){if(this.hit_blacklist){let t=this.hit_blacklist;for(let i=0;i<t.length;i++){if(t[i]==e)return!0}}return!1}setShadowSize(e){this._bulletShadow&&this._bulletShadow.img.size(e,e)}removeShodow(){this._bulletShadow&&this._bulletShadow.removeSelf()}get bloodUI(){return this._bloodUI}setKeyNum(e){this.keyNum=e}initBlood(e,t){this.gamedata.hp=e,this.gamedata.maxhp=t,this._bloodUI||(this._bloodUI=Laya.Pool.getItemByClass(R.TAG,R)),this._bloodUI.init(this.gamedata_),Ft.bloodLayer.addChild(this._bloodUI),this._bloodUI&&this._bloodUI.pos(this.hbox_.cx,this.hbox_.cy-120)}addFootCircle(){this._footCircle||(this._footCircle=new U),Ft.footLayer.addChild(this._footCircle),this._footCircle&&this._footCircle.pos(this.hbox_.cx,this.hbox_.cy)}hurt(e,t){this._bloodUI&&this._bloodUI.update(e),e>0&&G.add("-"+e,this._bloodUI,t,t?"main/redFont.png":"main/clipshuzi.png")}die(){this.play(X.Die),this.stopAi(),this._bulletShadow&&this._bulletShadow.removeSelf(),this._bulletShadow=null,Ft.map0.Eharr.indexOf(this.hbox)>=0&&Ft.map0.Eharr.splice(Ft.map0.Eharr.indexOf(this.hbox),1)}setSp3d(e,t){if(this.hbox_=new N(t||ti.mw,t||ti.mw),this.hbox_.linkPro_=this,this.hbox_.setCenter(ti.mcx,ti.mcy),e){this.sp3d_=e,this.sp3d_.transform.localRotationEulerY=this.rotationEulerY=0;let t=e.getChildAt(0);t&&(this.ani_=t.getComponent(Laya.Animator)),this.on(Ft.Event_Hit,this,this.hit)}}get animator(){return this.ani_}addSprite3DToChild(e,t){return this.sp3d.getChildAt(0).getChildByName(e).addChild(t)}addWeapon(){this.weapon=Laya.loader.getRes("h5/gong/hero.lh"),this.addSprite3DToAvatarNode("joint14",this.weapon)}addSprite3DToAvatarNode(e,t){this.ani_.linkSprite3DToAvatarNode(e,t)}removeSprite3DToAvatarNode(e){this.ani_&&this.ani_.unLinkSprite3DToAvatarNode(e)}hit(e,t=!1){this.gameAI&&this.gameAI.hit(e,t)}closeCombat(e){}get acstr(){return this.acstr_}set acstr(e){this.acstr_=e}get face2d(){return this.facen2d_}get face3d(){return this.facen3d_}get speed(){return this.speed_}setSpeed(e){this.speed_=e}setGameMove(e){this.movef=e}getGameMove(){return this.movef}setGameAi(e){return this.gameAI=e,this.gameAI}getGameAi(){return this.gameAI}get hbox(){return this.hbox_||(this.hbox_=new N(ti.mw,ti.mw),this.hbox_.setXY(ti.mcx,ti.mcy)),this.hbox_}get sp2d(){return this.sp2d_||(this.sp2d_=new Laya.Sprite,this.sp2d_.graphics.drawRect(0,0,ti.mw,ti.mw,null,16773120),this.sp2d_.x=this.hbox.x,this.sp2d_.y=this.hbox.y),this.sp2d_}get sp3d(){return this.sp3d_}play(e){this.acstr!=X.Die&&(this.acstr_=e,this.ani_.play(e),this.acstr!=X.Run&&this.acstr!=X.Idle&&this.acstr!=X.Die?Laya.stage.frameLoop(1,this,this.ac0):Laya.stage.timer.clear(this,this.ac0))}ac0(){if(this.normalizedTime>=1){var e=this.acstr_;Laya.stage.timer.clear(this,this.ac0),this.event(Ft.Event_PlayStop,e),e==X.SkillStart?this.play(X.SkillLoop):e==X.SkillLoop?this.play(X.SkillLoop):this.play(X.Idle)}}ac1(){this.keyNum>=0&&this.normalizedTime>=this.keyNum&&(this.event(Ft.Event_KeyNum,this.keyNum),this.keyNum=-1)}get normalizedTime(){return this.ani_.getCurrentAnimatorPlayState().normalizedTime}rotation(e){if(!e)return;if(this.gamedata.hp<=0)return;this.facen3d_=e,this.facen2d_=2*Math.PI-e;let t=Math.sin(e)/Ft.cameraCN.cos0,i=Math.cos(e),a=Math.atan2(t,i);a=(a+Math.PI/2)/Math.PI*180;let s=Math.round(a);if(s>=360)for(;s>=360;)s-=360;else if(s<0)for(;s<0;)s+=360;if(this.gamedata_.rspeed<=0)return this.sp3d_.transform.localRotationEulerY=s,void(this.rotationEulerY=this.sp3d_.transform.localRotationEulerY);if(this.rotationEulerY!=s)if(this.rotationEulerY=s,this.sp3d_.transform.localRotationEulerY>=360)for(;this.sp3d_.transform.localRotationEulerY>=360;)this.sp3d_.transform.localRotationEulerY-=360;else if(this.sp3d_.transform.localRotationEulerY<0)for(;this.sp3d_.transform.localRotationEulerY<0;)this.sp3d_.transform.localRotationEulerY+=360}ai(){if(this.ac1(),this.ani_&&this.ani_.speed>0&&this.gamedata_.proType==Y.Hero&&(this.acstr_==X.Run&&1==this.animator.speed&&(this.animator.speed=this.speed_/6),this.acstr_==X.NormalAttack||this.acstr_==X.closeCombat?this.ani_.speed=2:1!=this.ani_.speed&&(this.ani_.speed=1)),this.gameAI&&this.gameAI.exeAI(this),!(this.isDie||null==this.sp3d_||this.sp3d_&&this.rotationEulerY==this.sp3d_.transform.localRotationEulerY))for(let t=0;t<this.gamedata_.rspeed;t++){var e=this.rotationEulerY-this.sp3d_.transform.localRotationEulerY;if(0==e)break;for(e>0&&e<=180||e<-180?this.sp3d_.transform.localRotationEulerY+=1:this.sp3d_.transform.localRotationEulerY-=1;this.sp3d_.transform.localRotationEulerY>=360;)this.sp3d_.transform.localRotationEulerY-=360;for(;this.sp3d_.transform.localRotationEulerY<0;)this.sp3d_.transform.localRotationEulerY+=360}}get pos2(){return this._pos2}pos2To3d(){this.sp3d_&&(this.sp3d_.transform.localPositionX=this._pos2.x/ti.ww,this.sp3d_.transform.localPositionZ=this._pos2.z/Ft.cameraCN.cos0/ti.ww,this.hbox_.setXY(ti.mcx+this._pos2.x,ti.mcy+this._pos2.z),this.sp2d_&&(this.sp2d_.x=this.hbox_.x,this.sp2d_.y=this.hbox_.y,Ft.footLayer.addChild(this.sp2d_)),this.updateUI())}updateUI(){this._bloodUI&&this._bloodUI.pos(this.hbox_.cx,this.hbox_.cy-90),this._footCircle&&this._footCircle.pos(this.hbox_.cx,this.hbox_.cy),this._bulletShadow&&this._bulletShadow.pos(this.hbox_.cx,this.hbox_.cy)}get z(){return this.sp3d_.transform.localPositionZ}get x(){return this.sp3d_.transform.localPositionX}move2D(e,t=!0){if(!(this.gamedata.proType==Y.RockGolem_Blue&&this.gamedata.hp<=0||this.isIce))return this.moven2d_=e,!!this.movef&&this.movef.move2d(e,this,this.speed,!1)}setXY2D(e,t){this.pos2.x=e,this.pos2.z=t,this.pos2To3d()}setcXcY2DBox(e,t){this.hbox_.setCenter(e,t),this.pos2.x=this.hbox_.x-ti.mcx,this.pos2.z=this.hbox_.y-ti.mcy,this.pos2To3d()}setXY2DBox(e,t){this.hbox_.setXY(e,t),this.pos2.x=this.hbox_.x-ti.mcx,this.pos2.z=this.hbox_.y-ti.mcy,this.pos2To3d()}startAi(){this.gameAI&&(this.gameAI.starAi(),Ft.AiArr.indexOf(this)<0&&Ft.AiArr.push(this))}stopAi(){this.gameAI&&this.gameAI.stopAi();var e=Ft.AiArr.indexOf(this);e>-1?Ft.AiArr.splice(e,1):console.error("为什么没有这个")}get gamedata(){return this.gamedata_}}class O extends Laya.Script3D{constructor(){super()}onAwake(){this.box=this.owner}onStart(){}onUpdate(){Ft.executor.isRun&&(this.box.transform.localRotationEulerY+=5)}onDisable(){}}class F extends X{constructor(){super()}starAi(){this.run_=!0}stopAi(){this.run_=!1}hit(e){}exeAI(e){if(!this.run_)return!1;N.faceTo3D(e.hbox,Ft.hero.hbox);return e.move2D(e.face2d)&&(e.clear(),this.run_=!1),!1}}class W{move2d(e,t,i,a){return!1}Blocking(e,t,i){return!0}}class q extends W{constructor(){super()}move2d(e,t,i){if(0==t.status);else if(1==t.status){var a=Math.cos(e)*i,s=Math.sin(e)*i;if(t.curLen>=0&&t.moveLen>=0){t.curLen+=i,t.curLen>=t.moveLen&&(t.curLen=t.moveLen);var n=t.curLen/t.moveLen,o=2*Math.sin(Math.PI*n);t.sp3d.transform.localPositionY=.1+o}t.curLen>=t.moveLen&&(t.status=0),t.setXY2D(t.pos2.x+a,t.pos2.z+s)}else if(2==t.status){var h=N.faceTo3D(t.hbox,Ft.hero.hbox);if(t.rotation(h),i<=0)return!1;if(N.faceToLenth(t.hbox,Ft.hero.hbox)<ti.ww2)return!0;a=Math.cos(e)*i,s=Math.sin(e)*i;t.setXY2D(t.pos2.x+a,t.pos2.z+s)}return!1}}class K{constructor(){this.id=0,this.stageName="",this.stageImage="",this.beforeId=0,this.npcDamagescale=0,this.npcHealthscale=0,this.description=0,this.blueDiamond="",this.redDiamond=""}static randomDiamond(e){let t=m.getTotal(e);K.dropIndex=Math.ceil(t*Math.random()),console.log("钻石掉落的关卡数",K.dropIndex);let i=u.tableManager.getDataByNameAndId(K.NAME,e),a=i.blueDiamond.split(","),s=Number(a[0]),n=Number(a[1]),o=i.redDiamond.split(","),h=Number(o[0]),r=Number(o[1]);s=s/1e3*360,h=h/1e3*360;let l=Math.random();l*=360,K.blueNum=K.redNum=0,l<=s&&s>=0?(K.blueNum=n,console.log("掉落蓝钻",K.blueNum)):l>s&&l<=s+h&&(K.redNum=r,console.log("掉落红钻",K.redNum)),K.heartIndex=-1,1-Math.random()>=.1&&(K.heartIndex=Math.ceil(t*Math.random()),K.heartNum=1,console.log("红心掉落的关卡",K.heartIndex))}}K.NAME="sys_stagemap.txt",K.heartIndex=-1;class Z{constructor(){this.startPo=new Laya.Point,this.flag=!1,this.arr=[-1,-1,-1,1,1,1,1,-1],this.now=0,this.nowIndex=0}static setShakeUI(e,t){Z.shake.shakeAni=e,Z.shake.shakeBox=t}static execute(e,t,i){Z.shake.exe(e,t,i)}static execute2(e,t,i){Z.shake.exe2(e,t,i)}exe2(e,t,i){this.flag=!1,this.rotateNum=i,this.sp=e,Laya.timer.loop(t,this,this.loopFun2),this.now=0}loopFun2(){if(this.rotateNum<=0)return Laya.timer.clear(this,this.loopFun2),this.sp.rotation=0,void(this.sp=null);this.flag=!this.flag,this.rotateNum--,this.sp.rotation=this.rotateNum*(this.flag?-1:1)}exe(e,t,i){this.moveLen=i,this.time=t,this.sp=e,this.startPo.setTo(e.x,e.y),Laya.timer.clear(this,this.loopFun),Laya.timer.frameLoop(1,this,this.loopFun),this.startTime=Laya.Browser.now(),this.now=0}loopFun(){if(Laya.Browser.now()-this.startTime>this.time)return Laya.timer.clear(this,this.loopFun),this.sp.pos(this.startPo.x,this.startPo.y),void(this.sp=null);this.now>=this.arr.length&&(this.now=0),this.sp.pos(this.startPo.x+this.arr[this.now]*this.moveLen,this.startPo.y+this.arr[this.now+1]*this.moveLen),this.now+=2}static shakeByUI(e){Z.shake.exeByUI(e)}exeByUI(e){this.sp=e,this.startPo.setTo(e.x,e.y),Laya.timer.frameLoop(1,this,this.enterFun)}enterFun(){this.nowIndex>=this.shakeAni.count?this.stopShakeByUI():(this.shakeAni.index=this.nowIndex,this.sp.pos(this.startPo.x+this.shakeBox.x,this.startPo.y+this.shakeBox.y),this.nowIndex++)}stopShakeByUI(){this.sp.pos(this.startPo.x,this.startPo.y),Laya.timer.clear(this,this.enterFun),this.nowIndex=0}}Z.shake=new Z;class J{constructor(){}static getFormatBySecond(e,t=1){var i="";switch(t){case 1:i=J.getFormatBySecond1(e);break;case 2:i=J.getFormatBySecond2(e);break;case 3:i=J.getFormatBySecond3(e);break;case 4:i=J.getFormatBySecond4(e);break;case 5:i=J.getFormatBySecond5(e)}return i}static getFormatBySecond1(e=0){var t,i=Math.floor(e/3600);t=0==i?"00":i<10?"0"+i:""+i;var a=Math.floor((e-3600*i)/60),s=Math.floor((e-3600*i)%60);return t+":"+(0==a?"00":a<10?"0"+a:""+a)+":"+(0==s?"00":s<10?"0"+s:""+s)}static getFormatBySecond3(e=0){var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),a=Math.floor((e-3600*t)%60);return(0==i?"00":i<10?"0"+i:""+i)+":"+(0==a?"00":a<10?"0"+a:""+a)}static getFormatBySecond2(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}static getFormatBySecond4(e){var t=Math.floor(e/3600);return t>0?t>24?Math.floor(t/24)+"天前":t+"小时前":Math.floor(e/60)+"分钟前"}static getFormatBySecond5(e){var t=Math.floor(e/86400),i=Math.floor(e%86400/3600),a=Math.floor((e-3600*i)/60),s=Math.floor((e-3600*i)%60);return e>0?0==t?("",0==i?("",0==a?("",0==s?"":s<10?"0"+s+"秒":s+"秒"):a+"分"+(0==s?"":s<10?"0"+s+"秒":s+"秒")):0==a?("",0==s?"":s<10?"0"+s+"秒":s+"秒"):i+"小时"+(a<10?"0"+a+"分":a+"分")):t+"天"+(0==i?"":i<10?"0"+i+"小时":i+"小时"):""}}class Q{constructor(){this.id=0,this.roleExp=0,this.blueDiamond=0,this.redDiamond=0,this.gold=0}static getNewLv(e){let t=Me.homeData.playerExp,i=Me.homeData.playerLv,a=t+e,s=i;for(;;){let e=u.tableManager.getDataByNameAndId(Q.NAME,i);if(!(a>=e.roleExp))break;{let t=i+1;if(null==u.tableManager.getDataByNameAndId(Q.NAME,i))break;s=t,a-=e.roleExp}}return console.log("加经验后的等级",s,a),[s,a]}}Q.NAME="sys_hero.txt";class ${constructor(){}static light(e){let t={v:100},i=new Laya.Tween,a=new Laya.ColorFilter,s=[a];i.to(t,{v:0,update:new Laya.Handler(null,()=>{a.reset(),a.adjustBrightness(t.v),e.filters=s})},1e3)}static rotation(e,t=100){let i=new Laya.Tween;i.repeat=0,e.once(Laya.Event.DISPLAY,null,()=>{i.to(e,{rotation:360},t)}),e.once(Laya.Event.UNDISPLAY,null,()=>{Laya.Tween.clearTween(e)})}static initBtnEffect(){Laya.stage.on(Laya.Event.CLICK,null,$.clickFun)}static clickFun(e){e.target instanceof Laya.Button&&.5==e.target.anchorX&&.5==e.target.anchorY&&$.clickEffect(e.target)}static clickEffect(e){let t=new Laya.Tween,i=e.scaleX>0?1:-1;t.from(e,{scaleX:.9*i,scaleY:.9},80)}static hide(e,t=500){(new Laya.Tween).to(e,{alpha:0},t)}static show(e,t=500){(new Laya.Tween).to(e,{alpha:1},t)}static flash(e,t=500){e.alpha=0;let i=new Laya.TimeLine;i.to(e,{alpha:1},t),i.to(e,{alpha:0},t),i.play(0,!0),$.clearTween(e)}static clearTween(e){e.once(Laya.Event.UNDISPLAY,null,()=>{Laya.Tween.clearAll(e)})}static scaleEffect(e){let t=new Laya.TimeLine;t.to(e,{scaleX:.7,scaleY:.7},100),t.to(e,{scaleX:1,scaleY:1},300,Laya.Ease.backOut),t.play()}static bigSmall(e,t,i){let a=new Laya.TimeLine;a.to(e,{scaleX:t,scaleY:t},100),a.to(e,{scaleX:i,scaleY:i},300,Laya.Ease.backOut),a.play()}static popup(e,t,i,a){let s=new Laya.Tween;e.scale(0,0),s.to(e,{scaleX:t,scaleY:t},i,Laya.Ease.backOut,null,a)}}class ee{constructor(){this.handMv=new I.test.newhand1UI,this.maskLayer=new Laya.Box,this.target=null,this.nextStat=0,this.autoStop=!1,this.maskLayer=new Laya.Box,this.maskLayer.size(Laya.stage.width,Laya.stage.height),this.maskLayer.mouseThrough=!1,this.maskLayer.zOrder=1e6,this.maskLayer.mouseEnabled=!0}static getInstance(){return null==ee.g&&(ee.g=new ee),ee.g}hand(e,t=0,i=0,a,s=0,n=!1){Laya.timer.once(s,this,()=>{this.autoStop=n,this.target=e,this.nextStat=a,this.handMv.visible=!0,Laya.stage.addChild(this.handMv),this.handMv.zOrder=1e3;let s=e.localToGlobal(new Laya.Point(0,0));this.handMv.pos(s.x+t,s.y+i),this.handMv.lightClip.interval=1e3/15,this.handMv.lightClip.play(),this.handMv.ani1.interval=100,this.handMv.ani1.play(0,!0),Laya.stage.on(Laya.Event.CLICK,this,this.clickFun),Laya.stage.addChild(this.maskLayer)})}clickFun(e){let t=this.target.getBounds(),i=this.target.localToGlobal(new Laya.Point(0,0));new Laya.Rectangle(i.x,i.y,t.width,t.height).contains(Laya.stage.mouseX,Laya.stage.mouseY)&&(Me.homeData.newStat=this.nextStat,p.log(1e3+this.nextStat),Me.saveData(),this.target.event(Laya.Event.CLICK,e),this.handMv.visible=!1,this.autoStop&&this.removeMask())}removeMask(){this.maskLayer.removeSelf()}}ee.g=null,function(e){e[e.click_talent=1]="click_talent",e[e.talent_lv_up=2]="talent_lv_up",e[e.select_talent=3]="select_talent",e[e.open_role=4]="open_role",e[e.click_hp=5]="click_hp",e[e.over=6]="over"}(M||(M={}));class te{constructor(){this.id=0,this.roleName="",this.baseAtk=0,this.baseHp=0,this.baseSpeed=0,this.baseCrit=0,this.baseCritHurt=0,this.baseDodge=0,this.baseMove=0,this.baseSkill=0,this.addExp=0,this.addSpeed=0,this.addAttack=0,this.roleLimt=0,this.videoLock=0}static getSys(e){let t=u.tableManager.getTable(te.NAME);for(let i of t)if(i.id==e)return i;return null}getValue(e){return e==T.ATK?this.baseAtk:e==T.HP?this.baseHp:void 0}static have(e){let t=u.tableManager.getTable(te.NAME);for(let i of t)if(i.id==e)return!0;return!1}}te.NAME="sys_rolebase.txt";class ie{constructor(){this.id=0,this.roleLevel=0,this.roleId=0,this.addAtk=0,this.costAtk=0,this.addHp=0,this.costHp=0,this.costGold=0}getCost(e){return e==T.ATK?this.costAtk:e==T.HP?this.costHp:void 0}getCostType(e){return e==T.ATK?A.BLUE_DIAMONG:e==T.HP?A.RED_DIAMONG:void 0}getValue(e){return e==T.ATK?this.addAtk:e==T.HP?this.addHp:void 0}static getSysRole(e,t){let i=u.tableManager.getTable(ie.NAME);for(let a of i)if(a.roleId==e&&a.roleLevel==t)return a;return null}static getAddHp(e,t){let i=u.tableManager.getTable(ie.NAME),a=0;for(let s of i)if(s.roleId==e&&(a+=s.addHp,s.roleLevel==t))return a}static getAddAtk(e,t){let i=u.tableManager.getTable(ie.NAME),a=0;for(let s of i)if(s.roleId==e&&(a+=s.addAtk,s.roleLevel==t))return a}static getAddValue(e,t,i){return i==T.ATK?this.getAddAtk(e,t):i==T.HP?this.getAddHp(e,t):void 0}}ie.NAME="sys_roleup.txt",function(e){e[e.AD_DIAMOND=0]="AD_DIAMOND",e[e.HERO_LV_ABILITY=1]="HERO_LV_ABILITY"}(D||(D={}));class ae{constructor(){this.id=0,this.hpLv=0,this.atkLv=0,this.hpTime=0,this.atkTime=0}getString(){return[this.id,this.hpLv,this.atkLv,this.hpTime,this.atkTime].join(",")}setString(e){let t=e.split(",");this.id=parseInt(t[0]),this.hpLv=parseInt(t[1]),this.atkLv=parseInt(t[2]),this.hpTime=parseInt(t[3]),this.atkTime=parseInt(t[4])}initData(){this.hpLv=1,this.atkLv=1}getLv(e){return e==T.ATK?this.atkLv:e==T.HP?this.hpLv:void 0}setLv(e,t){e==T.ATK&&(this.atkLv=t),e==T.HP&&(this.hpLv=t)}}class se{constructor(){this.hp=0,this.atk=0,this.def=0,this.crit=0,this.moveSpeed=0,this.atkSpeed=0,this.initSkillId=0,this.critEffect=0,this.dodge=0}copy(){let e=new se;return e.hp=this.hp,e.atk=this.atk,e.def=this.def,e.crit=this.crit,e.moveSpeed=this.moveSpeed,e.atkSpeed=this.atkSpeed,e.critEffect=this.critEffect,e.initSkillId=this.initSkillId,e}reset0(){this.hp=0,this.atk=0,this.def=0,this.crit=0,this.moveSpeed=0,this.atkSpeed=0,this.critEffect=0,this.initSkillId=0}}class ne{constructor(){this.heroMap={},this.nowRoleId=1}setData(e){this.initData(null);let t=e.heroData.split(".");for(let e of t){let t=new ae;t.setString(e),this.heroMap[t.id]=t}this.nowRoleId=e.nowRoleId?e.nowRoleId:1}saveData(e){let t=[];for(let e in this.heroMap){let i=this.heroMap[e];t.push(i.getString())}e.heroData=t.join("."),e.nowRoleId=this.nowRoleId}initData(e){let t=u.tableManager.getTable(te.NAME);for(let e of t){let t=new ae;t.id=e.id,t.initData(),this.heroMap[t.id]=t}this.nowRoleId=1}getHeroLv(e,t){return this.heroMap[e].getLv(t)}getHeroBaseData(e){return this.heroMap[e]}getBaseTime(e,t){let i=this.getHeroBaseData(t);return e==T.ATK?i.atkTime:i.hpTime}getHeroData(e){let t=new se,i=te.getSys(e);return t.atk=i.baseAtk+this.getValue(e,T.ATK)*(1+Me.talentData.addCompose)+Me.talentData.equip.atk,t.hp=i.baseHp+this.getValue(e,T.HP)*(1+Me.talentData.addCompose)+Me.talentData.equip.hp,t.atk=parseInt(t.atk+""),t.hp=parseInt(t.hp+""),console.log(i.baseAtk,this.getValue(e,T.ATK),Me.talentData.addCompose,Me.talentData.equip.atk),console.log(i.baseHp,this.getValue(e,T.HP),Me.talentData.addCompose,Me.talentData.equip.hp),t.dodge=i.baseDodge,t.moveSpeed=i.baseMove,t.atkSpeed=i.baseSpeed,t.crit=i.baseCrit,t.critEffect=i.baseCritHurt,t.initSkillId=i.baseSkill,t}getValue(e,t){let i=this.getHeroLv(e,t);return ie.getAddValue(e,i,t)}lvUp(e,t){let i=this.heroMap[e],a=i.getLv(t),s=ie.getSysRole(e,a),n=s.getCost(t),o=s.getCostType(t);if(Me.homeData.getGoldByType(o)<n)return 2;let r=a+1;return null==ie.getSysRole(e,r)?3:Me.homeData.getGoldByType(A.GOLD)<s.costGold?4:r>u.tableManager.getDataByNameAndId(te.NAME,e).roleLimt?5:(Me.homeData.changeGold(o,-n,D.HERO_LV_ABILITY),Me.homeData.changeGold(A.GOLD,-s.costGold,D.AD_DIAMOND),i.setLv(t,r),Laya.stage.event(h.HERO_UPDATE),Me.saveData(),0)}canLvUp(){let e=u.tableManager.getTable(te.NAME);for(let t of e){if(this.test(t.id,T.HP))return!0;if(this.test(t.id,T.ATK))return!0}return!1}test(e,t){let i=this.heroMap[e].getLv(t),a=ie.getSysRole(e,i),s=a.getCost(t),n=a.getCostType(t);if(Me.homeData.getGoldByType(n)<s)return!1;let o=i+1;return null!=ie.getSysRole(e,o)&&(!(Me.homeData.getGoldByType(A.GOLD)<a.costGold)&&!(o>u.tableManager.getDataByNameAndId(te.NAME,e).roleLimt))}}!function(e){e[e.ATK=0]="ATK",e[e.HP=1]="HP"}(T||(T={}));class oe{constructor(){}rotation(e,t){this.s=e,this.ro=t,Laya.timer.frameLoop(1,this,this.loopFun),e.once(Laya.Event.UNDISPLAY,this,this.undisFun)}undisFun(){Laya.timer.clear(this,this.loopFun)}loopFun(){this.s.rotation+=this.ro}static play(e,t=1){(new oe).rotation(e,t)}}class he extends I.test.GetItemCellUI{constructor(){super(),oe.play(this.light),this.anchorX=this.anchorY=.5}setData(e){this.v1.vs.selectedIndex=e.type,this.label.text="+"+e.value}}class re extends I.test.GetItemDialogUI{constructor(){super(),this.now=0,this.col=3,this.dArr=[],this.cellWid=500,this.cellHei=500}static open(e){let t=new re;t.setData(e),t.popup(!0)}setData(e){this.now=0,e instanceof Array?this.dArr=e:this.dArr=[e];let t=this.dArr.length;this.box.width=(t>=this.col?3:t)*this.cellWid,this.box.height=Math.ceil(t/this.col)*this.cellWid;let i=750/this.box.width;this.box.scale(i,i);let a=this.box.width*this.box.scaleX;this.rebornBtn.y=this.box.height*i+50,this.rebornBtn.y>Laya.stage.height-80&&(this.rebornBtn.y=Laya.stage.height-80),this.box.x=(750-a)/2,Laya.timer.once(400,this,this.effect),this.height=this.box.height*i+200,this.rebornBtn.visible=!1}effect(){let e=new he;e.x=this.now%this.col*this.cellWid+this.cellWid/2,e.y=Math.floor(this.now/this.col)*this.cellHei+this.cellHei/2,e.setData(this.dArr[this.now]),this.box.addChild(e),this.now++,(new Laya.Tween).from(e,{scaleX:3,scaleY:3,alpha:0},300),this.now<this.dArr.length?Laya.timer.once(100,this,this.effect):this.rebornBtn.visible=!0}}class le extends I.test.juese_tishiUI{constructor(){super(),this.goldType=0,this.addNum=0,this.bg.height=Laya.stage.height,oe.play(this.light),this.rebornBtn.clickHandler=new Laya.Handler(this,this.clickFun)}clickFun(){this.check()>0||u.sdkManager.playAdVideo(t.AD_DIAMOND,new Laya.Handler(this,this.adFun))}setGoldType(e){this.goldType=e,this.v1.vs.selectedIndex=e,this.check()<0?this.fc.visible=!1:(this.fc.visible=!0,Laya.timer.frameLoop(1,this,this.loopFun)),this.on(Laya.Event.UNDISPLAY,this,this.aundisFun)}aundisFun(){Laya.timer.clearAll(this)}loopFun(){let e=this.check();e<0?this.fc.visible=!1:this.fc.value="00:"+this.getV0(Math.ceil(e/1e3))}getV0(e){return e<10?"0"+e:""+e}check(){return Me.heroData.getBaseTime(this.heroType,Me.heroData.nowRoleId)-Laya.Browser.now()}adFun(){let e=Math.ceil(4*Math.random())+6;this.addNum=e,Me.homeData.changeGold(this.goldType,e,D.AD_DIAMOND);let t=new re;t.setData({type:this.goldType,value:e}),t.popup(!0),t.once(Laya.Event.UNDISPLAY,this,this.undisFun);let i=Me.heroData.getHeroBaseData(Me.heroData.nowRoleId);this.heroType==T.ATK?i.atkTime=Laya.Browser.now()+6e4:this.heroType==T.HP&&(i.hpTime=Laya.Browser.now()+6e4)}undisFun(){this.event(le.CHANGE_GOLD_EVENT,[this.goldType,this.addNum])}}le.CHANGE_GOLD_EVENT="CHANGE_GOLD_EVENT";class pe extends I.test.NoResDialogUI{constructor(){super(),this.goldType=0,this.addNum=0}setType(e){0==e?(this.vs.selectedIndex=0,this.l1.text="剩余次数:"+Me.homeData.adPower+"/3",this.title.text="体力不足",this.btnView.fuhuo.clickHandler=new Laya.Handler(this,this.playAdFun)):(this.vs.selectedIndex=1,e==E.red?(this.title.text="红宝石不足",this.dia.vs.selectedIndex=1,this.setGoldType(A.RED_DIAMONG)):e==E.blue&&(this.title.text="蓝宝石不足",this.dia.vs.selectedIndex=2,this.setGoldType(A.BLUE_DIAMONG)),this.btnView.fuhuo.on(Laya.Event.CLICK,this,this.ad2Fun)),this.btnView.ani1.play(0,!0)}ad2Fun(){this.check()>0||u.sdkManager.playAdVideo(t.AD_DIAMOND,new Laya.Handler(this,this.adFun))}adFun(){let e=Math.ceil(4*Math.random())+6;this.addNum=e,Me.homeData.changeGold(this.goldType,e,D.AD_DIAMOND);let t=new re;t.setData({type:this.goldType,value:e}),t.popup(!0),t.once(Laya.Event.UNDISPLAY,this,this.undisFun);let i=Me.heroData.getHeroBaseData(Me.heroData.nowRoleId);this.heroType==T.ATK?i.atkTime=Laya.Browser.now()+6e4:this.heroType==T.HP&&(i.hpTime=Laya.Browser.now()+6e4)}setGoldType(e){this.goldType=e,this.check()<0?this.fc.visible=!1:(this.fc.visible=!0,Laya.timer.frameLoop(1,this,this.loopFun)),this.on(Laya.Event.UNDISPLAY,this,this.aundisFun)}aundisFun(){Laya.timer.clearAll(this)}loopFun(){let e=this.check();e<0?this.fc.visible=!1:this.fc.value="00:"+this.getV0(Math.ceil(e/1e3))}getV0(e){return e<10?"0"+e:""+e}check(){return Me.heroData.getBaseTime(this.heroType,Me.heroData.nowRoleId)-Laya.Browser.now()}undisFun(){this.event(le.CHANGE_GOLD_EVENT,[this.goldType,this.addNum])}playAdFun(){3!=Me.homeData.adPower&&u.sdkManager.playAdVideo(t.AD_POWER,new Laya.Handler(this,this.overFun))}overFun(){Me.homeData.adPower++,this.close(),Me.saveData(),Me.homeData.curEnergy=20,Me.homeData.lastTime=0}}pe.CHANGE_GOLD_EVENT="CHANGE_GOLD_EVENT",function(e){e[e.tili=0]="tili",e[e.red=1]="red",e[e.blue=2]="blue"}(E||(E={}));class de extends Laya.Box{constructor(){super(),this.height=ti.height,this.width=750,this.topUI=new ce,this.addChild(this.topUI),Laya.stage.on(h.AD_UPDATE_POWER,this,this.onUpdatePower),this.bottomUI=new ge,this.addChild(this.bottomUI),this.bottomUI.y=1212;let e=new Laya.Image;e.skin="main/jianhei.png",this.addChild(e),e.width=800,e.anchorX=.5,e.y=this.bottomUI.y-50,e.x=375,e.height=50,this.addChild(this.bottomUI),this.mouseThrough=!0}onUpdatePower(){this.topUI.removeSelf(),this.addChild(this.topUI)}appEnergy(){this.topUI.appEnergy()}get selectIndex(){return this.bottomUI.selectIndex}}class ce extends I.test.mainUIUI{constructor(){super(),this._remainingTime=0,this.maskSpr=new Laya.Sprite,this._isInit=!1,this.lastWidth=0,this.isTwo=!1,this.timerClip.visible=!1,this.appEnergyClip.visible=!1,this.headImg.skin=Ft.userHeadUrl,this.nameTxt.text=Ft.userName,this.on(Laya.Event.DISPLAY,this,this.onDis),Laya.stage.on(h.WX_ON_SHOW,this,this.onDis),this.jia.on(Laya.Event.CLICK,this,this.addTiFun)}addTiFun(){let e=new pe;e.setType(E.tili),e.popup()}onDis(){if(this.homeData=Me.homeData,Date.now()>=this.homeData.lastTime)this._remainingTime=0;else{let e=Me.homeData.lastTime-Date.now(),t=Math.floor(e/1e3);this._remainingTime=Math.floor(t%ce.TOTAL_TIME),0==this._remainingTime&&(this._remainingTime=ce.TOTAL_TIME)}this.updateEnergy(),this.dengji.value=""+Me.homeData.playerLv,this.coinClip.value=""+Me.homeData.coins;let e=u.tableManager.getDataByNameAndId(Q.NAME,Me.homeData.battleLv),t=Me.homeData.playerExp/e.roleExp;Laya.timer.frameLoop(1,this,this.onLoopExp,[t]),Laya.stage.on(h.GOLD_CHANGE,this,this.goldFun)}goldFun(){this.coinClip.value=""+Me.homeData.coins}onLoopExp(e){this.lastWidth+=15,this.isTwo?this.lastWidth>=this.jingyantiao.width&&(this.lastWidth=0,this.isTwo=!1):this.lastWidth>=this.jingyantiao.width*e&&(this.lastWidth=this.jingyantiao.width*e,Laya.timer.clear(this,this.onLoopExp)),this.lastWidth=Math.max(1,this.lastWidth),this.maskSpr.graphics.clear(),this.maskSpr.graphics.drawRect(0,0,this.lastWidth,this.jingyantiao.height,"#fff000"),this.jingyantiao.mask=this.maskSpr}appEnergy(){this.homeData.curEnergy<ce.xiaohao?l.setTips("体力不足！"):(Laya.MouseManager.enabled=!1,Ft.isStartBattle=!0,this.homeData.curEnergy-=ce.xiaohao,u.sendEvent(h.APP_ENERGY,ce.xiaohao),this.updateEnergy(),Laya.timer.once(800,this,this.onStart))}onStart(){Laya.MouseManager.enabled=!0,this._remainingTime=ce.TOTAL_TIME,this.updateEnergy(),this.homeData.lastTime=Date.now()+(this.homeData.totalEnergy-this.homeData.curEnergy)*ce.TOTAL_TIME*1e3,Me.saveData(),Ft.battleLoader.load()}updateEnergy(){this.tiliClip.value=this.homeData.curEnergy+"/"+this.homeData.maxEngergy;let e=this.homeData.curEnergy/this.homeData.maxEngergy;e=Math.max(.1,e),this.homeData.curEnergy<this.homeData.totalEnergy?(Laya.timer.loop(1e3,this,this.onLoop),this.onLoop()):(this.timerClip.visible=!1,Laya.timer.clear(this,this.onLoop))}onLoop(){this.timerClip.visible=!0,this.timerClip.value=J.getFormatBySecond3(this._remainingTime),this._remainingTime--,this._remainingTime<0&&(this.homeData.curEnergy++,this.homeData.curEnergy==this.homeData.totalEnergy?(Laya.timer.clear(this,this.onLoop),this.timerClip.visible=!1):this._remainingTime=ce.TOTAL_TIME,this.updateEnergy())}}ce.TOTAL_TIME=720,ce.MAX_ENERGY=20,ce.xiaohao=2;class ge extends Laya.Box{constructor(){super(),this.bgBox=new Laya.Box,this.curBg=new Laya.Image,this.btnBox=new Laya.Box,this.bgs=[],this.btns=[],this._selectIndex=0,this.opens=Me.homeData.openBtn,this.size(750,122),this.addChild(this.bgBox),this.curBg.skin="main/dazhao.png",this.addChild(this.curBg),this.addChild(this.btnBox);for(let e=0;e<5;e++){let t=new Laya.Image;t.skin="main/xiaobiao.png",t.width=127,t.height=122,this.bgBox.addChild(t),t.x=e*t.width,this.bgs.push(t);let i=new Laya.Button;this.makeBtn(i),i.tag=this.opens[e],"1"==this.opens[e]?(i.stateNum=2,i.width=132,i.height=136,i.skin="main/btn_"+e+".png",i.y=t.y+55):(i.stateNum=1,i.width=38,i.height=55,i.skin="main/suo.png",i.y=t.y+61,i.scale(1.2,1.2)),this.btnBox.addChild(i),i.anchorX=.5,i.anchorY=.5,i.x=t.x+63,i.clickHandler=new Laya.Handler(this,this.onClick,[i]),this.btns.push(i)}this.onClick(this.btns[this._selectIndex],10),Laya.stage.on(h.RED_UPDATE,this,this.updateRed),Laya.stage.on(h.GOLD_CHANGE,this,this.updateRed),Laya.stage.on(h.PLAYER_INFO_UPDATE,this,this.updateRed),this.updateRed()}updateRed(){this.setBtn(this.btns[1],Me.heroData.canLvUp(),1),this.setBtn(this.btns[2],Me.talentData.canLvUp2(),2)}setBtn(e,t,i){if("1"!=Me.homeData.openBtn[i])return;let a=e.getChildByName("red");a.visible=t,a.visible&&a.ani1.play(0,!0)}makeBtn(e){let t=new I.test.RedPointViewUI;t.scale(.8,.8),e.addChild(t),t.name="red",t.pos(90,-20),t.zOrder=100,t.visible=!1}updateBtns(){let e=this.btns.length;for(let t=0;t<e;t++){let e=this.btns[t];e.tag=this.opens[t],"1"==this.opens[t]?(e.stateNum=2,e.width=132,e.height=136,e.scale(1,1),e.skin="main/btn_"+t+".png"):(e.stateNum=1,e.width=38,e.height=55,e.skin="main/suo.png",e.scale(1.2,1.2))}}open(e){let t=this.btns[e];(new Laya.Tween).to(t,{alpha:0,scaleX:4,scaleY:4},200,Laya.Ease.strongOut)}onClick(e,t=500){if("-1"==e.tag)return e.mouseEnabled=!1,Z.execute(e,300,2),l.setTips("敬请期待"),void setTimeout(()=>{e.mouseEnabled=!0},300);var i=0;let a;for(let t=0;t<this.btns.length;t++){let s=this.btns[t],n=this.bgs[t];n.width=127,s.selected=!1,s==e&&(s.selected=!0,n.skin="main/dabiao.png",n.width=242,this._selectIndex=t,a=n),n.x=i,i+=n.width,s.x=n.x+.5*n.width}Laya.Tween.to(this.curBg,{x:a.x},t,Laya.Ease.cubicInOut),Laya.stage.event("switchView")}get selectIndex(){return this._selectIndex}fly(e,t){e.selected=!1;let i=new Laya.Tween,a=this.btns[t];this.btns[t]=e,Me.homeData.openBtn[t]="1";let s=a.localToGlobal(new Laya.Point(a.width/2,a.height/2));i.to(e,{x:s.x,y:s.y},600,Laya.Ease.strongOut,new Laya.Handler(this,this.flyFun,[e,a,t]))}flyFun(e,t,i){$.bigSmall(e,3,1),t.parent.addChild(e),e.pos(t.x,t.y),this.makeBtn(e),t.removeSelf(),e.clickHandler=new Laya.Handler(this,this.onClick,[e]),Me.homeData.newStat==M.click_talent?ee.getInstance().hand(e,e.width/2,e.height/2,M.talent_lv_up,1e3):Me.homeData.newStat==M.open_role&&ee.getInstance().hand(e,e.width/2,e.height/2,M.click_hp,1e3),Laya.timer.once(1e3,null,()=>{Laya.MouseManager.enabled=!0})}}class ue{constructor(){this.redDiamond=0,this.blueDiamond=0,this.playerExp=0,this.isPass=!1,this.newStat=0,this.openId=-1,this.loginTime=0,this.adTimes=0,this.adPower=0,this.openBtn=[],Laya.stage.on(h.NEW_DAY,this,this.newDayFun),Laya.stage.on(h.AD_OVER,this,this.adOverFun),Laya.stage.on(h.PASS_CHAPTER,this,this.openFun)}setNewStat(e){p.log(e)}openFun(){this.openId=Me.homeData.chapterId}adOverFun(){this.adTimes++}newDayFun(){this.adPower=0}setChapterId(e,t){this.chapterId=e,Me.rankData.saveWorldRank(),Me.rankData.saveFriendRank()}setData(e){if(this.totalEnergy=e.totalEnergy,this.maxEngergy=e.maxEngergy,this.lastTime=e.lastTime,this.curEnergy=e.curEnergy,this.chapterId=e.chapterId,this.mapIndex=e.mapIndex,this.battleLv=e.battleLv,this.playerLv=e.playerLv,this.coins=e.coins,this.blueDiamond=e.blueDiamond?e.blueDiamond:0,this.redDiamond=e.redDiamond?e.redDiamond:0,this.playerExp=e.playerExp,this.isGuide=e.isGuide,null==this.playerExp&&(this.playerExp=0),Date.now()>=this.lastTime)this.curEnergy=this.totalEnergy;else{let e=this.lastTime-Date.now(),t=Math.floor(e/1e3),i=Math.ceil(t/ce.TOTAL_TIME);this.curEnergy=this.totalEnergy-i,console.log("Session剩余的时间",t,this.curEnergy)}if(this.curEnergy=20,this.newStat=e.newStat?e.newStat:M.over,null==e.openBtn?this.openBtn=["1","1","1","-1","1"]:this.openBtn=e.openBtn.split(","),this.adPower=e.adPower?e.adPower:0,null==e.loginTime)u.sendEvent(h.NEW_DAY);else{let t=new Date(e.loginTime);(new Date).getDate()!=t.getDate()&&u.sendEvent(h.NEW_DAY)}this.timeFun(0),e.loginTime=Date.now(),this.adTimes=e.adTimes?e.adTimes:0}timeFun(e){1==e&&u.sendEvent(h.NEW_DAY);let t=new Date,i=864e5-36e5*t.getHours()-60*t.getMinutes()*1e3-1e3*t.getSeconds();Laya.timer.once(i+1e3,this,this.timeFun,[1])}saveData(e){e.curEnergy=this.curEnergy,e.maxEngergy=this.maxEngergy,e.lastTime=this.lastTime,e.totalEnergy=this.totalEnergy,e.battleLv=this.battleLv,e.playerLv=this.playerLv,e.coins=this.coins,e.blueDiamond=this.blueDiamond,e.redDiamond=this.redDiamond,e.playerExp=this.playerExp,e.chapterId=this.chapterId,e.mapIndex=this.mapIndex,console.log("当前的层数",e.mapIndex),Ft.battleLoader.chapterId>=this.chapterId&&Ft.battleLoader.index>this.mapIndex&&(e.mapIndex=Ft.battleLoader.index-1,e.mapIndex=Math.max(0,e.mapIndex),console.log("存储最高层数",e.mapIndex)),e.isGuide=this.isGuide,e.newStat=this.newStat,e.openBtn=this.openBtn.join(","),e.adPower=this.adPower,e.adTimes=this.adTimes}initData(e){this.totalEnergy=ce.MAX_ENERGY,this.maxEngergy=ce.MAX_ENERGY,this.curEnergy=this.totalEnergy,this.lastTime=0,this.isGuide=!0,this.chapterId=0,this.mapIndex=0,this.battleLv=1,this.playerLv=1,this.coins=0,this.redDiamond=10,this.playerExp=0,this.blueDiamond=10,this.coins=1e3,this.newStat=1,this.openBtn=["1","-1","-1","-1","1"],this.adPower=0,this.adTimes=0}changeGold(e,t,i=0){return!(this.getGoldByType(e)+t<0)&&(this.setGoldByType(e,t),Laya.stage.event(h.GOLD_CHANGE),!0)}getGoldByType(e){return e==A.GOLD?this.coins:e==A.RED_DIAMONG?this.redDiamond:e==A.BLUE_DIAMONG?this.blueDiamond:void 0}setGoldByType(e,t){e==A.GOLD?this.coins+=t:e==A.RED_DIAMONG?this.redDiamond+=t:e==A.BLUE_DIAMONG&&(this.blueDiamond+=t)}addPlayerExp(e){for(this.playerExp+=e;;){let e=u.tableManager.getDataByNameAndId(Q.NAME,this.playerLv);if(!(this.playerExp>=e.roleExp))break;{let t=this.playerLv+1;if(null==u.tableManager.getDataByNameAndId(Q.NAME,this.playerLv))break;this.playerLv=t,this.playerExp-=e.roleExp}}u.sendEvent(h.PLAYER_INFO_UPDATE)}}!function(e){e[e.GOLD=0]="GOLD",e[e.RED_DIAMONG=1]="RED_DIAMONG",e[e.BLUE_DIAMONG=2]="BLUE_DIAMONG"}(A||(A={}));var me=Laya.HttpRequest;class ye{constructor(){this.xhr=new me,this.xhr.http.timeout=1e4}static create(){return new ye}success(e,t){return this.xhr.once(Laya.Event.COMPLETE,t,function(i){Laya.Handler.create(t,e).runWith(i)}),this}error(e,t=null){return this.xhr.once(Laya.Event.ERROR,t,function(i){Laya.Handler.create(t,e).runWith(i)}),this}send(e,t,i,a){this.xhr.send(e,t,i,a)}}class we{constructor(e){this.handler=e,this._http=ye.create().success(this.onSuccess,this).error(this.onErro,this)}onSuccess(e){this.handler&&this.handler.runWith(e)}onErro(e){console.error(e)}send(e,t,i,a){this._http.send(e,t,i,a)}}class xe extends we{constructor(){super(null)}static create(){return new xe}send(){let e=Me.gameData,t={};t.obj=e,super.send(u.serverIP+"game/save","skey="+Me.SKEY+"&gamedata="+JSON.stringify(t),"post","text")}onSuccess(e){super.onSuccess(e),console.log("save success",e)}}class fe{constructor(){this.id=0,this.idName="",this.talentName="",this.talentInfo="",this.talentSort=0,this.talentType=0}static getSys(){let e=u.tableManager.getTable(fe.NAME);return e.sort(function(e,t){return e.talentSort-t.talentSort}),e}getHou(){return 1==this.talentType?"":2==this.talentType?"%":void 0}}fe.NAME="sys_talentinfo.txt";class Ie{constructor(){this.id=0,this.talentCost=0}}Ie.NAME="sys_talentcost.txt";class ve{constructor(){this.id=0,this.addAttack=.1,this.addHp=.1,this.addItemhp=.1,this.addDefense=.1,this.addAtkspeed=.1,this.dropLevelhp=.1,this.addCompose=.1,this.lineGold=.1,this.offlineGold=.1}}ve.NAME="sys_talent.txt";class be{constructor(){this.talentArr=[],this.lvTimes=0,this.imgArr=[],this.talentLvMap={},this.atk=0,this.hp=0,this.def=0,this.equip=new se,this.offlineGold=0,this.lineGold=0,this.addCompose=0,this.dropLevelhp=0,this.addItemhp=0,this.addData("tianfu/PTkuang.png","tianfu/gongji.png","tianfu/gongzi.png",1),this.addData("tianfu/PTkuang.png","tianfu/baoji.png","tianfu/baozi.png",2),this.addData("tianfu/PTkuang.png","tianfu/xingyun.png","tianfu/xingzi.png",3),this.addData("tianfu/JYkuang.png","tianfu/fangyu.png","tianfu/fangzi.png",4),this.addData("tianfu/JYkuang.png","tianfu/sudu.png","tianfu/yizi.png",5),this.addData("tianfu/JYkuang.png","tianfu/shengming.png","tianfu/shengzi.png",6),this.addData("tianfu/SSkuang.png","tianfu/tiejiang.png","tianfu/tiezi.png",7),this.addData("tianfu/SSkuang.png","tianfu/jinbi.png","tianfu/diaozi.png",8),this.addData("tianfu/SSkuang.png","tianfu/lixian.png","tianfu/lizi.png",9)}addData(e,t,i,a){this.imgArr.push({bg:e,logo:t,font:i,id:a})}getImgData(e){return this.imgArr[e-1]}setData(e){null==e.talent&&this.initData(e);let t=e.talent.split(",");for(let e=0;e<t.length;e+=2){let i=parseInt(t[e]),a=parseInt(t[e+1]);this.talentLvMap[i]=a}this.lvTimes=e.lvTimes?e.lvTimes:0,this.updateAttribute()}saveData(e){let t=[];for(let e in this.talentLvMap)t.push(e),t.push(this.talentLvMap[e]);e.talent=t.join(","),e.lvTimes=this.lvTimes}initData(e){let t=u.tableManager.getTable(fe.NAME);for(let e of t)this.talentLvMap[e.id]=0}getLv(e){return this.talentLvMap[e]}getTxt(e){return""}updateAttribute(){this.equip.reset0(),this.equip.atk=this.getAtt(1),this.equip.hp=this.getAtt(2),this.equip.def=this.getAtt(4),this.equip.atkSpeed=this.getAtt(5),this.addItemhp=this.getAtt(3),this.dropLevelhp=this.getAtt(6),this.addCompose=this.getAtt(7),this.lineGold=this.getAtt(8),this.offlineGold=this.getAtt(9)}getAtt(e){let t=this.getLv(e);if(0==t)return 0;let i=u.tableManager.getDataByNameAndId(fe.NAME,e),a=u.tableManager.getDataByNameAndId(ve.NAME,t)[i.idName];return 1==i.talentType?a:2==i.talentType?a/100:a}lvUp(e){let t=this.canLvUp();if(0!=t)return t;this.lvTimes++;let i=u.tableManager.getDataByNameAndId(Ie.NAME,this.lvTimes+1);return Me.homeData.changeGold(A.GOLD,-i.talentCost),this.talentLvMap[e]=this.getLv(e)+1,u.sendEvent(h.TALENT_UPDATE),Me.saveData(),this.updateAttribute(),t}getGold(){return u.tableManager.getDataByNameAndId(Ie.NAME,this.lvTimes+1).talentCost}haveGold(){return Me.homeData.getGoldByType(A.GOLD)>=u.tableManager.getDataByNameAndId(Ie.NAME,this.lvTimes+1).talentCost}canLvUp(){return 0==this.haveGold()?-1:this.lvTimes>=Me.homeData.playerLv?-2:0}canLvUp2(){return 0==this.canLvUp()}}class Le{constructor(){}setData(e){}saveData(e){}initData(e){}}class _e{constructor(){}setData(e){}saveData(e){}initData(e){}}class ke{constructor(){this.gold=0,this.reward_min=0,this.endTime=0,this.startTime=0}setData(e){this.endTime=e.endTime,this.reward_min=e.reward_min,this.gold=e.gold,this.dataServerFun()}saveData(e){e.endTime=this.endTime,e.reward_min=this.reward_min,e.gold=this.gold}initData(e){this.startNewDay(),this.goldTimeStart()}initFun(){this.startNewDay(),this.goldTimeStart()}loopFun(){let e=Math.min(Laya.Browser.now(),this.endTime),t=this.getMinByTime(e);this.reward_min!=t&&(this.addGoldOnce(),this.reward_min=t)}dataServerFun(){this.startTime=this.endTime-ke.ONE_DAY;let e=0,t=((e=this.endTime<Laya.Browser.now()?this.getMinByTime(this.endTime):this.getMinByTime(Laya.Browser.now()))-this.reward_min)*this.getOneGold();this.reward_min=e,this.setGold(this.gold+t),this.goldTimeStart()}goldTimeStart(){Laya.timer.frameLoop(1,this,this.loopFun)}rewardGold(e){let t=this.gold;e&&(t=3*this.gold),Me.homeData.changeGold(A.GOLD,t),this.setGold(0),this.endTime<=Laya.Browser.now()&&this.startNewDay(),Me.saveData()}startNewDay(){this.endTime=Laya.Browser.now()+ke.ONE_DAY,this.startTime=this.endTime-ke.ONE_DAY,this.reward_min=0}getMinByTime(e){let t=e-this.startTime;return Math.floor(t/6e4)}getNowTime(){if(this.endTime<Laya.Browser.now())return[0,0,0,0];let e=this.endTime-Laya.Browser.now(),t=this.getLeft(e,36e5);return[t[0],(t=this.getLeft(t[1],6e4))[0],(t=this.getLeft(t[1],1e3))[0],(t=this.getLeft(t[1],1))[0]]}addGoldOnce(){this.setGold(this.gold+this.getOneGold()),this.reward_min=this.getMinByTime(Laya.Browser.now()),Me.saveData()}getOneGold(){let e=Me.homeData.chapterId,t=Math.ceil(e/2+1);return t=2,t*=1+Me.talentData.offlineGold,t=parseInt(t+"")}setGold(e){this.gold=e}getLeft(e,t){let i=parseInt(e/t+"");return[i,e-i*t]}}ke.ONE_DAY=864e5;class Se{constructor(){}setData(e){}saveData(e){}initData(e){}saveWorldRank(){let e={};e.skey=Me.SKEY,e.name="荒野女枪",e.scorestr=this.getStageNum(),e.url="main/suo.png",e.item=0,0!=Laya.Browser.onMiniGame?0!=u.sdkManager.haveRight&&(e.name=u.sdkManager.wxName,e.url=u.sdkManager.wxHead,u.http(u.serverIP+"gamex3/saveRank",e,"post")):u.http(u.serverIP+"gamex3/saveRank",e,"post")}getStageNum(){let e=0;for(let t=1;t<Me.homeData.chapterId;t++)e+=m.getTotal(t);return e+=Me.homeData.mapIndex}getRank(e,t){let i={};i.skey=Me.SKEY,i.st=0,i.et=50,u.http(u.serverIP+"gamex3/getRank",i,"GET",e,t)}saveFriendRank(){if(0!=Laya.Browser.onMiniGame){var e={},t={key:"stageNum"};t.value=Me.homeData.chapterId+"",e.KVDataList=[t],e.success=(e=>{console.log("存储好友排行榜成功",e)}),e.fail=(e=>{console.log("存储好友排行榜失败",e)}),Laya.Browser.window.wx.setUserCloudStorage(e)}}}class Me{static init(){Me.homeData=new ue,Me.talentData=new be,Me.taskData=new _e,Me.userData=new Le,Me.heroData=new ne,Me.timeGoldData=new ke,Me.rankData=new Se,Me.IDataArr.push(Me.homeData),Me.IDataArr.push(Me.talentData),Me.IDataArr.push(Me.taskData),Me.IDataArr.push(Me.userData),Me.IDataArr.push(Me.heroData),Me.IDataArr.push(Me.timeGoldData)}static saveData(){for(let e of Me.IDataArr)e.saveData(Me.gameData);xe.create().send()}static parseData(e){if(console.log("服务端数据",e),""!=e&&"0"!=e&&"{}"!=e){u.sdkManager.log(r.NEW_PLAYER);let t=JSON.parse(e);Me.gameData=t.obj;for(let e of Me.IDataArr)e.setData(Me.gameData);p.log(i.LOGIN)}else{for(let e of Me.IDataArr)e.initData(Me.gameData);Me.saveData(),p.log(i.REG)}}static configFun(){for(let e of Me.IDataArr)e.initData(Me.gameData);Me.saveData()}}Me.gameData={},Me.homeData=null,Me.talentData=null,Me.userData=null,Me.taskData=null,Me.heroData=null,Me.timeGoldData=null,Me.rankData=null,Me.IDataArr=[];class De{constructor(){this.id=0,this.name="",this.type=0,this.subType=0,this.buyGod=0,this.addHp=0,this.iteamTxt=""}}De.NAME="sys_iteam.txt";class Te extends j{constructor(){super(0,1),this.curLen=0,this.moveLen=0,this.status=0,this.setSpeed(0),this.setGameAi(new F),this.setGameMove(new q),this._bulletShadow=new I.test.BulletShadowUI,Ft.footLayer.addChild(this._bulletShadow),this.setShadowSize(20)}static getOne(e){let t=Laya.Pool.getItemByClass(Te.TAG+e,Te);var i;(t.id=e,t.sp3d)||(i=Laya.Sprite3D.instantiate(Laya.loader.getRes("h5/coins/"+e+"/monster.lh")),t.setSp3d(i),e==Te.TYPE_COIN?t.sp3d.transform.localScale=Te.tScale:t.sp3d.transform.localScale=Te.tScale2,i&&t.sp3d.addComponent(O));return t}setPos(e,t,i){this.status=1,this.curLen=0,i==Te.TYPE_COIN?this.moveLen=20+Math.random()*ti.ww:i==Te.TYPE_HEART?this.moveLen=Math.random()*ti.ww:this.moveLen=50+Math.random()*ti.ww,this.setXY2D(e.pos2.x,e.pos2.z),this.setSpeed(2),this.rotation(t),this.startAi(),Ft.layer3dCoins.addChild(this.sp3d),Ft.footLayer.addChild(this._bulletShadow)}updateUI(){super.updateUI(),this._bulletShadow&&this._bulletShadow.pos(this.hbox.cx+10,this.hbox.cy+10)}onCom(){this.setShadowSize(20);let e=ti.ww*this.sp3d.transform.localPositionX,t=ti.ww*this.sp3d.transform.localPositionZ*Ft.cameraCN.cos0;this.setXY2D(e,t),this._bulletShadow&&this._bulletShadow.pos(this.hbox.cx+10,this.hbox.cy)}fly(){var e=N.faceTo3D(this.hbox,Ft.hero.hbox);this.rotation(e),this.status=2,this.curLen=0,this.moveLen=0,this._bulletShadow&&this._bulletShadow.removeSelf(),this.setSpeed(.5*ti.ww)}clear(){if(this._bulletShadow&&this._bulletShadow.removeSelf(),this.stopAi(),this.sp3d&&this.sp3d.removeSelf(),this.id==Te.TYPE_COIN)Ft.showCoinsNum+=2,Laya.stage.event(Ft.Event_COINS);else if(this.id==Te.TYPE_BLUE)Ft.showBlueNum++,K.blueNum--;else if(this.id==Te.TYPE_RED)Ft.showRedNum++,K.redNum--;else if(this.id==Te.TYPE_HEART){let e=u.tableManager.getDataByNameAndId(De.NAME,Te.TYPE_HEART).addHp+Me.talentData.addItemhp;Ft.hero.addBlood(e),K.heartNum--}this.curLen=0,this.moveLen=0,this.status=0,K.blueNum<=0&&K.redNum<=0&&(K.dropIndex=-1),K.heartNum<=0&&(K.heartIndex=-1),Laya.Pool.recover(Te.TAG,this)}}Te.TYPE_COIN=1001,Te.TYPE_BLUE=1002,Te.TYPE_RED=1003,Te.TYPE_HEART=1004,Te.TAG="Coin",Te.tScale=new Laya.Vector3(1.5,1.5,1.5),Te.tScale2=new Laya.Vector3(.5,.5,.5);class Ee{constructor(){}static addEffect(e,t,i){for(let a=0;a<t;a++){let s=Te.getOne(i);s.setPos(e,2*Math.PI/t*a,i),i==Te.TYPE_HEART?Ee.hearAry.push(s):Ee.coinsAry.push(s)}}static fly(){let e=Ee.coinsAry.length;e>0&&Ft.playSound("fx_goldget.wav");for(let t=0;t<e;t++){let e=Ee.coinsAry.shift();e&&e.fly()}}static flyHeart(){let e=Ee.hearAry.length;for(let t=0;t<e;t++){let e=Ee.hearAry.shift();e&&e.fly()}}}Ee.coinsAry=[],Ee.hearAry=[];class Ae{constructor(){}static addEffect(e){let t=Laya.Pool.getItemByClass(Ae.TAG,Ae);return t.sp3d||(t.sp3d=Laya.Sprite3D.instantiate(Laya.loader.getRes("h5/effects/monsterDie/monster.lh"))),t.sp3d.transform.localRotationEulerY=45,Ft.layer3d.addChild(t.sp3d),t.sp3d.transform.localPosition=e.sp3d.transform.localPosition,t.sp3d.transform.localScaleX=.3,t.sp3d.transform.localScaleY=.3,t.sp3d.transform.localScaleZ=.3,Laya.timer.once(1e3,this,()=>{t.recover()}),t}recover(){this.sp3d&&this.sp3d.removeSelf(),Laya.Pool.recover(Ae.TAG,this),0==Ft.map0.Eharr.length&&(Ee.fly(),Laya.stage.event(Ft.Event_EXP))}}Ae.TAG="DieEffect";class Ce{constructor(){this.sp3d=Laya.Sprite3D.instantiate(Laya.loader.getRes("h5/effects/boom/monster.lh"))}static addEffect(e,t=1){let i=Laya.Pool.getItemByClass(Ce.TAG,Ce);return i.player=e,i.player.sp3d.addChild(i.sp3d),Laya.timer.once(500,this,()=>{i.recover()}),i}recover(){this.sp3d&&this.sp3d.removeSelf(),Laya.Pool.recover(Ce.TAG,this)}}Ce.TAG="MonsterBoomEffect";class Be{constructor(){}init(e){this.sp3d||(this.sp3d=Laya.Sprite3D.instantiate(Laya.loader.getRes("h5/wall/"+e+"/monster.lh")),3e3!=e&&3500!=e&&4e3!=e&&this.sp3d.transform.setWorldLossyScale(Ft.cameraCN.boxscale)),Ft.layer3dCube.addChild(this.sp3d)}static recover(){for(;Be.arr.length>0;){let e=Be.arr.shift();e.sp3d.removeSelf(),Laya.Pool.recover(Be.TAG+e.type,e)}Be.arr.length=0}static getOne(e,t){t=Be.getType(t);let i=Be.TAG+t;Ft.poolTagArr[i]=i;let a=Laya.Pool.getItemByClass(i,Be);return a.init(t),a.sp3d.transform.position=e,Be.arr.push(a),a}static getType(e){return 1==e||e>=1e3&&e<1500?1e3:2==e||e>=1500&&e<2e3?1500:3==e||e>=2e3&&e<2500?2e3:4==e||e>=2500&&e<3e3?2500:5==e||e>=3e3&&e<3500?3e3:6==e||e>=3500&&e<4e3?3500:7==e||e>=4e3&&e<4500?4e3:8==e||e>=4500&&e<5e3?4500:9==e||e>=5e3&&e<5500?5e3:10==e||e>=5500&&e<6e3?5500:void 0}}Be.TAG="GameCube_",Be.arr=[];class Ne extends Laya.Script3D{constructor(){super(),this.flag=!1,this.v3=new Laya.Vector3(0,-.05,0),this.v33=new Laya.Vector3(0,.05,0)}onAwake(){this.box=this.owner}onStart(){}onUpdate(){Ft.executor.isRun&&(this.flag?this.box.transform.translate(this.v3,!1):this.box.transform.translate(this.v33,!1),this.box.transform.localPositionY>=1?this.flag=!0:this.box.transform.localPositionY<=0&&(this.flag=!1))}onDisable(){}}class Ve{}Ve.TAG="MOVE",Ve.FLY=1,Ve.MOVE=2,Ve.FIXED=3,Ve.JUMP=4,Ve.BACK=5,Ve.BOOM=6;class Ue{}Ue.TAG="ATTACK",Ue.NORMAL_BULLET=1,Ue.RANDOM_BULLET=2,Ue.AOE=3,Ue.FLY_HIT=4,Ue.SPLIT=5,Ue.CALL_MONSTER=6;class Ye{constructor(){let e=Laya.loader.getRes("h5/bulletsEffect/20000/monster.lh");this.sp3d=Laya.Sprite3D.instantiate(e)}static addEffect(e){let t=Laya.Pool.getItemByClass(Ye.TAG,Ye);return t.player=e,t.player&&t.player.sp3d&&t.sp3d&&t.sp3d.transform&&t.player.sp3d.addChild(t.sp3d),Laya.timer.once(500,this,()=>{t.recover()}),t}recover(){this.sp3d&&this.sp3d.removeSelf(),this.player=null,Laya.Pool.recover(Ye.TAG,this)}}Ye.TAG="HitEffect";class Pe{constructor(){this.id=0,this.buffName="",this.bufflInfo="",this.buffDot=0,this.buffCD=0,this.times=0,this.damagePercent=0,this.addExp=0,this.addAttack=0,this.addSpeed=0,this.addCrit=0,this.addHurt=0,this.addHp=0,this.hpLimit=0,this.addMiss=0}}Pe.NAME="sys_rolebuff.txt";class He{constructor(){this.res={}}add(e){let t=this.res[e];null==t&&((t=new Re).url=e,t.time=Date.now(),this.res[t.url]=t),t.count++}app(e){let t=this.res[e];t&&t.count--}release(){for(let e in this.res){if(this.res[e].count<=0){let t=Laya.loader.getRes(e);t&&t.destroy(!0),console.log("释放资源",e)}}}}He.ins=new He;class Re{constructor(){this.url="",this.time=0,this.count=0}}class Xe extends j{constructor(){super(Y.RockGolem_Blue,0),this._bulletShadow=new I.test.BulletShadowUI,Ft.footLayer.addChild(this._bulletShadow)}onCie(){this.isIce||(this.isIce=!0,this.animator.speed=0)}offCie(){this.isIce&&(this.isIce=!1,this.animator.speed=1)}startAi(){super.startAi()}stopAi(){super.stopAi()}setShadowSize(e){super.setShadowSize(e),Ft.footLayer.addChild(this._bulletShadow)}updateUI(){super.updateUI(),this._bulletShadow&&this._bulletShadow.pos(this.hbox.cx-.5*(this._bulletShadow.img.width-ti.mw),this.hbox.cy-.5*(this._bulletShadow.img.height-ti.mw))}init(){let e;if(this.sysEnemy.normalAttack>0&&(e=u.tableManager.getDataByNameAndId(f.NAME,this.sysEnemy.normalAttack),this.aiType=e.bulletType),"0"!=this.sysEnemy.skillId)for(var t=this.sysEnemy.skillId.split(","),i=0;i<t.length;i++){let a=Number(t[i]);a>0&&(e=u.tableManager.getDataByNameAndId(f.NAME,a),this.aiType=e.bulletType)}}show(){Ft.layer3d.addChild(this.sp3d),Ft.bloodLayer.addChild(this._bloodUI),Ft.footLayer.addChild(this._bulletShadow)}hide(){this.sp3d&&this.sp3d.removeSelf(),this._bloodUI&&this._bloodUI.removeSelf(),this._bulletShadow&&this._bulletShadow.removeSelf()}initBlood(e){super.initBlood(e,e),this._bloodUI&&this._bloodUI.pos(this.hbox.cx,this.hbox.cy-90)}hurt(e,t,i=!1){if(Ft.playSound("monsterHit.mp3"),super.hurt(e,t),this.sysEnemy.isBoss&&Laya.stage.event(h.BOOS_BLOOD_UPDATE,e),i)return;let a=Ye.addEffect(this),s=Ce.addEffect(this,this.tScale);0==e&&(a.sp3d&&a.sp3d.removeSelf(),s.sp3d&&s.sp3d.removeSelf())}die(){if(this.setKeyNum(1),this.once(Ft.Event_KeyNum,this,this.onDie),this.play(X.Die),Ft.map0.Eharr.indexOf(this.hbox)>=0&&Ft.map0.Eharr.splice(Ft.map0.Eharr.indexOf(this.hbox),1),Ft.level<=10&&this.sysEnemy.dropExp>0){let e=Ft.skillManager.isHas(3001),t=0;if(e){let i=u.tableManager.getDataByNameAndId(Pe.NAME,e.skillEffect1);t=Math.ceil(this.sysEnemy.dropExp*i.addExp/1e3)}Ft.battleExp+=this.sysEnemy.dropExp+t}this.sysEnemy.heroExp>0&&(Ft.heroExp+=this.sysEnemy.dropExp);let e=Ft.skillManager.isHas(4001);if(e){let t=u.tableManager.getDataByNameAndId(Pe.NAME,e.skillEffect1);Ft.hero.addBlood(Math.floor(Ft.hero.gamedata.maxhp*t.addHp/1e3))}Ft.dropDiamond(this)}onDie(e){Ft.selectHead.removeSelf(),Ft.selectFoot.removeSelf(),this.stopAi(),this._bulletShadow&&this._bulletShadow.removeSelf(),this.sp3d&&this.sp3d.removeSelf(),Laya.Pool.recover(Xe.TAG+this.sysEnemy.enemymode,this),Ae.addEffect(this),He.ins.app(this.sp3d.url)}clear(){Ft.selectHead.removeSelf(),Ft.selectFoot.removeSelf(),this.stopAi(),this._bulletShadow&&this._bulletShadow.removeSelf(),this.sp3d&&this.sp3d.removeSelf(),Laya.Pool.recover(Xe.TAG+this.sysEnemy.enemymode,this),He.ins.app(this.sp3d.url)}static getMonster(e,t,i,a,s){let n=u.tableManager.getDataByNameAndId(y.NAME,e);Ft.executor.getWorldNow();if(_.map[n.enemymode],!s&&(s=n.enemyHp,"0"!=n.skillId))for(var o=n.skillId.split(","),h=0;h<o.length;h++){let e=Number(o[h]);if(e>0){let t=u.tableManager.getDataByNameAndId(f.NAME,e);t.bulletType==Ue.SPLIT&&(s=n.enemyHp/t.splitNum)}}let r=Xe.TAG+n.enemymode;Ft.poolTagArr[r]=r;var l,p=Laya.Pool.getItemByClass(r,Xe);if(p.curLen=p.moveLen=0,p.sysEnemy=n,p.init(),!p.sp3d){var d=Laya.Sprite3D.instantiate(Laya.loader.getRes("h5/monsters/"+n.enemymode+"/monster.lh"));He.ins.add(d.url),p.setSp3d(d,.8*ti.ww)}p.hurtValue=n.enemyAttack,n.moveType>0&&(l=Laya.ClassUtils.getClass(Ve.TAG+n.moveType),p.setGameMove(new l));let c=n.zoomMode/100;c=a||c,p.tScale=c,p.sp3d.transform.localScaleX=c,p.sp3d.transform.localScaleY=c,p.sp3d.transform.localScaleZ=c,Ft.map0.Eharr.push(p.hbox),Ft.map0.Fharr.push(p.hbox),p.setShadowSize(n.zoomShadow),p.setXY2DBox(t,i),p.initBlood(s);var g=Laya.ClassUtils.getClass(Ue.TAG+n.enemyAi);return console.log("当前怪的AI",n.id,n.enemymode,n.txt,n.enemyAi,g,l),p.setGameAi(new g(p)),p.startAi(),Ft.layer3d.addChild(p.sp3d),p}}Xe.TAG="Monster_";class ze{constructor(e){this.cd=0,this.sysBullet=e}exeSkill(e,t){return!1}}class Ge extends ze{constructor(e){super(e)}exeSkill(e,t){return this.pro=t,t.splitTimes<this.sysBullet.splitNum&&(this.onDieSplit(),!0)}onDieSplit(){console.log("分裂");let e=this.pro.splitTimes+1,t=this.pro.gamedata.maxhp/2,i=Ft.getRandPos(this.pro,1),a=i[0]*ti.ww,s=i[1]*ti.ww,n=Xe.getMonster(this.pro.sysEnemy.id,a,s,.8,t);n.splitTimes=e,n.acstr="",n.play(X.Idle);let o=Ft.getRandPos(this.pro,1),h=o[0]*ti.ww,r=o[1]*ti.ww,l=Xe.getMonster(this.pro.sysEnemy.id,h,r,.8,t);l.splitTimes=e,l.acstr="",l.play(X.Idle)}}class je extends X{constructor(e){if(super(),this.skillISbs=[],this.now=0,this.shaders=0,this.collisionCd=0,this.stiff=500,this.pro=e,this.sysEnemy=this.pro.sysEnemy,this.normalSb=null,this.sysEnemy.normalAttack>0&&(this.normalSb=u.tableManager.getDataByNameAndId(f.NAME,this.sysEnemy.normalAttack)),this.skillISbs=[],"0"!=this.sysEnemy.skillId)for(var t=this.sysEnemy.skillId.split(","),i=0;i<t.length;i++){let e=Number(t[i]);if(e>0){let t=u.tableManager.getDataByNameAndId(f.NAME,e);this.skillISbs.push(t),t.bulletType==Ue.SPLIT&&(this.splitSkill=new Ge(t))}}if(this.sysEnemy.enemyBlack>0){let e=Laya.ClassUtils.getClass("HIT_"+this.sysEnemy.enemyBlack);this.g2=new e}}checkHeroCollision(){if(!(this.pro.gamedata.hp<=0)){var e=Ft.executor.getWorldNow();N.faceToLenth(this.pro.hbox,Ft.hero.hbox)<ti.ww2&&e>this.collisionCd&&Ft.hero.hbox.linkPro_&&(this.pro.hurtValue=150,Ft.hero.hbox.linkPro_.event(Ft.Event_Hit,this.pro),this.collisionCd=e+2e3)}}setShader(){if(this.shaders>0&&this.now>=this.shaders){this.shaders=0;var e=this.pro;if(_.map[e.sysEnemy.enemymode])_.map[e.sysEnemy.enemymode].setShader0(this.pro.sp3d,0)}}exeAI(e){return!(this.pro.gamedata.hp<=0)&&(!!this.run_&&(this.now=Ft.executor.getWorldNow(),this.setShader(),this.hitEffect(),!1))}hitEffect(){this.g2&&this.g2.ai(this.pro)}starAi(){this.run_=!0,this.pro.play(X.Idle)}stopAi(){this.run_=!1}setCrit(e,t){let i=Ft.skillManager.isHas(t);if(i){let t=u.tableManager.getDataByNameAndId(Pe.NAME,i.skillEffect1);if(t){let i=t.addCrit/1e3;if(1-Math.random()>i)return e.hurtValue=Math.floor(1.5*e.hurtValue+e.hurtValue*(t.addHurt/1e3)),!0}}return!1}setBoomHead(){let e=Ft.skillManager.isHas(1007);if(e){let t=e.skillcondition.split(","),i=Number(t[0]),a=Number(t[1]);this.pro.gamedata.hp/this.pro.gamedata.maxhp<i/100&&1-Math.random()>a/100&&(this.pro.hurtValue=this.pro.gamedata.hp,console.log("爆头了"))}}hit(e,t=!1){if(this.pro.gamedata.hp<=0)return;let i=this.setCrit(e,3006),a=this.setCrit(e,3007);if(this.setBoomHead(),e.buffAry.length>0)for(let t=0;t<e.buffAry.length;t++){let i=e.buffAry[t];-1==this.pro.buffAry.indexOf(i)&&(Ft.buffM.addBuff(e.buffAry[t],this.pro,e),this.pro.buffAry.push(i))}if(this.pro.hurt(e.hurtValue,i||a,t),this.pro.gamedata.hp<=0)this.die();else{if(0!=this.sysEnemy.enemyAi&&(this.pro.acstr!=X.Idle&&this.pro.acstr!=X.Run||this.pro.play(X.TakeDamage)),t)return;if(this.stiffTime=this.now,this.g2&&this.g2.isOk()&&!this.pro.unBlocking){if(5!=this.sysEnemy.moveType){var s=e.face3d+Math.PI;this.pro.rotation(s)}0==this.g2.starttime&&(this.g2.starttime=this.now,this.g2.now=this.now,this.g2.playtime=200)}var n=this.pro;if(_.map[n.sysEnemy.enemymode]){_.map[n.sysEnemy.enemymode].setShader0(this.pro.sp3d,1);var o=Ft.executor.getWorldNow();this.shaders=o+250}}}die(){this.setShader();let e=this.sysEnemy.dropGold;e>0&&Ee.addEffect(this.pro,Math.floor(.5*e),Te.TYPE_COIN),Ft.battleCoins+=e,this.splitSkill&&this.splitSkill.exeSkill(this.now,this.pro),this.pro.die(),this.g2=null}}class Oe extends je{constructor(e){super(e),this.cd=0,this.status=0,e.setSpeed(this.sysEnemy.moveSpeed),Oe.timdex>=3&&(Oe.timdex=0),this.cd=Ft.executor.getWorldNow()+500*Oe.timdex,Oe.timdex++}exeAI(e){if(this.run_&&(super.exeAI(e),this.checkHeroCollision(),!this.pro.isIce)){if(0==this.status&&this.now>=this.cd){this.status=1,this.cd=this.now+this.sysEnemy.enemySpeed;let e=Math.floor(12*Math.random());this.pro.rotation(Math.PI/8*Oe.dirs[e]),this.pro.play(X.Run)}else 1==this.status&&this.now>=this.cd&&(this.status=0,this.cd=this.now+this.sysEnemy.enemySpeed,this.pro.play(X.Idle));1==this.status&&this.pro.move2D(this.pro.face2d)}}exeAI0(e){if(this.run_){if(super.exeAI(e),this.checkHeroCollision(),0==this.status&&this.now>=this.cd){this.cd=this.now+this.sysEnemy.enemySpeed,this.status=1;let e=Ft.getRandPos(this.pro),a=e[0]*ti.ww,s=e[1]*ti.ww;this.pro.curLen=0,this.pro.moveLen=Math.sqrt((this.pro.hbox.y-s)*(this.pro.hbox.y-s)+(this.pro.hbox.x-a)*(this.pro.hbox.x-a));var t=a-this.pro.hbox.x,i=this.pro.hbox.y-s;this.pro.rotation(Math.atan2(i,t))}else 1==this.status&&this.now>=this.cd&&(this.cd=this.now+this.sysEnemy.enemySpeed,this.status=0);1==this.status&&this.pro.move2D(this.pro.face2d)}}}Oe.timdex=0,Oe.dirs=[1,2,3,5,6,7,9,10,11,13,14,15];class Fe extends W{move2d(e,t,i){if(!(t.gamedata.hp<=0)){var a=t.speed*Math.cos(e),s=t.speed*Math.sin(e);if(t instanceof Xe){if(Ft.map0.chechHit(t,a,s)){if(0!=s&&Ft.map0.chechHit(t,a,0)&&(a=0,s=(s<0?-1:1)*t.speed,t.getGameAi()instanceof Oe)){let e=Math.floor(12*Math.random());t.rotation(Math.PI/8*Oe.dirs[e])}if(0!=a&&Ft.map0.chechHit(t,0,s)&&(s=0,a=(a<0?-1:1)*t.speed,t.getGameAi()instanceof Oe)){let e=Math.floor(12*Math.random());t.rotation(Math.PI/8*Oe.dirs[e])}if(Ft.map0.chechHit(t,a,s)){if(t.getGameAi()instanceof Oe){let e=Math.floor(12*Math.random());t.rotation(Math.PI/8*Oe.dirs[e])}return!1}}}else if(Ft.map0.chechHit(t,a,s)&&(0!=s&&Ft.map0.chechHit(t,a,0)&&(a=0,s=(s<0?-1:1)*t.speed),0!=a&&Ft.map0.chechHit(t,0,s)&&(s=0,a=(a<0?-1:1)*t.speed),Ft.map0.chechHit(t,a,s)))return!1;return!!this.Blocking(t,a,s)&&(t.setXY2D(t.pos2.x+a,t.pos2.z+s),!0)}}}class We extends X{constructor(e){super(),this.i=0,this.pro=e}hit(e){this.pro.die()}exeAI(e){return!e.isDie&&(0!=this.i||e.move2D(e.face2d)?void(this.i>0&&(this.i++,this.i)):(this.i=1,!1))}starAi(){this.i=0}stopAi(){this.i=0}}class qe extends W{constructor(){super(...arguments),this.future=new N(2,2),this.speed=0,this.sp=new Laya.Point,this.st=0,this.n=0,this.cos=0,this.sin=0,this.arrowlen=10,this.line=new B(0,0,0,this.arrowlen),this.vv=new B(0,0,0,1),this.fv=null,this.ii=1}move2d(e,t,i,a){if(t.isDie)return!1;if(0==i)return!1;null!=this.fv&&(t.rotation(2*Math.PI-this.fv.atan2()),e=t.face2d,t.setcXcY2DBox(this.fv.x1,this.fv.y1),this.fv=null);var s=Ft.executor.getWorldNow();this.speed==i&&this.n==e||(this.sp.x=t.hbox.x,this.sp.y=t.hbox.y,this.st=s,this.n=e,this.sin=Math.sin(e),this.cos=Math.cos(e),this.speed=i);var n=Ft.map0.Eharr;if(t.hit_blacklist){var o=[];for(let e=0;e<n.length;e++){var h=n[e];t.checkBlackList(h)||o.push(h)}n=o}var r=t.hbox,l=this.line;l.reset00(r.cx,r.cy),l.rad(e);var p=this.vv;r=this.future.setRq(l.x1-ti.mw4,l.y1-ti.mw4,ti.mw2,ti.mw2);var d=Ft.map0.chechHit_arr(this.future,n);if(d)return 0!=this.hitEnemy(d,t);if(r=this.future.setVV(l.x0,l.y0,l.x_len,l.y_len),c=Ft.map0.chechHit_arr_all(this.future,n)){if(p.reset(l.x0,l.y0,l.x1,l.y1),(m=Ft.map0.getPointAndLine(p,c))&&(d=m[2]))return 0!=this.hitEnemy(d,t);if(r=this.future.setVV(l.x1,l.y1,g,u),c=Ft.map0.chechHit_arr_all(this.future,n))if(p.reset(l.x0,l.y0,l.x1,l.y1),(m=Ft.map0.getPointAndLine(p,c))&&(d=m[2]))return 0!=this.hitEnemy(d,t)}n=Ft.map0.Aharr;var c,g=t.speed*Math.cos(e),u=t.speed*Math.sin(e);if(r=this.future.setVV(l.x1,l.y1,g,u),p.reset(l.x1,l.y1,l.x1+g,l.y1+u),c=Ft.map0.chechHit_arr_all(this.future,n)){var m;if(m=Ft.map0.getPointAndLine(p,c)){var y=m[0],w=m[1];p.reset(p.x0,p.y0,y.x,y.y),t.setXY2D(t.pos2.x+p.x_len,t.pos2.z+p.y_len),(w=p.rebound(w))&&w.resetlen(this.arrowlen)}if(t.fcount--,t.fantanSkill&&(t.hurtValue=Math.floor(t.hurtValue*t.fantanSkill.damagePercent/100)),this.fv=w,t.fcount<=0)return t.die(),!1}return t.setXY2D(t.pos2.x+g,t.pos2.z+u),(Math.abs(t.pos2.x)>ti.ww*ti.MAP_COL||Math.abs(t.pos2.z)>ti.ww*ti.MAP_ROW)&&t.die(),!0}sore0(e,t){return this.he_?N.faceToLenth(this.he_,e)-N.faceToLenth(this.he_,t):0}hitEnemy(e,t){if(e.linkPro_.event(Ft.Event_Hit,t),t.tansheSkill&&this.ii>0){t.hit_blacklist||(t.hit_blacklist=[]),t.hit_blacklist.push(e),this.ii--,t.tansheSkill?t.hurtValue=Math.floor(t.hurtValue*t.tansheSkill.damagePercent/100):t.chuantouSkill&&(t.hurtValue=Math.floor(t.hurtValue*t.chuantouSkill.damagePercent/100));let a=Ft.map0.Eharr;for(let s=0;s<a.length;s++){let n=a[s];if(n!=e){t.setXY2D(e.linkPro_.pos2.x,e.linkPro_.pos2.z);var i=N.faceTo3D(t.hbox,n);return t.rotation(i),1}}return t.die(),0}return t.chuantouSkill?(t.die(),0):(t.hit_blacklist||(t.hit_blacklist=[]),t.hit_blacklist.push(e),t.die(),0)}}class Ke extends j{constructor(){super(Y.HeroArrow),this.buffAry=[],this.fcount=0,this.setGameMove(new qe),this.setGameAi(new We(this))}setBullet(e){if(this.sp3d||(this.setSp3d(Laya.Sprite3D.instantiate(Laya.loader.getRes("h5/bullets/"+e+"/monster.lh"))),console.log("创建主角的子弹")),Ft.skillManager.arrowHeadId>0&&!this.head){let e=Laya.loader.getRes("h5/bullets/skill/"+Ft.skillManager.arrowHeadId+"/monster.lh");e&&(this.head=Laya.Sprite3D.instantiate(e),this.head.transform.localRotationEulerY=-180,this.addSprite3DToChild("Gua",this.head))}}static getBullet(e){let t=Laya.Pool.getItemByClass(Ke.TAG,Ke);t.hit_blacklist=null,t.getGameMove().fv=null,t.getGameMove().ii=1,t.chuantouSkill=null,t.fantanSkill=null,t.fcount=0,t.tansheSkill=null,t.buffAry.length=0,t.isDie=!1,t.setBullet(e),t.chuantouSkill=Ft.skillManager.isHas(1006),t.fantanSkill=Ft.skillManager.isHas(1008),t.fcount=t.fantanSkill?2:0,t.tansheSkill=Ft.skillManager.isHas(1009);let i=[2001,2002,2003,5001,5002,5003,5004];for(let e=0;e<i.length;e++)Ft.skillManager.isHas(i[e])&&t.buffAry.push(i[e]);return t}die(){this.isDie||(this.isDie=!0,this.stopAi(),this.setSpeed(0),this.sp3d.parent&&this.sp3d.parent.removeChild(this.sp3d),Laya.Pool.recover(Ke.TAG,this))}}Ke.TAG="HeroBullet";class Ze{constructor(){this.id=0,this.skillName="",this.skillInfo="",this.skillType=0,this.triggerComparison=0,this.skilltarget=0,this.skillcondition="",this.damagePercent=0,this.skillEffect1=0,this.upperLimit=0,this.curTimes=0}static reset(){let e=u.tableManager.getTable(Ze.NAME);for(let t=0;t<e.length;t++)e[t].curTimes=0}}Ze.NAME="sys_roleskill.txt";class Je extends W{constructor(){super(...arguments),this.future=new N(2,2),this.angle=0,this.zhuanLine=new B(0,0,3*ti.ww,0),this.cd=0}move2d(e,t,i){this.angle+=5,this.angle>360&&(this.angle=0);let a=this.angle/180*Math.PI;if(this.zhuanLine.rad(e+a),t.setXY2D(Ft.hero.pos2.x+this.zhuanLine.x_len,Ft.hero.pos2.z+this.zhuanLine.y_len),Ft.executor.getWorldNow()>this.cd){var s=Ft.map0.chechHit_arr(t.hbox,Ft.map0.Eharr);s&&s.linkPro_&&(s.linkPro_.event(Ft.Event_Hit,t),t.event(Ft.Event_Hit,s.linkPro_),this.cd=Ft.executor.getWorldNow()+1e3)}return!0}}class Qe extends j{constructor(){super(Y.HeroArrow),this.setGameMove(new Je)}static getBullet(e){let t=new Qe;return t.setSp3d(Laya.Sprite3D.instantiate(Laya.loader.getRes("h5/bullets/"+e+"/monster.lh"))),t.sp3d.transform.localPositionY=1,t.sp3d.transform.localRotationEulerX=45,t}}Qe.TAG="HeroBullet";class $e extends Laya.Box{constructor(){super(),this.lastTime=0,this.hbox=new N(ti.ww,ti.ww),this.inDanger=!1,this.cd=1500,this.diciPro=new j(8,0),this.diciPro.hurtValue=150,this.img1=new Laya.Image,this.img1.skin="bg/500.png",this.img0=new Laya.Image,this.img0.skin="bg/500_0.png",this.addChild(this.img1),this.addChild(this.img0),this.on(Laya.Event.DISPLAY,this,this.onDis),this.on(Laya.Event.UNDISPLAY,this,this.onUnDis)}static getOne(){let e=Laya.Pool.getItemByClass($e.TAG,$e);return $e.arr.push(e),e}static recover(){for(;$e.length>0;){let e=$e.arr.shift();e.removeSelf(),Laya.Pool.recover($e.TAG,e)}}onDis(){this.inDanger=!1,this.img1.removeSelf(),this.img0.removeSelf(),this.addChild(this.img0),Laya.timer.frameLoop(1,this,this.onLoop),this.onLoop()}onLoop(){let e=Ft.executor.getWorldNow();e>this.lastTime&&(this.inDanger=!this.inDanger,this.lastTime=e+this.cd,this.inDanger?(this.img0.removeSelf(),this.addChild(this.img1)):(this.img1.removeSelf(),this.addChild(this.img0)))}onUnDis(){this.inDanger=!1,Laya.timer.clear(this,this.onLoop),this.img1.removeSelf(),this.img0.removeSelf()}}$e.TAG="GameThorn",$e.arr=[];class et extends X{constructor(){super(),this.shootin=et.shoot,this.skillDic={}}set run(e){this.run_!=e&&(this.run_=e,this.run_?(this.stopAi(),Ft.hero.play(X.Run)):(Ft.hero.play(X.Idle),this.starAi()))}hit(e){Ft.hero.isWudi||(Ft.hero.gamedata.hp>0&&Ft.hero.hurt(e.hurtValue,!1),Ft.hero.gamedata.hp<=0&&(Ft.hero.die(),this.run_=!1))}starAi(){Ft.hero.gamedata.hp<=0||(Ft.map0.Eharr.length>1&&Ft.map0.Eharr.sort(this.sore0),Ft.map0.Eharr.length>0&&Ft.selectEnemy(Ft.map0.Eharr[0].linkPro_),Ft.hero.on(Ft.Event_Short,this,this.short),this.shootin.at=.6,this.shootin.now=Ft.executor.getWorldNow())}rotateBullet(){let e,t,i=Ft.skillManager.getRotateSkills(),a=Math.PI/i.length;for(let s=0;s<i.length;s++)t=i[s],(e=this.skillDic[t+"_1"])||(this.skillDic[t+"_1"]=Qe.getBullet(t)),e=this.skillDic[t+"_1"],Ft.layer3d.addChild(e.sp3d),e.move2D(a*s),(e=this.skillDic[t+"_2"])||(this.skillDic[t+"_2"]=Qe.getBullet(t)),e=this.skillDic[t+"_2"],Ft.layer3d.addChild(e.sp3d),e.move2D(Math.PI+a*s)}short(e){if(Ft.e0_){var t=N.faceTo3D(Ft.hero.hbox,Ft.e0_.hbox);Ft.hero.rotation(t)}if(e==X.closeCombat)return Ft.playSound("fx_hit.wav"),void(Ft.e0_&&(Ft.hero.hurtValue=Math.floor(1.5*it.curHeroData.atk),Ft.e0_.hbox.linkPro_.event(Ft.Event_Hit,Ft.hero)));Ft.playSound("fx_shoot.wav");let i=it.curHeroData.atk;if(Ft.skillManager.isHas(3008)){let e=(Ft.hero.gamedata.maxhp-Ft.hero.gamedata.hp)/Ft.hero.gamedata.maxhp;i=Math.floor(Ft.skillManager.addAttack()*(1+e))}this.onShoot(i);let a=Ft.skillManager.isHas(1005);a&&(1==a.curTimes?Laya.timer.frameOnce(15,this,()=>{this.onShoot(i*a.damagePercent/100)}):(Laya.timer.frameOnce(15,this,()=>{this.onShoot(i*a.damagePercent/100)}),Laya.timer.frameOnce(30,this,()=>{this.onShoot(i*a.damagePercent/100)})))}onShoot(e){let t=ti.ww/2,i=(Ft.skillManager.skillList.length,Ft.skillManager.isHas(1001));i?(this.line||(this.line=new B(0,0,ti.mw2,0)),this.line.rad(Ft.hero.face2d+Math.PI/2),this.shootin.short_arrow(t,Ft.hero.face3d,Ft.hero,e*i.damagePercent/100).setXY2D(Ft.hero.pos2.x+this.line.x_len,Ft.hero.pos2.z+this.line.y_len),this.line.rad(Ft.hero.face2d-Math.PI/2),this.shootin.short_arrow(t,Ft.hero.face3d,Ft.hero,e*i.damagePercent/100).setXY2D(Ft.hero.pos2.x+this.line.x_len,Ft.hero.pos2.z+this.line.y_len),i.curTimes>=2&&this.shootin.short_arrow(t,Ft.hero.face3d,Ft.hero,e*i.damagePercent/100)):this.shootin.short_arrow(t,Ft.hero.face3d,Ft.hero,e);let a=Ft.skillManager.isHas(1002);a&&this.shootin.short_arrow(t,Ft.hero.face3d+Math.PI,Ft.hero,e*a.damagePercent/100);let s=Ft.skillManager.isHas(1003);if(s){let i=1==s.curTimes?90:120,a=2*s.curTimes,o=(i/=a)/180*Math.PI,h=Math.floor(a/2);for(var n=1;n<=h;n++)this.shootin.short_arrow(t,Ft.hero.face3d+o*n,Ft.hero,e*s.damagePercent/100),this.shootin.short_arrow(t,Ft.hero.face3d-o*n,Ft.hero,e*s.damagePercent/100)}let o=Ft.skillManager.isHas(1004);o&&(this.shootin.short_arrow(t,Ft.hero.face3d+.5*Math.PI,Ft.hero,e*o.damagePercent/100),this.shootin.short_arrow(t,Ft.hero.face3d-.5*Math.PI,Ft.hero,e*o.damagePercent/100))}stopAi(){this.shootin.cancelAttack(),Ft.hero.off(Ft.Event_Short,this,this.short)}exeAI(e){if(1==Me.guideId||2==Me.guideId)return;var t=Ft.executor.getWorldNow();if(Ft.bg.checkNpc(),Ft.hero.isIce)return;if(this.rotateBullet(),!Ft.skillManager.isHas(5007)&&$e.arr.length>0)for(var i=0;i<$e.arr.length;i++){let a=$e.arr[i],s=a.hbox;a.inDanger&&Ft.hero.hbox.hit(Ft.hero.hbox,s)&&t>s.cdTime&&(e.event(Ft.Event_Hit,a.diciPro),s.cdTime=t+2e3)}if(Me.homeData.isGuide&&3==Me.guideId&&Ft.map0.guideHitBox&&Ft.hero.hbox.hit(Ft.hero.hbox,Ft.map0.guideHitBox))return Ft.scenneM.battle&&Ft.scenneM.battle.up(null),Ft.scenneM.battle.setGuide("主角会自动攻击，移动中不会攻击。",2),u.sdkManager.log(r.BATTLE_GUIDE_3),Ft.map0.guideHitBox=null,!1;if(!this.run_){if(Me.homeData.isGuide&&3==Me.guideId)return!1;if(Ft.map0.Eharr.length>0){if(this.shootin.attackOk()){var a=N.faceTo3D(e.hbox,Ft.e0_.hbox),s=2*Math.PI-a;if(Ft.e0_.gamedata.hp>0&&this.shootin.checkBallistic(s,Ft.hero,Ft.e0_))return e.rotation(a),this.starAttack();if(Ft.map0.Eharr.length>1){Ft.map0.Eharr.sort(this.sore0);var n=Ft.map0.Eharr;for(let t=0;t<n.length;t++){var o=n[t];if(o.linkPro_!=Ft.e0_){a=N.faceTo3D(e.hbox,o),s=2*Math.PI-a;if(this.shootin.checkBallistic(s,Ft.hero,o.linkPro_))return Ft.selectEnemy(o.linkPro_),e.rotation(a),this.starAttack()}}}Ft.selectEnemy(Ft.map0.Eharr[0].linkPro_);a=N.faceTo3D(e.hbox,Ft.e0_.hbox);e.rotation(a),this.starAttack()}}else 1==Ft.TestShooting&&this.shootin.attackOk()&&this.starAttack();return!0}this.moves()}starAttack(){let e="";return e=N.faceToLenth(Ft.hero.hbox,Ft.e0_.hbox)<=3*ti.ww?X.closeCombat:X.NormalAttack,this.shootin.starAttack(Ft.hero,e)}sore0(e,t){return N.faceToLenth(Ft.hero.hbox,e)-N.faceToLenth(Ft.hero.hbox,t)}move2d(e){Ft.hero.move2D(e),Ft.bg.updateY()}moves(){let e;var t=Ft.ro.getSpeed();e=Ft.ro.getA3d(),Ft.ro.rotate(e),t>0&&(Ft.hero.rotation(e),this.move2d(Ft.ro.getA()))}}et.shoot=new class{constructor(){this.scd=0,this.st=0,this.et=0,this.now=0,this.at=0,this.future=new N(2,2)}short_arrow(e,t,i,a,s=2e4){let n=Ke.getBullet(s);for(let e=0;e<n.buffAry.length;e++)a=a*u.tableManager.getDataByNameAndId(Ze.NAME,n.buffAry[e]).damagePercent/100;return n.hurtValue=Math.floor(a),n.sp3d.transform.localPositionY=.8,n.setXY2D(i.pos2.x,i.pos2.z),n.setSpeed(e),n.rotation(t),n.gamedata.bounce=i.gamedata.bounce,n.startAi(),Ft.layer3d.addChild(n.sp3d),n}attackOk(){return this.now=Ft.executor.getWorldNow(),this.now>=this.st}starAttack(e,t){return this.pro=e,this.curAttack=t,!!this.attackOk()&&(this.st=Ft.executor.getWorldNow()+it.curHeroData.atkSpeed,this.scd=0,this.pro.play(t),this.at>0?Laya.stage.timer.frameLoop(this.at,this,this.ac0):this.ac0(),!0)}cancelAttack(){this.st=this.et,this.scd=0,Laya.stage.timer.clear(this,this.ac0)}ac0(){this.pro.normalizedTime>=this.at&&(this.pro.normalizedTime>=1&&(Laya.stage.timer.clear(this,this.ac0),this.pro.play(X.Idle)),0==this.scd&&(this.scd=1,this.st=Ft.executor.getWorldNow()+it.curHeroData.atkSpeed,this.pro.event(Ft.Event_Short,this.curAttack),this.et=this.st))}checkBallistic(e,t,i){var a=ti.mw2*Math.cos(e),s=ti.mw2*Math.sin(e),n=t.hbox.cx,o=t.hbox.cy;for(let e=0;e<6e3;e++){if(this.future.setVV(n,o,a,s),i.hbox.hit(i.hbox,this.future))return i;var h=Ft.map0.Aharr;if(Ft.map0.chechHit_arr(this.future,h))return null;n+=a,o+=s}return null}};class tt extends Laya.Script3D{constructor(){super()}onAwake(){this.box=this.owner}onStart(){}onUpdate(){Ft.executor.isRun&&(this.box.transform.localRotationEulerY+=3)}onDisable(){}}class it extends j{constructor(){super(Y.Hero,0),this.isWudi=!1,this.isNew=!0,this.busi=!1,this.lastTime=0,this.resetBlood(),this.resetSkill(),this.unBlocking=!0,this.setGameMove(new Fe),this.setGameAi(new et)}static udpateHeroData(){it.curHeroData=Me.heroData.getHeroData(Me.heroData.nowRoleId)}addBuff(e){-1==this.buffAry.indexOf(e)&&(Ft.buffM.addBuff(e,this),this.buffAry.push(e))}lossBlood(){return(this.gamedata.maxhp-this.gamedata.hp)/this.gamedata.maxhp}changeBlood(e){let t=u.tableManager.getDataByNameAndId(Pe.NAME,e.skillEffect1);if(t){if(4002==e.id||4004==e.id)return this.addBlood(Math.floor(this.gamedata.maxhp*t.addHp/1e3)),!0;if(4003==e.id)return this.changeMaxBlood(t.hpLimit/1e3),!0}return!1}changeMaxBlood(e){e>0&&(this.gamedata.hp=this.gamedata.hp+Math.floor(this.gamedata.maxhp*e)),this.gamedata.maxhp=Math.floor(this.gamedata.maxhp*(1+e)),this.gamedata.hp>=this.gamedata.maxhp&&(this.gamedata.hp=this.gamedata.maxhp),this.initBlood(this.gamedata.hp)}addBlood(e){this.gamedata.hp=this.gamedata.hp+e,this.gamedata.hp=Math.min(this.gamedata.hp,this.gamedata.maxhp),this.initBlood(this.gamedata.hp),G.add("+"+e,this._bloodUI,!1,"main/greenFont.png"),this._addEff||(this._addEff=new I.game.addBloodEffUI),this._bloodUI.addChild(this._addEff),this._addEff.ani.play(0,!1),setTimeout(()=>{this._addEff&&this._addEff.removeSelf()},300)}resetBlood(){this.gamedata.hp=this.gamedata.maxhp=it.curHeroData.hp}resetSkill(){this.buffAry.length=0,Ft.skillManager.clear(),Ft.skillManager.addSkill(u.tableManager.getDataByNameAndId(Ze.NAME,it.curHeroData.initSkillId))}resetAI(){this.getGameAi().run=!1}setWudi(e){if(this.isWudi!=e)if(this.isWudi=e,e){if(!this.wudi){let e=Laya.loader.getRes("h5/bullets/skill/5009/monster.lh");e&&(this.wudi=e,this.wudi.transform.localPositionY=-.5,this.wudi.addComponent(tt))}this.sp3d.addChild(this.wudi)}else this.wudi&&this.wudi.removeSelf()}init(){if(Ft.battleLoader.continueRes){Ft.hero.gamedata.hp=Ft.battleLoader.continueRes.curhp,Ft.hero.gamedata.maxhp=Ft.battleLoader.continueRes.maxhp;let e=Ft.battleLoader.continueRes.skills;if(e.length>0){let t=e.split(",");for(let e=0;e<t.length;e++){let i=t[e].split("_");if(2==i.length){let e=u.tableManager.getDataByNameAndId(Ze.NAME,Number(i[0]));e.curTimes=Number(i[1]),Ft.skillManager.addSkill(e)}}}}this.isDie=!1,this.setKeyNum(1),this.acstr="";let e=Laya.loader.getRes("h5/hero/"+Me.heroData.nowRoleId+"/hero.lh");Ft.layer3d.addChild(e);e.transform.localScaleX=1.4,e.transform.localScaleY=1.4,e.transform.localScaleZ=1.4,this.setSp3d(e),this.play("Idle"),this.setSpeed(it.curHeroData.moveSpeed),console.log("玩家移动速度",it.curHeroData.moveSpeed),this.pos2.x=this.pos2.z=0,this.sp3d.transform.localPositionX=0,this.sp3d.transform.localPositionY=0,this.sp3d.transform.localPositionZ=0,console.log("出生位置",it.bornX,it.bornY),this.setXY2DBox(it.bornX,it.bornY),this.initBlood(this.gamedata.hp),this.addFootCircle(),Ft.map0.Hharr.push(this.hbox),this.gamedata.rspeed=0,this.rotation(.5*Math.PI),setTimeout(()=>{this.onJumpDown()},600),Laya.stage.on(Ft.Event_ADD_HP,this,this.addBlood),this.updateUI()}initBlood(e){super.initBlood(e,this.gamedata.maxhp),this._bloodUI&&this._bloodUI.pos(this.hbox.cx,this.hbox.cy-120)}updateUI(){super.updateUI(),this._bloodUI&&this._bloodUI.pos(this.hbox.cx,this.hbox.cy-120),this._footCircle&&this._footCircle.pos(this.hbox.cx,this.hbox.cy),this._footCircle&&(this._footCircle.dir.rotation=180*this.face2d/Math.PI+90)}onJumpDown(){this.gamedata.rspeed=20,this.startAi(),Ft.executor.start(),console.log("主角调下来",Ft.AiArr.length)}hurt(e,t){if(this.busi)return;e=Math.floor(e*(1-it.curHeroData.def));let i=!1,a=Ft.skillManager.isHas(5006);if(a){let e=u.tableManager.getDataByNameAndId(Pe.NAME,a.skillEffect1);if(e){let t=e.addMiss/1e3;1-Math.random()>t&&(i=!0,console.log(a.skillName))}}i||(super.hurt(e,t),Ye.addEffect(this))}die(){this.isDie||(this.isDie=!0,this.setKeyNum(1),this.once(Ft.Event_KeyNum,this,this.onDie),setTimeout(()=>{this.play(X.Die)},300))}reborn(){Ft.rebornTimes--,Ft.skillManager.removeSkill(4005),this.isDie=!1,this.setKeyNum(1),this.acstr="",this.resetBlood(),this.initBlood(Ft.hero.gamedata.hp),this.play("Idle"),this.startAi(),Ft.executor&&Ft.executor.start(),this.setWudi(!0),setTimeout(()=>{this.setWudi(!1)},2e3),u.sdkManager.log(r.REBORTH_SUCCESS)}onDie(e){Ft.skillManager.isHas(4005)?setTimeout(()=>{this.reborn()},800):(this.stopAi(),Ft.executor&&Ft.executor.stop_(),console.log("全部暂停"),Laya.stage.event(Ft.Event_MAIN_DIE))}pos2To3d(){if(super.pos2To3d(),Laya.Browser.now()-this.lastTime>=300){var e=at.create(this.hbox.cx,this.hbox.cy);Laya.Tween.to(e,{scaleX:0,scaleY:0,alpha:0},600,null,new Laya.Handler(this,this.onClear,[e])),this.lastTime=Laya.Browser.now()}}onClear(e){at.recover(e)}}class at extends Laya.Image{constructor(){super(),this.skin="bg/renyan.png",this.size(64,64),this.anchorX=.5,this.anchorY=.5}static create(e,t){var i=Laya.Pool.getItemByClass(at.flag,at);return i.pos(e,t),Ft.footLayer.addChild(i),i}static recover(e){e.removeSelf(),e.alpha=1,e.scale(1,1),Laya.Pool.recover(at.flag,e)}}at.flag="RunSmog";class st extends I.test.worldCellUI{constructor(){super(),this.sys1=null,this.clickBox.on(Laya.Event.CLICK,this,this.onClick),this.suo.visible=!1,st.clickCell=this}onClick(){st.clickCell=this,this.suo.visible?l.setTips("未开启"):(Ft.battleLoader.chapterId=this.sys.id,K.randomDiamond(Ft.battleLoader.chapterId),Ft.battleCoins=0,Ft.battleExp=Ft.heroExp=0,it.udpateHeroData(),$.scaleEffect(this.mapBtn),Laya.stage.event(h.START_BATTLE))}update(e,t=!1){if(this.sys1=e,null==e)return this.openBox.visible=!1,this.noOpenImg.visible=!0,void(this.titleTxt.skin="chapters/wait_title.png");if(this.openBox.visible=!0,this.noOpenImg.visible=!1,this.sys=e,this.suo.visible=Me.homeData.chapterId<e.id,t&&(this.suo.visible=!1),this.mapBtn.gray=this.suo.visible,this.cengshuTxt.text="",this.titleTxt.skin="chapters/chapter_title_"+this.sys.id+".png",this.mapBtn.skin="chapters/chapter_img_"+this.sys.id+".png",this.box1.visible=!this.suo.visible,!this.suo.visible){let t=m.getTotal(this.sys.id);e.id==Me.homeData.chapterId?this.cengshuTxt.text="最高层数:"+Me.homeData.mapIndex+"/"+t:this.cengshuTxt.text="最高层数:"+t+"/"+t}}open(){(new Laya.Tween).to(this.suo,{scaleX:5,scaleY:5,alpha:0},600,null,new Laya.Handler(this,this.comfun))}comfun(){this.update(this.sys1)}}st.clickCell=null;class nt{constructor(){this.id=0,this.roleExp=0}static getMaxExpByLv(e){var t=u.tableManager.getDataByNameAndId(nt.NAME,e);return null==t?0:t.roleExp}static getLv(e){for(var t=0,i=1;i<=10;i++){var a=u.tableManager.getDataByNameAndId(nt.NAME,i);if(e<(t+=a.roleExp))return a.id}return 10}static getExpSum(e){for(var t=0,i=1;i<=e;i++)t+=nt.getMaxExpByLv(i);return t}}nt.NAME="sys_rolelevel.txt";class ot{constructor(){this.id=0,this.npcTxt="",this.skillId=0,this.skillRandom=""}}ot.NAME="sys_npc.txt";class ht extends I.test.alertUI{constructor(){super(),this.cancelBtn.clickHandler=new Laya.Handler(this,this.onCancel),this.sureBtn.clickHandler=new Laya.Handler(this,this.onSure)}onCancel(){this.removeSelf(),this.handler2&&this.handler2.run()}onSure(){this.handler&&this.handler.run(),this.removeSelf()}onShow(e,t,i=null,a="",s="提示"){this.txt.text=e,this.txt2.text=a,this.handler=t,this.handler2=i,u.layerManager.alertLayer.addChild(this)}}class rt{}rt.CURRENT_BATTLE="CURRENT_BATTLE",rt.MUSIC_SWITCH="MUSIC_SWITCH",rt.SOUND_SWITCH="SOUND_SWITCH",rt.USER_ID="USER_ID";class lt extends I.test.TimeGoldUI{constructor(){super(),$.rotation(this.light,5e3),this.LingBtn.on(Laya.Event.CLICK,this,this.normalClick),this.AdLingBtn.on(Laya.Event.CLICK,this,this.adClick),this.init(),this.v3bei.ani1.play(0,!0),this.on(Laya.Event.DISPLAY,this,this.onDis),this.on(Laya.Event.UNDISPLAY,this,this.onUndis)}onDis(){Laya.Browser.window.tt&&u.sdkManager.showBanner()}onUndis(){Laya.Browser.window.tt&&u.sdkManager.hideBanner()}adClick(){0!=Me.timeGoldData.gold?u.sdkManager.playAdVideo(t.AD_DIAMOND,new Laya.Handler(this,this.adFun)):this.close()}normalClick(){0!=Me.timeGoldData.gold?(re.open({type:A.GOLD,value:Me.timeGoldData.gold}),Me.timeGoldData.rewardGold(!1),this.init()):this.close()}adFun(e){0!=Me.timeGoldData.gold?1==e&&(re.open({type:A.GOLD,value:3*Me.timeGoldData.gold}),Me.timeGoldData.rewardGold(!0),this.init()):this.close()}init(){this.goldFc.value=Me.timeGoldData.gold+"",this.btn1Fc.value=Me.timeGoldData.gold+"",this.btn2Fc.value=3*Me.timeGoldData.gold+""}}class pt extends I.test.paihangUI{constructor(){super(),this.rankSkin=["paihang/yiming.png","paihang/erming.png","paihang/sanming.png"],this.list.vScrollBarSkin="",this.tab.selectHandler=new Laya.Handler(this,this.selectFun),this.tab.selectedIndex=-1,this.tab.selectedIndex=0,this.list.renderHandler=new Laya.Handler(this,this.renderFun),this.list.selectEnable=!0,this.list.selectHandler=new Laya.Handler(this,this.listSelectFun),0!=Laya.Browser.onMiniGame&&(u.sdkManager.haveRight||(this.tab.disabled=!0,Laya.timer.callLater(this,this.shouQuan)))}shouQuan(){u.sdkManager.addUserInfoBtn(this.tab,new Laya.Handler(this,this.useFun))}useFun(){Me.rankData.saveWorldRank(),this.tab.disabled=!1,this.tab.selectedIndex=1}listSelectFun(e){}renderFun(e,t){let i=this.list.getItem(t);e.goldFc.value=parseInt(i.score+"")+"",e.mingzi.text=i.name;let a=parseInt(i.rank);e.touxiang.skin=i.url,a<3?(e.fc1.visible=!1,e.paiming.visible=!0,e.paiming.skin=this.rankSkin[a]):(e.fc1.visible=!0,e.paiming.visible=!1,e.fc1.value=a+1+"")}selectFun(e){-1!=e&&this["tab"+e]()}tab0(){if(this.wxOpen.visible=!0,this.list.visible=!1,this.myText.visible=!1,0!=Laya.Browser.onMiniGame){var e={type:0};e.openId=Me.SKEY,Laya.Browser.window.wx.getOpenDataContext().postMessage(e)}}tab1(){this.list.array=[],this.wxOpen.visible=!1,this.list.visible=!0,this.myText.visible=!0,Me.rankData.getRank(this,this.rankFun)}rankFun(e){if(1!=this.tab.selectedIndex)return;let t=JSON.parse(e),i=t.my,a=t.list;this.list.array=a;let s=parseInt(i.rank)+1;this.myText.text="当前排名:"+s}sortList(e){e.sort(this.sortFun);for(let t=0;t<e.length;t++)e[t].rank=t}sortFun(e,t){return parseInt(t.score)-parseInt(e.score)}}class dt{constructor(){this.zipFun()}zipFun(){if(Ft.alert=new ht,Me.homeData.isGuide)Ft.battleLoader.preload(),Ft.battleLoader.load(),u.sdkManager.log(r.BATTLE_GUIDE_0);else{if(Ft.showMain(),Ft.battleLoader.preload(),u.sdkManager.log(r.SHOW_MAIN_VIEW),Me.homeData.newStat!=M.over)return;Ft.cookie.getCookie(rt.CURRENT_BATTLE,e=>{e&&Ft.alert.onShow("是否继续未完成的战斗?",new Laya.Handler(this,this.onContinue,[e]),new Laya.Handler(this,this.onCancel))})}}onCancel(){Ft.cookie.removeCookie(rt.CURRENT_BATTLE)}onContinue(e){Ft.battleLoader.load(e),console.log("继续战斗",e)}static initTable(e){u.tableManager.register(K.NAME,K),u.tableManager.register(m.NAME,m),u.tableManager.register(y.NAME,y),u.tableManager.register(f.NAME,f),u.tableManager.register(nt.NAME,nt),u.tableManager.register(Ze.NAME,Ze),u.tableManager.register(Pe.NAME,Pe),u.tableManager.register(ot.NAME,ot),u.tableManager.register(te.NAME,te),u.tableManager.register(De.NAME,De),u.tableManager.register(ie.NAME,ie),u.tableManager.register(Q.NAME,Q),u.tableManager.register(Ie.NAME,Ie),u.tableManager.register(fe.NAME,fe),u.tableManager.register(ve.NAME,ve),u.tableManager.onParse(e);let t="",i=u.tableManager.getTable(m.NAME),a=i.length;for(let e=0;e<a;e++){let a=i[e];t+=a.stageGroup+",",null==m.dic[a.stageId]&&(m.dic[a.stageId]=[]),m.dic[a.stageId].push(a)}for(let e in m.dic){m.dic[e].sort((e,t)=>e.id-t.id)}console.log(t)}static initDialog(){u.dialogManager.register(dt.TIME_GOLD,lt,["res/atlas/timegold.atlas"]),u.dialogManager.register(dt.RANK_DIALOG,pt,["res/atlas/paihang.atlas"])}}dt.TIME_GOLD="TIME_GOLD",dt.RANK_DIALOG="RANK_DIALOG";class ct{constructor(){this.disView=null}setUI(e){this.disView=e,this.disView.on(Laya.Event.UNDISPLAY,this,this.undisFun),this.disView.on(Laya.Event.DISPLAY,this,this.disFun),this.disFun()}disFun(){Laya.timer.frameLoop(1,this,this.loopFun)}undisFun(){Laya.timer.clear(this,this.loopFun)}loopFun(){let e=Me.timeGoldData.getNowTime();this.disView.timeFc.value=this.getString(e[0])+":"+this.getString(e[1]),this.disView.goldFc.value=Me.timeGoldData.gold+"";let t=(6e4-(1e3*e[2]+e[3]))/6e4*360-90,i=this.disView.shanbox;i.graphics.clear(),i.graphics.drawPie(i.width/2,i.height/2-2,35,-90,t,"#ffec1d")}getString(e){return e<10?"0"+e:e+""}}class gt{constructor(){this.flyNum=30,this.flySkin="main/jinbi.png",this.flyTargetHandler=null,this.x1=0,this.y1=0,this.ex=0,this.ey=0,this.goldEvery=0,this.nowGold=0,this.endOffX=0,this.endOffY=1}static getP00(){if(0==gt.p00Array.length)for(let e=0;e<50;e++){let e=new Laya.Point(0,0);gt.p00Array.push(e)}return gt.p00Index>49&&(gt.p00Index=0),gt.p00Array[gt.p00Index++].setTo(0,0)}fly(e,t){this.start=e,this.end=t;let i=this.start.localToGlobal(new Laya.Point(0,0));this.flyGold(i.x,i.y,1)}flyFromP(e,t,i,a,s,n){this.fc=n,this.end=i,this.x1=e,this.y1=t,this.nowGold=s;let o=i.localToGlobal(new Laya.Point(0,0));this.ex=o.x+this.endOffX,this.ey=o.y+this.endOffY,this.flyGold(0,0,a)}flyGold(e,t,i){let a=this.flyNum;this.goldEvery=i/a;for(let e=0;e<a;e++){let e=null;e=new Laya.Image(this.flySkin),Laya.stage.addChild(e),e.scaleX=1,e.scaleY=1,e.anchorX=e.anchorY=.5,e.x=this.x1+300*Math.random()-150,e.y=this.y1+100*Math.random()-50,e.alpha=0,this.flyEffect(e,this.goldEvery)}}flyEffect(e,t){new Laya.Point(this.x1,this.y1);let i=new Laya.Tween,a=1e3*Math.random();i.to(e,{x:this.ex,y:this.ey,scaleX:.5,scaleY:.5},700,Laya.Ease.backIn,new Laya.Handler(this,this.flyGoldOverFun,[e,t]),a+300);let s=new Laya.Tween;e.scaleX=e.scaleY=0,e.alpha=0,s.to(e,{scaleX:1,scaleY:1,alpha:1},300,Laya.Ease.backOut,null,a)}dFun(e){gt.BigSmallEffect(e)}static BigSmallEffect(e){let t=new Laya.Tween;e.scaleX=e.scaleY=0,e.alpha=0,t.to(e,{scaleX:1,scaleY:1,alpha:1},300,Laya.Ease.backOut)}flyGoldOverFun(e,t){e.removeSelf(),(new Laya.Tween).to(this.end,{scaleX:.7,scaleY:.7},80),(new Laya.Tween).to(this.end,{scaleX:1,scaleY:1},60,null,null,80),this.nowGold+=t,null==this.flyTargetHandler?this.fc.value=parseInt(Math.ceil(this.nowGold)+"")+"":this.flyTargetHandler.runWith([this.fc,this.nowGold])}}gt.p00Array=[],gt.p00Index=0;class ut extends I.test.OpenIconUI{constructor(e){super(),this.openIndex=0,this.light.cacheAs="bitmap",Laya.MouseManager.enabled=!1,this.openIndex=e,this.icon.skin=null,1==this.openIndex?this.icon.skin="main/btn_1.png":2==this.openIndex&&(this.icon.skin="main/btn_2.png"),this.icon.anchorX=this.icon.anchorY=.5,$.rotation(this.light,4e3),this.light.alpha=0,$.show(this.light,800),$.popup(this.title,1,300,600),Laya.timer.once(1400,this,this.cFun);let t=this.icon.localToGlobal(new Laya.Point(this.icon.width/2,this.icon.height/2));this.icon.x=t.x,this.icon.y=t.y+Ft.scenneM.main.y,Laya.stage.addChild(this.icon),this.icon.zOrder=1e3,$.popup(this.icon,1.5,300,1100)}cFun(){Laya.timer.once(100,this,this.clickFun)}clickFun(){$.hide(this.light,600),$.hide(this.title,600),$.hide(this.closeText,600),$.hide(Laya.Dialog.manager.maskLayer,600),Laya.timer.once(700,this,this.tFun)}tFun(){this.close(),Laya.Dialog.manager.maskLayer.alpha=.8,Ft.scenneM.main.mainUI.bottomUI.fly(this.icon,this.openIndex)}}class mt extends I.test.worldUI{constructor(){super(),this.box1.y=this.box1.y+u.top,this.box1.mouseThrough=!0,this.list=new Laya.List,this.list.pos(this.box.x,this.box.y),this.addChild(this.list),this.list.itemRender=st,this.list.size(Laya.stage.width,this.box.height),this.list.vScrollBarSkin="",this.list.renderHandler=new Laya.Handler(this,this.updateItem),this.on(Laya.Event.DISPLAY,this,this.onDis),(new ct).setUI(this.timeLogo),this.timeLogo.on(Laya.Event.CLICK,this,this.timeClickFun),this.rankBtn.on(Laya.Event.CLICK,this,this.rankClickFun),this.sign7Btn.on(Laya.Event.CLICK,this,this.sign7clickFun),this.shareBtn.on(Laya.Event.CLICK,this,this.shareFun),this.frogBtn.on(Laya.Event.CLICK,this,this.gotoFrog),Laya.stage.on(h.ADD_COIN,this,this.addCoinFun),Laya.stage.on(h.APP_ENERGY,this,this.reducePowerFun),this.addChild(this.box1),Laya.Browser.window.tt&&(this.rankBtn.visible=!1,this.sign7Btn.visible=!1,this.shareBtn.visible=!1,this.frogBtn.visible=!1),Laya.stage.on(h.SHOW_MAIN,this,this.showMain)}gotoFrog(){Laya.Browser.window.wx&&Laya.Browser.window.wx.navigateToMiniProgram({appId:"wx63d79f4642c0f508",path:"",envVersion:"release",success(e){console.log("按钮跳转小游戏成功")}})}showMain(){Laya.timer.once(600,null,()=>{if(Me.homeData.newStat==M.click_talent){new ut(2).popup(!1,!1)}else if(Me.homeData.newStat==M.open_role){new ut(1).popup(!1,!1)}})}reducePowerFun(e){let t=new I.test.ReducePowerUI;this.addChild(t),t.fc.value="-"+e;let i=st.clickCell.mapBtn,a=i.localToGlobal(new Laya.Point(0,0),!0,this);t.x=a.x+i.width/2,t.y=a.y+i.height/2,(new Laya.Tween).to(t,{y:t.y-200},700,null,new Laya.Handler(this,this.rFun,[t]))}rFun(e){e.removeSelf()}shareFun(){u.sdkManager.onlyShare()}sign7clickFun(){l.setTips("敬请期待")}addCoinFun(e){let t=Me.homeData.coins-e,i=Ft.scenneM.main.mainUI.topUI.coinClip;i.value=t+"";this.list.getCell(0);(new gt).flyFromP(Laya.stage.width/2,Laya.stage.height/2,Ft.scenneM.main.mainUI.topUI.goldImg,e,t,i)}rankClickFun(){u.dialogManager.open(dt.RANK_DIALOG)}timeClickFun(){u.dialogManager.open(dt.TIME_GOLD)}updateItem(e,t){let i=this.list.getItem(t);i&&i.id==Me.homeData.openId?(e.update(i,!0),e.open()):e.update(i)}onDis(){let e=Me.homeData.chapterId-1;e=Math.max(e,0);let t=u.tableManager.getTable(K.NAME).concat();t.length=3,t.push(null),this.list.array=t,this.list.scrollTo(e);let i=this.list.getCell(e);i.mapBtn.scale(0,0),(new Laya.Tween).to(i.mapBtn,{scaleX:1,scaleY:1},500,Laya.Ease.backOut,null,200),Me.homeData.openId=-1}}class yt extends I.test.chengjiu_1UI{constructor(){super()}}class wt extends I.test.chengjiuUI{constructor(){super(),this.list=new Laya.List,this.list.pos(this.listBox.x,this.listBox.y),this.addChild(this.list),this.list.itemRender=yt,this.list.repeatX=1,this.list.repeatY=4,this.list.vScrollBarSkin="",this.list.renderHandler=new Laya.Handler(this,this.updateItem),this.on(Laya.Event.DISPLAY,this,this.onDis)}onDis(){this.list.array=[,,,,,,,,,],this.refresh(),this.effect()}refresh(){}effect(){this.list.mouseEnabled=!1;let e=this.list.cells.length;for(let t=0;t<e;t++)this.tw(this.list.cells[t],100*t);Laya.timer.once(100*e+800,this,this.mouseFun)}mouseFun(){this.list.mouseEnabled=!0}tw(e,t){(new Laya.Tween).from(e,{y:e.y+this.list.height-e.height},800+t,Laya.Ease.backIn,null)}updateItem(){}}class xt extends I.test.settingUI{constructor(){super(),this.yuyan.clickHandler=new Laya.Handler(this,this.onLanguage),this.yinxiao.clickHandler=new Laya.Handler(this,this.onSound),this.yinyue.clickHandler=new Laya.Handler(this,this.onMusic),(Laya.Browser.window.tt||Laya.Browser.window.wx)&&(this.zuobi.visible=!1),this.zuobi.clickHandler=new Laya.Handler(this,this.zuobiFun),this.ver.text="VER:"+Ft.resVer,this.id.text="ID:"+Me.SKEY.substring(Me.SKEY.length-6),this.on(Laya.Event.DISPLAY,this,this.onDis)}zuobiFun(){Me.homeData.changeGold(0,1e5),Me.homeData.curEnergy=20,Me.homeData.lastTime=0,Me.saveData()}onDis(){Ft.cookie.getCookie(rt.MUSIC_SWITCH,e=>{this.musicImg.skin=1==e.state?"shezhi/kai.png":"shezhi/guan.png",this.yinyue.skin=1==e.state?"main/btn_lv.png":"main/btn_hong.png"}),Ft.cookie.getCookie(rt.SOUND_SWITCH,e=>{this.soundImg.skin=1==e.state?"shezhi/kai.png":"shezhi/guan.png",this.yinxiao.skin=1==e.state?"main/btn_lv.png":"main/btn_hong.png"})}onLanguage(){}onSound(){Ft.cookie.getCookie(rt.SOUND_SWITCH,e=>{1==e.state?(Ft.cookie.setCookie(rt.SOUND_SWITCH,{state:0}),this.soundImg.skin="shezhi/guan.png",u.soundManager.setSoundVolume(0),this.yinxiao.skin="main/btn_hong.png"):(Ft.cookie.setCookie(rt.SOUND_SWITCH,{state:1}),this.soundImg.skin="shezhi/kai.png",u.soundManager.setSoundVolume(1),this.yinxiao.skin="main/btn_lv.png")})}onMusic(){Ft.cookie.getCookie(rt.MUSIC_SWITCH,e=>{1==e.state?(Ft.cookie.setCookie(rt.MUSIC_SWITCH,{state:0}),this.musicImg.skin="shezhi/guan.png",u.soundManager.setMusicVolume(0),this.yinyue.skin="main/btn_hong.png"):(Ft.cookie.setCookie(rt.MUSIC_SWITCH,{state:1}),this.musicImg.skin="shezhi/kai.png",u.soundManager.setMusicVolume(1),Ft.playBgMusic(),this.yinyue.skin="main/btn_lv.png")})}}class ft extends I.test.TalentViewUI{constructor(){super(),this.arr=[],this.height=Laya.stage.height,this.arr.push(this.b0,this.b1,this.b2,this.b3,this.b4,this.b5);for(let e of this.arr)e.wenhao.box1.visible=!1,e.wenhao.select.visible=!1,e.back.select.visible=!1,e.back.box2.visible=!1,e.back.lvBox.visible=!1,e.on(Laya.Event.CLICK,this,this.clickFun,[e]);this.nameImg.alpha=0,this.clickClose.alpha=0,this.box1.visible=!1,Me.homeData.newStat==M.select_talent&&ee.getInstance().hand(this.b1,this.b1.width/2,this.b1.height/2+10,M.open_role,400,!0)}tFun(){}clickFun(e){Ft.playSound("fx_card.wav");let t=Math.floor(9*Math.random())+1;4==Me.homeData.newStat&&(t=1);let i=t,a=Me.talentData.getImgData(t);e.back.logo1.skin=a.logo,e.back.bg1.skin=a.bg,e.back.txtImg.skin=a.font;let s=Me.talentData.getLv(t),n=s,o=s+1;e.back.lv.value=s+1+"",Me.talentData.lvUp(t),e.back.select.visible=!0,this.mouseEnabled=!1,(new Laya.Tween).to(e,{scaleX:-1,update:new Laya.Handler(this,this.upFun,[e])},600);for(let t of this.arr)t.mouseEnabled=!1,t!=e&&(t.back.visible=!1,$.hide(t));let h=this.arr[1].y-100,r=this.arr[1].x;(new Laya.Tween).to(e,{x:r,y:h},800,Laya.Ease.strongOut),this.nameImg.skin=e.back.txtImg.skin,this.nameImg.y=h-200,this.l1.visible=!1,$.show(this.nameImg),this.clickClose.alpha=1,$.flash(this.clickClose),this.timer.once(1e3,this,this.timeFun);let l=u.tableManager.getDataByNameAndId(fe.NAME,i);this.l11.text=l.talentInfo;let p=u.tableManager.getDataByNameAndId(ve.NAME,n),d=u.tableManager.getDataByNameAndId(ve.NAME,o),c="%";if(1==l.talentType?c="":2==l.talentType&&(c="%"),null==p)this.f1.value="+0"+c;else{let e=p[l.idName];this.f1.value="+"+e+c}let g=d[l.idName];this.f2.value="+"+g+c,Laya.timer.once(500,this,this.boxFun)}boxFun(){this.box1.visible=!0,(new Laya.Tween).from(this.box1,{scaleX:0,scaleY:0},200,Laya.Ease.backInOut)}timeFun(){Laya.stage.once(Laya.Event.CLICK,this,this.clickFun2)}clickFun2(){this.close()}upFun(e){e.scaleX<=0&&(e.wenhao.visible=!1,e.back.lvBox.visible=!0)}}class It extends I.test.TianFuCellUI{constructor(){super()}}class vt extends I.test.talentUI{constructor(){super(),this.imgArr=["tianfu/PTkuang.png","tianfu/PTkuang.png","tianfu/PTkuang.png","tianfu/JYkuang.png","tianfu/JYkuang.png","tianfu/JYkuang.png","tianfu/SSkuang.png","tianfu/SSkuang.png","tianfu/SSkuang.png"],this.list.itemRender=It,this.on(Laya.Event.DISPLAY,this,this.disFun),this.shengmingniu.clickHandler=new Laya.Handler(this,this.btnFun),Laya.stage.on(h.TALENT_UPDATE,this,this.tFun),this.list.renderHandler=new Laya.Handler(this,this.renderFun)}selectFun(e){if(-1==e)return void(this.tipBox.visible=!1);this.tipBox.visible=!0;let t=this.list.getCell(e);this.tipBox.x=this.list.x+t.x-130,this.tipBox.y=this.list.y+t.y+200;let i=fe.getSys()[e],a=Me.talentData.getLv(i.id),s=u.tableManager.getDataByNameAndId(ve.NAME,a)[i.idName];this.txt5.text=i.talentInfo+":"+s+"%"}renderFun(e,t){let i=this.list.getItem(t),a=Me.talentData.getImgData(i.id);e.logo1.skin=a.logo,e.bg1.skin=this.imgArr[t],e.txtImg.skin=a.font;let s=Me.talentData.getLv(i.id);e.lv.value=s+"",e.box1.visible=e.box2.visible=!1,0==s?e.box2.visible=!0:e.box1.visible=!0,e.select.visible=this.list.selectedIndex==t,e.on(Laya.Event.CLICK,this,this.cellClickFun,[e,i.id])}cellClickFun(e,t){let i=Me.talentData.getLv(t);if(0==i)return void(this.tipBox.visible=!1);this.tipBox.visible=!0,this.tipBox.x=this.list.x+e.x-60,this.tipBox.y=this.list.y+e.y+200;let a=u.tableManager.getDataByNameAndId(fe.NAME,t),s=u.tableManager.getDataByNameAndId(ve.NAME,i)[a.idName];this.txt5.text=a.talentInfo+":"+s+a.getHou()}tFun(){this.refresh()}btnFun(){if(-2==Me.talentData.canLvUp())return void l.setTips("请您提升君主等级");if(-1==Me.talentData.canLvUp())return l.setTips("金币不够"),void u.dialogManager.open(dt.TIME_GOLD);Laya.MouseManager.enabled=!1,Laya.timer.once(300,null,()=>{Laya.MouseManager.enabled=!0}),(new ft).popup(!1)}disFun(){Me.homeData.newStat==M.talent_lv_up&&ee.getInstance().hand(this.shengmingniu,this.shengmingniu.width/2,this.shengmingniu.height/2,M.select_talent,600),this.tipBox.visible=!1,this.refresh()}refresh(){let e=fe.getSys();this.list.array=e,this.shengmingniu.disabled=!Me.talentData.haveGold(),this.qianshu.value=Me.talentData.getGold()+"",this.lvTime.text="已升级"+Me.talentData.lvTimes+"次"}effect(){this.list.mouseEnabled=!1;let e=this.list.cells.length;for(let t=0;t<e;t++)this.tw(this.list.cells[t],100*t);Laya.timer.once(100*e+800,this,this.mouseFun)}mouseFun(){this.list.mouseEnabled=!0}tw(e,t){(new Laya.Tween).from(e,{y:e.y+this.list.height-e.height},800+t,Laya.Ease.backIn,null)}}class bt{constructor(){this.arr=[]}setSprite(e){e.on(Laya.Event.DISPLAY,this,this.disFun),e.on(Laya.Event.UNDISPLAY,this,this.undisFun)}undisFun(){for(let e=0;e<this.arr.length;e+=3)Laya.stage.off(this.arr[e],this.arr[e+1],this.arr[e+2])}disFun(){for(let e=0;e<this.arr.length;e+=3)Laya.stage.on(this.arr[e],this.arr[e+1],this.arr[e+2])}onEvent(e,t,i){this.arr.push(e,t,i),Laya.stage.on(e,t,i)}}class Lt{setValue(e,t){let i=e/t;this.progressBarImg.scrollRect=new Laya.Rectangle(0,0,this.progressBarImg.width*i,this.progressBarImg.height),this.progressBarImg.visible=0!=i,this.goldFc.value=e+"/"+t}effect1(){this.vs2.selectedIndex=1,this.lvUpBtn.scale(0,0),(new Laya.Tween).to(this.lvUpBtn,{scaleX:1,scaleY:1},400,Laya.Ease.backOut)}setData(e){let t=te.have(e),i=te.getSys(e),a=!1;if(i&&Me.homeData.adTimes<i.videoLock&&(t=!1,a=!0),t)this.vs2.visible=!0,this.vs1.visible=!0,this.heroAddFc.visible=!0,Me.heroData.test(e,this.heroLvType)?(this.lv.ani1.play(0,!0),this.lv.visible=!0):this.lv.visible=!1;else if(this.vs2.visible=!1,this.vs1.visible=!1,this.heroBaseFc.value="0",this.heroAddFc.visible=!1,this.nowLvAddfc.value="+0",this.lv.visible=!1,0==a)return;let s=Me.heroData.getHeroLv(e,this.heroLvType),n=te.getSys(e),o=ie.getSysRole(e,s),h=o.getCost(this.heroLvType),r=o.getCostType(this.heroLvType),l=Me.homeData.getGoldByType(r);if(this.heroBaseFc.value=n.getValue(this.heroLvType)+"",this.heroAddFc.value="+"+ie.getAddValue(e,s,this.heroLvType),this.heroAddFc.x=this.heroBaseFc.x+23*this.heroBaseFc.value.length+10,!a){if(this.lvUpBtnGoldText.text=o.costGold+"",this.setValue(l,h),this.nowLvAddfc.value="+"+o.getValue(this.heroLvType),this.lvFc.value=s+"",s>=n.roleLimt)return this.vs1.selectedIndex=1,void(this.vs2.visible=!1);this.vs2.visible=!0,this.vs1.selectedIndex=0,this.vs2.selectedIndex=l>=h?1:0}}}class _t extends I.test.jueseUI{constructor(){super(),this.nowRoleId=1,this.autoEvent=new bt,this.heroLvTypeMap={},this.oldNum=0,this._gameScene=new Laya.Scene3D,this.roleBox.addChild(this._gameScene),this._layer3d=new Laya.Sprite3D,this._gameScene.addChild(this._layer3d);let e=new Laya.Camera(0,.1,100);this._gameScene.addChild(e),e.transform.translate(new Laya.Vector3(0,.5,1)),e.transform.rotate(new Laya.Vector3(-15,0,0),!0,!1),e.clearFlag=Laya.BaseCamera.CLEARFLAG_DEPTHONLY;let t=new Laya.DirectionLight;this._gameScene.addChild(t),t.color=new Laya.Vector3(1,1,1),t.transform.rotate(new Laya.Vector3(-3.14/3,0,0)),this.autoEvent.setSprite(this),this.shengmingniu.clickHandler=new Laya.Handler(this,this.hpFun,[this.shengmingniu]),this.gongjiniu.clickHandler=new Laya.Handler(this,this.atkFun,[this.gongjiniu]),this.on(Laya.Event.DISPLAY,this,this.disFun),this.jia.clickHandler=new Laya.Handler(this,this.jiaFun,[A.RED_DIAMONG,this.redImg,this.xueshu,T.HP]),this.jia2.clickHandler=new Laya.Handler(this,this.jiaFun,[A.BLUE_DIAMONG,this.blueImg,this.gongshu,T.ATK]),this.autoEvent.onEvent(h.GOLD_CHANGE,this,this.goldChangeFun),this.autoEvent.onEvent(h.HERO_UPDATE,this,this.heroFun),Laya.stage.on(h.HERO_UPDATE,this,this.heroLvUpFun),this.lvEff.visible=!1,this.a1.ani1.interval=this.a2.ani1.interval=1e3/60,this.a1.ani1.stop(),this.a2.ani1.stop(),this.a1.visible=this.a2.visible=!1,Laya.timer.loop(4e3,this,this.ani1tFun);let i=new Lt;i.heroLvType=T.HP,i.goldType=A.RED_DIAMONG,i.vs1=this.vs1,i.vs2=this.vs11,i.goldImg=this.redImg,i.goldFc=this.xueshu,i.lvUpBtnGoldText=this.hpGold,i.progressBarImg=this.tiao,i.lvFc=this.hpLv,i.goldAddBtn=this.jia,i.goldBox=this.box1,i.nowLvAddfc=this.shengmingjia,i.heroBaseFc=this.shengmingshu,i.heroAddFc=this.hpAddFc,i.lvUpBtn=this.shengmingniu,i.lv=this.lv1;let a=new Lt;a.heroLvType=T.ATK,a.goldType=A.BLUE_DIAMONG,a.vs1=this.vs2,a.vs2=this.vs12,a.goldImg=this.blueImg,a.goldFc=this.gongshu,a.lvUpBtnGoldText=this.atkGold,a.progressBarImg=this.tiao2,a.lvFc=this.atkLv,a.goldAddBtn=this.jia2,a.goldBox=this.box2,a.nowLvAddfc=this.gongjijia,a.heroBaseFc=this.gongjishu,a.heroAddFc=this.atkAddFc,a.lvUpBtn=this.gongjiniu,a.lv=this.lv2,this.heroLvTypeMap[i.heroLvType]=i,this.heroLvTypeMap[a.heroLvType]=a,this.zuo.clickHandler=new Laya.Handler(this,this.turnFun,[-1]),this.you.clickHandler=new Laya.Handler(this,this.turnFun,[1]),this.updateAll(),Laya.stage.on(h.AD_OVER,this,this.adOverFun)}adOverFun(){Laya.timer.callLater(this,this.clFun)}clFun(){this.setNowRoleId(this.nowRoleId)}turnFun(e){let t=this.nowRoleId;t=e<=0?Math.max(t+e,1):Math.min(t+e,3),this.setNowRoleId(t)}setNowRoleId(e){if(this.nowRoleId=e,this.showRoleById(e),this.zuo.visible=!(1==e),this.you.visible=!(3==e),this.updateAll(),this.fuhuo.mouseEnabled=!1,3==e)this.vs109.visible=!1;else if(Me.heroData.nowRoleId==e)this.vs109.visible=!0,this.vs109.selectedIndex=0;else{this.vs109.visible=!0;let t=te.getSys(e);if(Me.homeData.adTimes>=t.videoLock)this.vs109.selectedIndex=2,this.fuhuo.mouseEnabled=!0,this.fuhuo.clickHandler=new Laya.Handler(this,this.seleHeroFun,[e]);else{this.vs109.selectedIndex=1,this.hongzuan.value=Me.homeData.adTimes+"/"+t.videoLock;let e=Me.homeData.adTimes/t.videoLock;this.zitiao.scrollRect=new Laya.Rectangle(0,0,this.zitiao.width*e,this.zitiao.height),0==e&&(this.zitiao.visible=!1)}}}seleHeroFun(e){Me.heroData.nowRoleId=e,this.setNowRoleId(e),this.xuan.ani1.interval=1e3/45,this.xuan.ani1.play(0,!1)}showRoleById(e){this._layer3d.removeChildren(),3!=e?(this.qidai.visible=!1,Laya.Sprite3D.load("h5/heroview/"+e+"/hero.lh",new Laya.Handler(this,t=>{t.transform.localRotationEulerY=0;var i=0;2==e&&(i=.05,t.transform.localRotationEulerY=15),t.transform.localScale=new Laya.Vector3(.85,.85,.85),t.transform.localPositionZ=-3,t.transform.localPositionY=-.4,t.transform.localPositionX=i;let a=t.getChildAt(0);if(this._layer3d.addChild(t),a){let e=a.getComponent(Laya.Animator);e.speed=.5,e.play("Idle")}it.udpateHeroData()}))):this.qidai.visible=!0}showLayer(e){this._layer3d.transform.localPositionX=e?2:-2,Laya.Tween.to(this._layer3d.transform,{localPositionX:0},300)}hideLayer(e){this._layer3d.transform.localPositionX=0,Laya.Tween.to(this._layer3d.transform,{localPositionX:e?-2:2},300)}ani1tFun(){this.a1.visible=!0,this.a1.ani1.play(0,!1),Laya.timer.once(1e3,this,this.ani2tFun)}ani2tFun(){this.a2.visible=!0,this.a2.ani1.play(0,!1)}heroLvUpFun(){this.lvEff.visible=!0,this.lvEff.sk1.play(0,!1,!1,0),Laya.timer.frameLoop(1,this,this.floopFun,[this.lvEff.sk1])}floopFun(e){e.index==e.total&&(e.stop(),this.lvEff.visible=!1,Laya.timer.clear(this,this.floopFun))}efFun(){this.lvEff.visible=!1}heroFun(){this.updateAll()}goldChangeFun(){}jiaFun(e,t,i,a){let s=new pe;s.heroType=a,e==A.RED_DIAMONG?s.setType(E.red):s.setType(E.blue),s.popup(),this.oldNum=Me.homeData.getGoldByType(e),s.on(le.CHANGE_GOLD_EVENT,this,this.flyGoldFun,[t,i,a])}flyGoldFun(e,t,i,a,s){let n=new gt;n.flyNum=s,n.flySkin=e.skin,n.endOffX=e.width/2,n.endOffY=e.height/2,n.flyTargetHandler=new Laya.Handler(this,this.flyFun,[i]),n.flyFromP(Laya.stage.width/2,Laya.stage.height/2,e,s,this.oldNum,t)}flyFun(e,t,i){let a=Me.heroData.getHeroLv(this.nowRoleId,e),s=(te.getSys(this.nowRoleId),ie.getSysRole(this.nowRoleId,a).getCost(e)),n=this.heroLvTypeMap[e];n.setValue(i,s),i==s&&Laya.timer.once(800,this,this.tttFun,[n])}tttFun(e){e.effect1()}disFun(){this.updateAll(),this.setNowRoleId(Me.heroData.nowRoleId),Me.homeData.newStat==M.click_hp&&ee.getInstance().hand(this.shengmingniu,this.shengmingniu.width/2,this.shengmingniu.height/2,M.over,600,!0)}hpFun(e){if(0==e.visible)return;let t=Me.heroData.lvUp(this.nowRoleId,T.HP);this.tip(t)}atkFun(e){if(0==e.visible)return;let t=Me.heroData.lvUp(this.nowRoleId,T.ATK);this.tip(t)}tip(e){2==e?l.setTips("钻石不够"):3==e?l.setTips("升级到头了"):4==e?(l.setTips("金币不够"),u.dialogManager.open(dt.TIME_GOLD)):5==e?l.setTips("升级到头了"):0==e&&Ft.playSound("fx_slot_lucky.wav")}updateAll(){for(let e in this.heroLvTypeMap){this.heroLvTypeMap[e].setData(this.nowRoleId)}this.setSkill(this.nowRoleId)}setSkill(e){if(0==te.have(e))return this.skillLabel.text="",this.jinengming.text="",void(this.jinengtubiao.skin="main/kawen.png");let t=te.getSys(e),i=u.tableManager.getDataByNameAndId(Ze.NAME,t.baseSkill);this.skillLabel.text=i.skillInfo,this.jinengming.text=i.skillName,this.jinengtubiao.skin=null,this.jinengtubiao.skin="icons/skill/"+i.id+".png"}}class kt extends Laya.Box{constructor(){super(),this.views=[],this.skins=[null,"juese","tianfu","chengjiu","shezhi"],this.VIEW_CLAS=[mt,_t,vt,wt,xt],this.initUI()}initUI(){this.content=new Laya.Box,this.addChild(this.content)}set selectIndex(e){if(this.views[e])this.setView(e);else{let t=this.skins[e];if(t)Laya.loader.load("res/atlas/"+t+".atlas",new Laya.Handler(this,()=>{let t=this.VIEW_CLAS[e];this.views[e]=new t,this.setView(e)}));else{let t=this.VIEW_CLAS[e];this.views[e]=new t,this.setView(e)}}}setView(t){this.lastView=this.views[this.curIndex];let i,a=this.views[t];Laya.Tween.clearTween(this.content),1==this.curIndex&&this.views[this.curIndex].hideLayer(t>this.curIndex),this.content.addChild(a),null!=this.curIndex&&(i=t>this.curIndex?e.width:-e.width,a.x=i,Laya.Tween.to(this.content,{x:-i},300,null,new Laya.Handler(this,this.onCom,[a]))),this.curIndex=t,1==this.curIndex&&this.views[1].showLayer(i>0)}onCom(e){this.content.x=0,e.x=0,this.lastView&&this.lastView.removeSelf()}}class St extends Laya.Sprite{constructor(){super(),this.verLabel=new Laya.Label,this.height=ti.height,this.initUI()}initUI(){this.mainView=new kt,this.mainUI=new de,this.addChild(this.mainView),this.addChild(this.mainUI),this.coinClip=this.mainUI.topUI.coinClip,this.addChild(this.verLabel),this.verLabel.fontSize=16,this.verLabel.color="#ffffff",Laya.stage.on("switchView",this,this.switchView),this.switchView(),Laya.stage.on(h.START_BATTLE,this,this.onStartBattle),this.on(Laya.Event.DISPLAY,this,this.onDis)}onDis(e){}onStartBattle(){Ft.isStartBattle||(Ft.isStartBattle=!0,this.mainUI.appEnergy())}switchView(){this.mainView.selectIndex=this.mainUI.selectIndex}}class Mt extends I.test.RockerViewUI{constructor(){super(),this.a=0,this.a3d=0,this.speed=0}reset(){this.sp0.x=0,this.sp0.y=0}resetPos(){this.x=Laya.stage.width/2,this.y=Laya.stage.height-200}getA(){return this.a}getA3d(){return this.a3d}getSpeed(){return this.speed}setSp0(e,t){let i=e-this.x,a=t-this.y;this.a=Math.atan2(a,i),this.a3d=Math.atan2(this.y-t,e-this.x);let s=Math.sqrt(i*i+a*a);s>4?(s>80?(s=80,this.sp0.x=Math.cos(this.a)*s,this.sp0.y=Math.sin(this.a)*s):(this.sp0.x=i,this.sp0.y=a),this.speed=1):(this.reset(),this.speed=0)}setSp1(e,t){let i=e-this.x,a=Math.abs(i);a>35&&(i=a/i*35),this.sp0.x=i,i=t-this.y,(a=Math.abs(i))>35&&(i=a/i*35),this.sp0.y=i}rotate(e){this.dir.rotation=(2*Math.PI-e)/Math.PI*180+90}}class Dt extends Laya.Sprite{constructor(){super(),this.info={},this.endRowNum=0,this.map={},this.Amap={},this.futureBox=new N(1,1),this._isNext=!1,this._isNpc=!1,this.fcount=0,this.sp=new Laya.Point,this.ep=new Laya.Point,this.ballistic=new Laya.Sprite,this.arrhb=new N(2,2)}reset(){this.Aharr=[],this.Wharr=[],this.Eharr=[],this.Hharr=[],this.Fharr=[],this.Flyharr=[],this.info={},this.map={},this.Amap={},this.graphics.clear()}drawMap(){this.info={},this.npcHitBox=null,this._isNext=!1;let e=null;this.reset(),(e=new N(ti.ww*ti.MAP_COL,3*ti.ww)).setXY(0,0),this.Wharr.push(e),this.Aharr.push(e),this.Flyharr.push(e),(e=new N(ti.ww,ti.ww*ti.MAP_ROW)).setXY(0,0),this.Wharr.push(e),this.Aharr.push(e),this.Flyharr.push(e),(e=new N(ti.ww,ti.ww*ti.MAP_ROW)).setXY(ti.ww*(ti.MAP_COL-1),0),this.Wharr.push(e),this.Aharr.push(e),this.Flyharr.push(e),(e=new N(ti.ww*ti.MAP_COL,3*ti.ww)).setXY(0,ti.ww*(ti.MAP_ROW-3)),this.Wharr.push(e),this.Aharr.push(e),this.Flyharr.push(e),this.endRowNum=ti.MAP_ROW-3;for(var t=0,i=0;i<ti.MAP_ROW;i++)for(let o=0;o<ti.MAP_COL;o++){var a=o*(n=ti.ww),s=i*n;let h=ti.arr0[t];t<ti.arr0.length&&(this.info[i+"_"+o]=h,x.isWall(h)?this.map[h]?(e=this.map[h]).setRq(e.x,e.y,a+ti.ww-e.x,s+ti.ww-e.y):((e=new N(ti.ww,ti.ww)).value=h,e.setXY(a,s),this.Wharr.push(e),this.map[h]=e):x.isRiverPoint(h)||x.isRiverScale9Grid(h)||x.isRiverScale9Grid2(h)||x.isRiverRow(h)||x.isRiverCol(h)||x.isRiverPoint(h)?((e=new N(ti.ww,ti.ww)).setXY(a,s),this.Wharr.push(e)):x.isFence(h)?((e=new N(3*ti.ww,ti.ww)).value=h,e.setXY(a-ti.ww,s),this.Wharr.push(e)):x.isNpc(h)&&(this.npcHitBox=new N(4*ti.ww,4*ti.ww),this.npcHitBox.setXY(a,s)),h==w.DOOR?(this.doorHitBox=new N(2*ti.ww,2*ti.ww),this.doorHitBox.setXY(a-ti.ww2,s-ti.ww2)):h==w.GUIDE&&(this.guideHitBox=new N(ti.ww*ti.MAP_COL,ti.ww),this.guideHitBox.setXY(a,s)),t++)}t=0;for(i=0;i<ti.MAP_ROW;i++)for(let o=0;o<ti.MAP_COL;o++){var n;a=o*(n=ti.ww),s=i*n;let h=ti.arr0[t];x.isWall(ti.arr0[t])?this.Amap[h]?(e=this.Amap[h]).setVV(e.x,e.y,a+ti.ww-e.x,s+ti.ww-e.y):((e=new N(ti.ww,ti.ww)).setXY(a,s),this.Aharr.push(e),this.Amap[h]=e):x.isFence(ti.arr0[t])&&((e=new N(3*ti.ww,ti.ww)).setXY(a-ti.ww,s),this.Aharr.push(e)),t++}this.addChild(this.ballistic),this.setDoor(!1)}clearNpc(){this._isNpc=!1,this.npcHitBox=null,this.graphics.clear();for(let t=0;t<this.Wharr.length;t++){var e=this.Wharr[t];this.graphics.drawRect(e.left,e.top,e.ww,e.hh,null,16711680)}}checkNpc(){let e=!1;return this.npcHitBox&&Ft.hero.hbox.hit(Ft.hero.hbox,this.npcHitBox)&&(e=!0,this._isNpc=!0,this.npcHitBox=null,u.sendEvent(Ft.Event_NPC),console.log("碰到npc了=-===================")),e}checkDoor(){let e=!1;return this.doorHitBox&&Ft.hero.hbox.hit(Ft.hero.hbox,this.doorHitBox)&&(e=!0,this.doorHitBox=null,Me.homeData.isPass?Laya.stage.event(h.PASS_CHAPTER):Ft.battleLoader.load(),9999==Ft.battleGuide&&(u.sdkManager.log(r.BATTLE_GUIDE_6),Ft.battleGuide=null)),e}setDoor(e){this.graphics.clear();for(let e=0;e<this.Wharr.length;e++){var t=this.Wharr[e];this.graphics.drawRect(t.left,t.top,t.ww,t.hh,null,16711680)}}chechHitHero_(e,t){return this.chechHit(Ft.hero,e,t)}chechHit(e,t,i){if(this._isNext)return!0;let a=Ft.skillManager.isHas(5007),s=Ft.skillManager.isHas(5008);var n=e.hbox,o=this.futureBox;o.setRq(n.x+t,n.y+i,n.ww,n.hh);for(let t=0;t<this.Wharr.length;t++){let i=this.Wharr[t];if(e==Ft.hero){if(0==t&&i.hit(i,o),a&&(x.isWall(i.value)||x.isFence(i.value)))continue;if(s&&7777==i.value)continue}if(i.hit(i,o))return!0}return!1}chechHitArrs(e,t,i,a){var s=e.hbox,n=this.futureBox;n.setRq(s.x+t,s.y+i,s.ww,s.hh);for(let e=0;e<a.length;e++){let t=a[e];if(t!=s&&t.hit(t,n))return!0}return!1}chechHit_arr(e,t){let i=null;for(let a=0;a<t.length;a++)if((i=t[a]).hit(i,e))return i;return null}chechHit_arr_all(e,t){let i=null,a=null;for(let s=0;s<t.length;s++)(a=t[s]).hit(a,e)&&(i||(i=[]),i.push(a));return i}lineTest(e,t){var i,a=[];let s;var n;for(let o=0;o<e.length;o++)s=(i=e[o]).getBottom(),(n=t.lineTest(s))&&(a.push(n),a.push(s),a.push(i)),s=i.getTop(),(n=t.lineTest(s))&&(a.push(n),a.push(s),a.push(i)),s=i.getLeft(),(n=t.lineTest(s))&&(a.push(n),a.push(s),a.push(i)),s=i.getRight(),(n=t.lineTest(s))&&(a.push(n),a.push(s),a.push(i));return a}getPointAndLine(e,t){var i=this.lineTest(t,e);if(i.length<=0)return null;if(3==i.length)return i;var a=e.x0,s=e.y0,n=null,o=null,h=null,r=-1;for(let e=0;e<i.length;e+=3){var l=i[e],p=B.len(a,s,l.x,l.y);-1==r?(n=l,o=i[e+1],h=i[e+2],r=p):p<r&&(n=l,o=i[e+1],h=i[e+2],r=p)}return i.length=2,i[0]=n,i[1]=o,i[2]=h,i}drawBallistic(e){Ft.hero.hbox.setXY(Ft.hero.sp2d.x,Ft.hero.sp2d.y);var t=Math.cos(e)*ti.mw2,i=Math.sin(e)*ti.mw2,a=Ft.hero.hbox.cx,s=Ft.hero.hbox.cy;this.sp.x=a,this.sp.y=s,this.fcount=0;var n=this.ballistic.graphics;n.clear();for(let e=0;e<6e3;e++){var o;if(this.arrhb.setVV(a,s,t,i),o=this.chechHit_arr(this.arrhb,this.Wharr)){if(n.drawRect(this.arrhb.x,this.arrhb.y,this.arrhb.ww,this.arrhb.hh,null,"#ff0000"),n.drawRect(o.x,o.y,o.ww,o.hh,"#00ff00","#00ff00"),n.drawLine(this.sp.x,this.sp.y,a,s,"#ff0000"),this.sp.x=a,this.sp.y=s,!(this.fcount<4))break;if(this.chechHit_arr(this.arrhb.setVV(a,s,-1*t,i),this.Wharr)){if(this.chechHit_arr(this.arrhb.setVV(a,s,t,-1*i),this.Wharr))break;i*=-1,this.fcount++}else t*=-1,this.fcount++}else n.drawRect(this.arrhb.x,this.arrhb.y,this.arrhb.ww,this.arrhb.hh,null,"#0000ff"),a+=t,s+=i}}}class Tt extends Laya.EventDispatcher{constructor(){super(),this.now=0,this.st=0,this.stopt=0,this.startt=0,this.dt=0,this.isRun=!1,this.now=Laya.Browser.now(),this.st=this.now,this.stop_()}start(){this.now=Laya.Browser.now(),this.dt+=this.now-this.stopt;var e=Ft.AiArr;for(let t=0;t<e.length;t++)e[t].animator&&(e[t].animator.speed=1);this.isRun=!0,Laya.stage.frameLoop(1,this,this.ai)}stop_(){this.now=Laya.Browser.now(),this.stopt=this.now,Laya.timer.clear(this,this.ai);var e=Ft.AiArr;for(let t=0;t<e.length;t++)e[t].animator&&(e[t].animator.speed=0);this.isRun=!1}getWorldNow(){return this.now=Laya.Browser.now(),this.now-this.dt}ai(){var e=Ft.AiArr;for(let t=0;t<e.length;t++)e[t].ai();1==e.length&&(0==Ft.bg.npcId&&0==Ft.state&&Ft.lastLevel!=Ft.level&&0==Ft.isPopupSkill&&Laya.stage.event(Ft.Event_SELECT_NEWSKILL,Ft.level),e[0]instanceof it&&0==Ft.state&&(Ft.openDoor(),Ft.map0.checkDoor()));var t=Ft.map0.Fharr;for(let e=0;e<t.length;e++){var i=t[e],a=i.linkPro_;i.hit(i,Ft.hero.hbox)&&(a.closeCombat(Ft.hero),0==a.gamedata.ammoClip&&t.slice(t.indexOf(i),1))}Ft.buffM.exe(this.getWorldNow())}}class Et{constructor(e,t){this.a=e,this.n=e*Math.PI/180,this.abs=Math.abs(e),this.a0=90-this.abs,this.n0=this.a0*Math.PI/180,this.tan0=Math.tan(this.n0),this.cos0=Math.cos(this.n0),this.y=t,this.z=t*this.tan0,this.boxscale=new Laya.Vector3(1,1,1/this.cos0),this.boxscale0=new Laya.Vector3(1,1,.5/this.cos0)}}class At extends I.test.battleUI{constructor(){super(),this.maskSpr=new Laya.Sprite,this._indexBox=new Ct,this.lastWidth=0,this.isTwo=!1,Laya.stage.on(Ft.Event_COINS,this,this.updateCoins),Laya.stage.on(Ft.Event_EXP,this,this.updateExp),this.indexBox.addChild(this._indexBox),this.y=u.top+60,Laya.stage.on(h.BOOS_BLOOD_UPDATE,this,this.onUpdate),this.btnRecord.visible=!1,Laya.Browser.window.tt&&(this.btnRecord.visible=!0,this.btnRecord.clickHandler=new Laya.Handler(this,this.onStopRecord))}onStopRecord(){u.sdkManager.stopRecorder(new Laya.Handler(this,this.addPower))}addPower(){Me.homeData.curEnergy++,Me.homeData.curEnergy>=Me.homeData.maxEngergy&&(Me.homeData.curEnergy=Me.homeData.maxEngergy),Me.homeData.lastTime=0,Me.saveData(),this.reducePowerFun(),this.btnRecord.visible=!1}reducePowerFun(){let e=new I.test.ReducePowerUI;this.addChild(e),e.fc.value="+1",e.x=375,e.y=1100,(new Laya.Tween).to(e,{y:e.y-200},700,null,new Laya.Handler(this,this.rFun,[e]))}rFun(e){e.removeSelf()}onUpdate(e){this._curBlood-=e,this._curBlood=Math.max(1,this._curBlood),this.bossxue.scrollRect=new Laya.Rectangle(0,0,this.bossxue.width*this._curBlood/this._bossEnemy.enemyHp,this.bossxue.height)}setBoss(e,t){this.boss.visible=e,this.bossxuetiao.visible=e,this._bossEnemy=t,this._bossEnemy&&(this._curBlood=this._bossEnemy.enemyHp,this.bossxuetiao.visible&&(this.bossxue.scrollRect=new Laya.Rectangle(0,0,this.bossxue.width,this.bossxue.height)))}reset(){this._indexBox.init()}updateIndex(e){this._indexBox.update(e)}updateExp(){let e=nt.getLv(Ft.battleExp),t=nt.getMaxExpByLv(e),i=nt.getExpSum(e-1),a=(Ft.battleExp-i)/t;this.isTwo=e>Ft.level,Laya.timer.frameLoop(1,this,this.onLoop,[a]),Ft.level=e,this.isTwo}onLoop(e){this.lastWidth+=15,this.isTwo?this.lastWidth>=this.lvBar.height&&(this.lastWidth=0,this.isTwo=!1):this.lastWidth>=this.lvBar.height*e&&(this.lastWidth=this.lvBar.height*e,Laya.timer.clear(this,this.onLoop)),this.lastWidth=Math.max(1,this.lastWidth),this.maskSpr.graphics.clear(),this.maskSpr.graphics.drawRect(0,this.lvBar.height-this.lastWidth,this.lvBar.width,this.lastWidth,"#fff000"),this.lvBar.mask=this.maskSpr}updateCoins(){this.jinbishu.value=""+Ft.showCoinsNum}removeSelf(){return Ft.state=0,super.removeSelf()}}class Ct extends I.game.battleIndexBoxUI{constructor(){super(),this._cellList=[],this._isInit=!1,this.scrollRect=new Laya.Rectangle(0,0,this.width,this.height)}init(){if(this._cellList.length=0,0==Ft.battleLoader.chapterId)return;let e=m.getTotal(Ft.battleLoader.chapterId);for(let t=0;t<e;t++){let e=Laya.Pool.getItemByClass(Bt.TAG,Bt);e.update(t+1),this.box.addChild(e),e.x=185+150*t,e.y=55,e.gray=!0,this._cellList.push(e),e.visible=!1}}update(e){if(0==Ft.battleLoader.chapterId)return;for(let t=0;t<this._cellList.length;t++)this._cellList[t].visible=!1,e>=2?t!=e-1&&t!=e-2&&t!=e||(this._cellList[t].visible=!0):(this._cellList[0].visible=!0,this._cellList[1].visible=!0,this._cellList[2].visible=!0);let t=m.getTotal(Ft.battleLoader.chapterId);if(e>t&&(e=t),this.pbox1.visible=1!=e,this.pbox2.visible=e!=t,this._isInit)Laya.Tween.to(this.box,{x:150*-(e-1)},300,null,null,100),1==e?Laya.Tween.to(this._cellList[e-1],{scaleX:1.5,scaleY:1.5},300,null,null,100):(Laya.Tween.to(this._cellList[e-2],{scaleX:1,scaleY:1},300,null,null,100),Laya.Tween.to(this._cellList[e-1],{scaleX:1.5,scaleY:1.5},300,null,null,100)),this._cellList[e-1].gray=!1;else{this.box.x=150*-(e-1),this._cellList[e-1].scale(1.5,1.5),this._cellList[e-1].gray=!1,this._isInit=!0;for(let t=0;t<e-1;t++)this._cellList[t].gray=!1}}}class Bt extends I.test.battleLvUIUI{constructor(){super(),this.on(Laya.Event.UNDISPLAY,this,this.onUndis)}onUndis(){Laya.Pool.recover(Bt.TAG,this)}set gray(e){this.btn.gray=e}update(e){this.shuziyou.text=""+e}}Bt.TAG="IndexCell";class Nt extends I.test.battlestop2UI{constructor(){super(),this.btnHome.clickHandler=new Laya.Handler(this,this.onHome),this.btnSound.clickHandler=new Laya.Handler(this,this.onSound),this.btnPlay.clickHandler=new Laya.Handler(this,this.onBattle),this.btnMusic.clickHandler=new Laya.Handler(this,this.onMusic),this.on(Laya.Event.DISPLAY,this,this.onDis),this.on(Laya.Event.UNDISPLAY,this,this.onUndis)}onUndis(){Laya.Browser.window.tt&&u.sdkManager.hideBanner()}onDis(){Ft.cookie.getCookie(rt.MUSIC_SWITCH,e=>{this.musicImg.skin=1==e.state?"bg/zhanting_1.png":"bg/zhanting_0.png"}),Ft.cookie.getCookie(rt.SOUND_SWITCH,e=>{this.soundImg.skin=1==e.state?"bg/zhanting_1.png":"bg/zhanting_0.png"}),Laya.Browser.window.tt&&u.sdkManager.showBanner()}onSound(){Ft.cookie.getCookie(rt.SOUND_SWITCH,e=>{1==e.state?(Ft.cookie.setCookie(rt.SOUND_SWITCH,{state:0}),this.soundImg.skin="bg/zhanting_0.png",u.soundManager.setSoundVolume(0)):(Ft.cookie.setCookie(rt.SOUND_SWITCH,{state:1}),this.soundImg.skin="bg/zhanting_1.png",u.soundManager.setSoundVolume(1))})}onMusic(){Ft.cookie.getCookie(rt.MUSIC_SWITCH,e=>{1==e.state?(Ft.cookie.setCookie(rt.MUSIC_SWITCH,{state:0}),this.musicImg.skin="bg/zhanting_0.png",u.soundManager.setMusicVolume(0)):(Ft.cookie.setCookie(rt.MUSIC_SWITCH,{state:1}),this.musicImg.skin="bg/zhanting_1.png",u.soundManager.setMusicVolume(1),Ft.playBattleMusic())})}onHome(){Ft.alert.onShow("确定返回主页吗?",new Laya.Handler(this,this.onGo),null,"本局将不会产生任何收益。")}onGo(){Ft.showCoinsNum=0,Ft.showMain(),this.removeSelf()}onBattle(){this.removeSelf(),Ft.executor.start()}removeSelf(){return Ft.state=0,super.removeSelf()}}class Vt extends I.test.GameOverUI{constructor(){super(),this.maskSpr=new Laya.Sprite,this.delayTime=200,this.lastWidth=0,u.sdkManager.initAdBtn(this.fuhuoBtn.fuhuo,t.AD_BATTLE10),this.on(Laya.Event.DISPLAY,this,this.onDis),this.on(Laya.Event.CLICK,this,this.onClick)}onRewardSuccess(){Ft.showCoinsNum=2*Ft.showCoinsNum,Ft.showBlueNum=2*Ft.showBlueNum,Ft.showRedNum=2*Ft.showRedNum,this.lanzuan.value="+"+Ft.showBlueNum,this.hongzuan.value="+"+Ft.showRedNum,this.coinClip.value="+"+Ft.showCoinsNum;let e=Math.floor(Ft.showCoinsNum*Me.talentData.lineGold/100);this.deltaCoin.value="+"+e,this.deltaCoin.visible=e>0,Me.homeData.changeGold(A.GOLD,Ft.showCoinsNum),Me.homeData.changeGold(A.BLUE_DIAMONG,Ft.showBlueNum),Me.homeData.changeGold(A.RED_DIAMONG,Ft.showRedNum),console.log("5倍奖励",Ft.showCoinsNum,Ft.showBlueNum,Ft.showRedNum),Me.saveData(),setTimeout(()=>{this.onCloseView()},300)}onCloseView(){this.removeSelf(),Ft.showMain()}onClick(e){e.target==this.fuhuoBtn.fuhuo?u.sdkManager.playAdVideo(t.AD_BATTLE10,new Laya.Handler(this,this.onRewardSuccess)):(this.removeSelf(),Ft.showMain())}onDis(){this.closeTxt.alpha=0,Ft.cookie.removeCookie(rt.CURRENT_BATTLE),Laya.timer.frameLoop(1,this,this.onLoop),Laya.MouseManager.enabled=!1,this.oldLv=Me.homeData.playerLv;let e=u.tableManager.getDataByNameAndId(Q.NAME,this.oldLv);this.oldPercent=Me.homeData.playerExp/e.roleExp,this.oldPercent=Math.min(1,this.oldPercent),this.lastWidth=this.expBar.width*this.oldPercent,this.setmask();let t=Q.getNewLv(Ft.heroExp);this.newLv=t[0],this.newExp=t[1],e=u.tableManager.getDataByNameAndId(Q.NAME,this.newLv),this.newPercent=this.newExp/e.roleExp,this.newPercent=Math.min(1,this.newPercent),this.bigBox.y=Laya.stage.height/2,this.lanBox.removeSelf(),this.ziBox.removeSelf(),this.coinBox.removeSelf(),this.lightView.visible=!1,this.topBox.visible=!1,this.expBox.visible=!1,this.lingqu.visible=!1,this.fuhuo.visible=!1,this.topBox.visible=!0,this.topBox.scale(2.5,2.5),this.topBox.alpha=0,Laya.Tween.to(this.topBox,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext)),this.cengshu.value=this.oldLv+"",this.dengji.value=this.oldLv+""}onNext(){this.lightView.visible=!0,this.lightView.scale(2.5,2.5),this.lightView.alpha=0,Laya.Tween.to(this.lightView,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext1))}onNext1(){this.expBox.visible=!0,this.updateExp()}updateExp(){this.newLv==this.oldLv?Laya.Tween.to(this.bigBox,{y:366},this.delayTime,null,new Laya.Handler(this,()=>{Laya.timer.frameLoop(1,this,this.onLoopExp)})):Laya.timer.frameLoop(1,this,this.onLoopLv)}onLoopLv(){this.lastWidth+=5,this.lastWidth>=this.expBar.width&&(this.lastWidth=0,this.oldLv++,this.cengshu.value=this.oldLv+"",this.dengji.value=this.oldLv+"",Laya.timer.clear(this,this.onLoopLv),Laya.stage.event(h.LV_UP_VIEW)),this.setmask()}onLoopExp(e){this.lastWidth+=5,this.lastWidth>=this.expBar.width*this.newPercent&&(this.lastWidth=this.expBar.width*this.newPercent,Laya.timer.clear(this,this.onLoopExp),this.hh=800,this.lingqu.visible=!0,this.lingqu.scale(2.5,2.5),this.lingqu.alpha=0,Laya.Tween.to(this.lingqu,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext2))),this.setmask()}onNext2(){Ft.showBlueNum>0?(this.addChild(this.lanBox),this.lanzuan.value="+"+Ft.showBlueNum,this.lanBox.x=375,this.lanBox.y=this.hh,this.hh+=100,this.lanBox.visible=!0,this.lanBox.scale(2.5,2.5),this.lanBox.alpha=0,Laya.Tween.to(this.lanBox,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext3))):this.onNext3()}onNext3(){Ft.showRedNum>0?(this.hongzuan.value="+"+Ft.showRedNum,this.addChild(this.ziBox),this.ziBox.x=375,this.ziBox.y=this.hh,this.hh+=100,this.ziBox.visible=!0,this.ziBox.scale(2.5,2.5),this.ziBox.alpha=0,Laya.Tween.to(this.ziBox,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext4))):this.onNext4()}onNext4(){if(Ft.showCoinsNum>0){this.coinClip.value="+"+Ft.showCoinsNum;let e=Math.floor(Ft.showCoinsNum*Me.talentData.lineGold/100);this.deltaCoin.value="+"+e,this.deltaCoin.visible=e>0,this.addChild(this.coinBox),this.coinBox.x=375,this.coinBox.y=this.hh,this.hh+=100,this.coinBox.visible=!0,this.coinBox.scale(2.5,2.5),this.coinBox.alpha=0,Laya.Tween.to(this.coinBox,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext5))}else this.onNext5()}onNext5(){this.fuhuo.y=this.hh-30,this.fuhuo.visible=!0,this.fuhuo.scale(2.5,2.5),this.fuhuo.alpha=0,Laya.Tween.to(this.fuhuo,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext6))}onNext6(){Me.homeData.addPlayerExp(Ft.heroExp),Me.saveData(),Laya.MouseManager.enabled=!0,this.closeTxt.alpha=1,$.flash(this.closeTxt)}setmask(){this.lastWidth=Math.max(1,this.lastWidth),this.maskSpr.graphics.clear(),this.maskSpr.graphics.drawRect(0,0,this.lastWidth,this.expBar.height,"#fff000"),this.expBar.mask=this.maskSpr}onLoop(){this.lightView.rotation++}removeSelf(){return Laya.timer.clear(this,this.onLoop),Ft.state=0,super.removeSelf()}}class Ut extends I.test.SkillGridUI{constructor(e){super(),this.handler=e,this.imgBox.addChild(this.img),this.imgBox.on(Laya.Event.CLICK,this,this.onClick)}onClick(){this.handler&&this.handler.runWith(this.sys)}update(e){this.txt.text="****",this.shuoming.text="****",this.img.skin="main/kawen.png",Laya.Tween.to(this.parent,{scaleX:.1},150,null,new Laya.Handler(this,this.onFan,[e]))}onFan(e){this.sys=u.tableManager.getDataByNameAndId(Ze.NAME,e),this.txt.text=this.sys.skillName,this.shuoming.text=this.sys.skillInfo,this.img.skin="icons/skill/"+this.sys.id+".png",Laya.Tween.to(this.parent,{scaleX:1},150)}}class Yt extends I.test.battlestopUI{constructor(){super(),this.grid1=new Ut(new Laya.Handler(this,this.onClick)),this.grid2=new Ut(new Laya.Handler(this,this.onClick)),this.box1.addChild(this.grid1),this.box2.addChild(this.grid2),this.queding.deshuliang.text="刷新",u.sdkManager.initAdBtn(this.queding.fuhuo,t.AD_CHANGE_SKILL),this.queding.fuhuo.clickHandler=new Laya.Handler(this,this.showAD),this.on(Laya.Event.DISPLAY,this,this.onDis),this.on(Laya.Event.UNDISPLAY,this,this.onUndis)}onUndis(){Laya.Browser.window.tt&&u.sdkManager.hideBanner()}showAD(){u.sdkManager.playAdVideo(t.AD_CHANGE_SKILL,new Laya.Handler(this,this.onChangeSkill))}onClick(e){console.log(e.skillName),Ft.hero.changeBlood(e)||Ft.skillManager.addSkill(e),Ft.bg.clearNpc(),this.removeSelf()}onDis(){Ft.executor.stop_(),this.box1.scaleX=1,this.box2.scaleX=1,this.setSkill(),Laya.Browser.window.tt&&u.sdkManager.showBanner()}onChangeSkill(){this.setSkill()}setSkill(){let e=1==Ft.battleLoader.chapterId?1005:1004;this.grid1.update(Ft.skillManager.getRandomSkillByNpcId(e)),this.grid2.update(Ft.skillManager.getRandomSkillByNpcId(e))}removeSelf(){return Me.talentData.dropLevelhp>0&&Ft.hero.addBlood(Me.talentData.dropLevelhp),console.log("战斗内升级回血",Me.talentData.dropLevelhp),Ft.executor.start(),Ft.state=0,super.removeSelf()}}class Pt extends I.test.ReborthUI{constructor(){super(),this.bgv.cBtn.clickHandler=new Laya.Handler(this,this.onClose),this.fuhuo.clickHandler=new Laya.Handler(this,this.onFuhuo),u.sdkManager.initAdBtn(this.fuhuo,t.AD_REBORTH),this.shape=new Laya.Sprite,this.on(Laya.Event.DISPLAY,this,this.onDis)}onFuhuo(){Laya.timer.clear(this,this.onLoop2),u.sdkManager.playAdVideo(t.AD_REBORTH,new Laya.Handler(this,this.onReborn)),u.sdkManager.log(r.REBORTH_CLICK)}onDis(){this.txt.text=""+Ft.rebornTimes,this._curTime=5,this.daojishi.text=""+this._curTime,Laya.timer.loop(1e3,this,this.onLoop2)}onLoop2(){this._curTime--,this.daojishi.text=""+this._curTime,this._curTime<=0&&(Laya.timer.clear(this,this.onLoop2),this.onClose())}onClose(){Laya.timer.clear(this,this.onLoop2),this.removeSelf(),Ft.rebornTimes=0,Laya.stage.event(Ft.Event_MAIN_DIE)}onReborn(){Laya.timer.clear(this,this.onLoop2),this.removeSelf(),Ft.hero.reborn()}removeSelf(){return Ft.state=0,super.removeSelf()}}class Ht{constructor(){this.box=Laya.Sprite3D.instantiate(Ft.fence)}setPos(e){this.box.transform.position=e,Ft.layer3d.addChild(this.box)}static recover(){for(;Ht.arr.length>0;){let e=Ht.arr.shift();e.box.removeSelf(),Laya.Pool.recover(Ht.TAG,e)}Ht.arr.length=0}static getOne(e){let t=Laya.Pool.getItemByClass(Ht.TAG,Ht);return t.setPos(e),Ht.arr.push(t),t}}Ht.TAG="GameFence",Ht.arr=[];class Rt extends I.game.newGuide2UI{constructor(){super(),this.on(Laya.Event.CLICK,this,this.onClick)}onClick(){this.removeSelf()}setContent(e,t){this._guideId=t,this.contents=e.split(""),this.txt.text="",Laya.timer.loop(80,this,this.onLoop)}onLoop(){if(this.contents.length>0){let e=this.contents.shift();this.txt.text+=e}else Laya.timer.clear(this,this.onLoop)}removeSelf(){return Laya.stage.event(h.SHOW_ACTION_RECT,this._guideId),super.removeSelf()}}class Xt extends I.game.newGuideUI{constructor(){super()}}class zt extends I.test.shengjiUI{constructor(){super(),this.delayTime=200,this.on(Laya.Event.DISPLAY,this,this.onDis),this.on(Laya.Event.CLICK,this,this.onCloseView)}onCloseView(){this.removeSelf(),Laya.timer.clear(this,this.onLoop),u.sendEvent(h.LV_UP_VIEW_2)}onDis(){Laya.MouseManager.enabled=!1;let e=Me.homeData.playerLv;this.lvClip.value=""+e,this.lvLabel.text=""+e,this.sysHero=u.tableManager.getDataByNameAndId(Q.NAME,e),Me.homeData.changeGold(A.GOLD,this.sysHero.gold),Me.homeData.changeGold(A.BLUE_DIAMONG,this.sysHero.blueDiamond),Me.homeData.changeGold(A.RED_DIAMONG,this.sysHero.redDiamond),Laya.timer.frameLoop(1,this,this.onLoop),this.dunpaiBox.visible=!1,this.lvBox.visible=!1,this.lingqu.visible=!1,this.lanBox.visible=!1,this.ziBox.visible=!1,this.coinBox.visible=!1,this.rebornBtn.visible=!1,this.hh=800,this.dunpaiBox.visible=!0,this.dunpaiBox.scale(2.5,2.5),this.dunpaiBox.alpha=0,Laya.Tween.to(this.dunpaiBox,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext))}onNext(){this.lvBox.visible=!0,this.lvBox.scale(2.5,2.5),this.lvBox.alpha=0,Laya.Tween.to(this.lvBox,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext1))}onNext1(){this.lingqu.visible=!0,this.lingqu.scale(2.5,2.5),this.lingqu.alpha=0,Laya.Tween.to(this.lingqu,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext2))}onNext2(){this.sysHero.blueDiamond>0?(this.lanzuan.value="+"+this.sysHero.blueDiamond,this.addChild(this.lanBox),this.lanBox.x=353,this.lanBox.y=this.hh,this.hh+=100,this.lanBox.visible=!0,this.lanBox.scale(2.5,2.5),this.lanBox.alpha=0,Laya.Tween.to(this.lanBox,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext3))):this.onNext3()}onNext3(){this.sysHero.redDiamond>0?(this.hongzuan.value="+"+this.sysHero.redDiamond,this.addChild(this.ziBox),this.ziBox.x=353,this.ziBox.y=this.hh,this.hh+=100,this.ziBox.visible=!0,this.ziBox.scale(2.5,2.5),this.ziBox.alpha=0,Laya.Tween.to(this.ziBox,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext4))):this.onNext3()}onNext4(){this.sysHero.gold>0?(this.coinClip.value="+"+this.sysHero.gold,this.deltaCoin.visible=!1,this.addChild(this.coinBox),this.coinBox.x=353,this.coinBox.y=this.hh,this.hh+=100,this.coinBox.visible=!0,this.coinBox.scale(2.5,2.5),this.coinBox.alpha=0,Laya.Tween.to(this.coinBox,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext5))):this.onNext5()}onNext5(){this.rebornBtn.y=this.hh+30,this.rebornBtn.visible=!0,this.rebornBtn.scale(2.5,2.5),this.rebornBtn.alpha=0,Laya.Tween.to(this.rebornBtn,{scaleX:1,scaleY:1,alpha:1},this.delayTime,null,new Laya.Handler(this,this.onNext6))}onNext6(){Laya.MouseManager.enabled=!0}onLoop(){this.lightView.rotation++}}class Gt extends Laya.Sprite{constructor(){super(),this.npcViewDic={},this.nullGridList=[];var e=new ti;this.addChild(e),Ft.bg=e;var t=new Dt;Ft.map0=t,this.addChild(Ft.footLayer),Ft.footLayer.cacheAs="bitmap";var i=this.addChild(new Laya.Scene3D);i.addChild(Ft.layer3d),Ft.scene3d=i,i.addChild(Ft.layer3dCube),i.addChild(Ft.layer3dCoins),this.addChild(Ft.bloodLayer),this.addChild(Ft.topLayer);var a=i.addChild(new Laya.Camera(0,.1,100));Ft.cameraCN=new Et(-45,10),a.transform.translate(new Laya.Vector3(0,Ft.cameraCN.y,Ft.cameraCN.z)),a.transform.rotate(new Laya.Vector3(Ft.cameraCN.a,0,0),!0,!1),a.orthographic=!0,Ft.camera=a,ti.orthographicVerticalSize=ti.wnum*Laya.stage.height/Laya.stage.width,a.orthographicVerticalSize=ti.orthographicVerticalSize,a.clearFlag=Laya.BaseCamera.CLEARFLAG_DEPTHONLY;var s=i.addChild(new Laya.DirectionLight);s.color=new Laya.Vector3(.6,.6,.6),s.transform.worldMatrix.setForward(new Laya.Vector3(1,-1,0)),this._top=new At,this.addChild(this._top),this._top.zanting.clickHandler=new Laya.Handler(this,this.showPause),Laya.stage.on(Ft.Event_SELECT_NEWSKILL,this,this.onShowSelect),Laya.stage.on(Ft.Event_MAIN_DIE,this,this.showDieView1),Laya.stage.on(h.PASS_CHAPTER,this,this.onOver),Laya.stage.on(h.LV_UP_VIEW,this,this.onLvup),Laya.stage.on(h.LV_UP_VIEW_2,this,this.onLvup2),Laya.stage.on(h.MEMORY_WARNING,this,this.onRelease),Laya.stage.on(Ft.Event_NPC,this,this.showNpcView)}onLvup2(){this._gameOver&&this._gameOver.updateExp()}onLvup(){this._lvupView||(this._lvupView=new zt),this.addChild(this._lvupView)}onRelease(){Ft.battleLoader.onRelease()}onShowSelect(e){e>10||(this.up(null),this._selectSkill||(this._selectSkill=new Yt),this.addChild(this._selectSkill),Ft.isPopupSkill=1,Ft.state=1)}onOver(){this._gameOver||(this._gameOver=new Vt),this.addChild(this._gameOver),Ft.state=1}onReborn(){this._rebornView||(this._rebornView=new Pt),this.addChild(this._rebornView),Ft.state=1}showDieView1(){Ft.rebornTimes<=0?this.onOver():this.onReborn()}showPause(){this._pauseUI||(this._pauseUI=new Nt),this.addChild(this._pauseUI),Ft.executor.stop_(),Ft.state=1}showNpcView(){this.up(null);let e=Ft.bg.npcId;if(console.log("显示npc",e),e>0){if(null==this.npcViewDic[e]){let t=Laya.ClassUtils.getClass("NPCVIEW"+e);t&&(this.npcViewDic[e]=new t)}this.addChild(this.npcViewDic[e]),Ft.state=1}}init(){Me.homeData.isPass=!1,Gt.npcPro=null,this._top.reset(),Ft.hero||(it.udpateHeroData(),Ft.hero=new it),Ht.recover(),$e.recover(),Me.saveData(),Ft.reset(),this._top.updateCoins(),this._top.updateExp(),this._top.updateIndex(Ft.battleLoader.index),Ft.executor||(Ft.executor=new Tt),this._top._indexBox.visible=!Me.homeData.isGuide,this._top.zanting.visible=!Me.homeData.isGuide,Ft.map0.drawMap(),ti.mcx=13*ti.ww/2-ti.mw2,ti.mcy=.5*ti.bgHH-ti.mw2,Ft.setSelectEffect();var e=Laya.loader.getRes("h5/zhalan/hero.lh");Ft.fence=e,this.nullGridList.length=0;var t,i,a=!1;let s=0;for(let e=0;e<ti.MAP_ROW;e++)for(let n=0;n<ti.MAP_COL;n++){let o=ti.arr0[s];if(x.isCube(o)?Be.getOne(ti.get3D(n,e),o):x.isFence(o)?Ht.getOne(ti.get3D(n,e)):x.isNpc(o)?(Gt.npcPro=new j(0,1),Gt.npcPro.setSp3d(null,.8*ti.ww),Gt.npcPro.setXY2DBox(ti.ww*n+(ti.ww-ti.mw)/2,e*ti.ww+(ti.ww-ti.mw)/2)):null==Ft.battleLoader.continueRes&&x.isMonster(o)&&(Ft.battleLoader.monsterId>0&&(o=Ft.battleLoader.monsterId),(i=Xe.getMonster(o,ti.ww*n+(ti.ww-ti.mw)/2,e*ti.ww+(ti.ww-ti.mw)/2)).splitTimes=1,a||(a=1==i.sysEnemy.isBoss,t=i.sysEnemy),Me.homeData.isGuide&&(this.guideMonster=i,this.guideMonster.hide())),o==w.DOOR){let t=ti.get3D(n,e);Ft.door||(Ft.door=Laya.loader.getRes("h5/effects/door/monster.lh"),Ft.layer3d.addChild(Ft.door),Ft.door.transform.translate(t)),Ft.door.transform.localPositionX=t.x,Ft.door.transform.localPositionZ=t.z}else if(o==w.GUIDE){let t=ti.get3D(n,e);this.guideCircle=Laya.loader.getRes("h5/effects/guide/monster.lh"),this.guideCircle.transform.translate(t),this.guideCircle.transform.localPositionX=t.x,this.guideCircle.transform.localPositionZ=t.z}s++}this._top.setBoss(a,t),Ft.closeDoor(),i&&(i.hurt(0,!1),Ft.e0_=i),Ft.bg.drawR(a),Ft.ro=new Mt,Ft.ro.resetPos(),this.addChild(Ft.ro),Ft.hero.init(),Ft.lastLevel=Ft.level,Ft.bg.updateY(),Gt.npcPro&&Ft.dropDiamond(Gt.npcPro),this.setGuide("滑动摇杆，控制角色到达指定位置。",1),Me.homeData.isGuide&&u.sdkManager.log(r.BATTLE_GUIDE_1),Laya.MouseManager.multiTouchEnabled=!1,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.md),Laya.stage.on(Laya.Event.KEY_PRESS,this,this.onOpenDoor),Laya.Browser.window.tt&&(u.sdkManager.recorder(),this._top.btnRecord.visible=!0)}setGuide(e,t){this._guideTalk&&this._guideTalk.removeSelf(),Me.homeData.isGuide&&(Me.guideId=t,this._guideTalk||(this._guideTalk=new Rt),this.addChild(this._guideTalk),this._guideTalk.setContent(e,t),Laya.stage.on(h.SHOW_ACTION_RECT,this,this.showActionRect))}showActionRect(e){if(this._guideArea&&this._guideArea.removeSelf(),Me.homeData.isGuide)if(1==Me.guideId)this._guideArea||(this._guideArea=new Xt),this.addChild(this._guideArea),this._guideArea.y=Laya.stage.height-this._guideArea.height,Ft.layer3d.addChild(this.guideCircle),Me.guideId=3,Me.homeData.isGuide&&u.sdkManager.log(r.BATTLE_GUIDE_2);else if(2==Me.guideId){let e=new I.test.zhaohuanUI;Ft.bloodLayer.addChild(e),e.pos(this.guideMonster.hbox.cx,this.guideMonster.hbox.cy),setTimeout(()=>{e.removeSelf(),this.guideMonster.show(),Me.guideId=4,this.guideCircle&&this.guideCircle.removeSelf(),Me.homeData.isGuide&&u.sdkManager.log(r.BATTLE_GUIDE_4)},800)}}onOpenDoor(e){111==e.nativeEvent.keyCode&&(Ft.hero.busi=!0)}kd(e){Ft.executor.isRun?Ft.executor.stop_():Ft.executor.start()}md(e){if(Ft.state>0)return;if(1==Me.guideId||2==Me.guideId)return;Laya.stage.off(Laya.Event.MOUSE_DOWN,this,this.md),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.up);let t=Laya.stage.mouseX,i=Laya.stage.mouseY;Ft.ro.x=t,Ft.ro.y=i,this.addChild(Ft.ro),Laya.stage.frameLoop(1,this,this.moves),Ft.executor.isRun&&(Ft.hero.getGameAi().run=!0)}up(e){Laya.stage.off(Laya.Event.MOUSE_UP,this,this.up),Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.md),Ft.ro&&Ft.ro.parent&&(Ft.ro.resetPos(),Ft.ro.reset()),Laya.stage.clearTimer(this,this.moves),Ft.executor.isRun&&(Ft.hero.getGameAi().run=!1)}moves(){if(Ft.state>0)return;let e=Laya.stage.mouseX,t=Laya.stage.mouseY;Ft.ro.setSp0(e,t)}}class jt{}jt.WUDI_5009=5009,jt.FIRE_2001=2001,jt.FIRE_5001=5001,jt.DU_2002=2002,jt.DU_5002=5002,jt.ICE_2003=2003,jt.ICE_5003=5003;var Ot=Laya.Sprite3D;class Ft{constructor(){}static selectEnemy(e){Ft.e0_=e;let t=e.sysEnemy.zoomMode/100;t=1/t,Ft.e0_.sp3d&&Ft.e0_.sp3d.transform&&(Ft.e0_.sp3d.addChild(Ft.selectFoot),Ft.e0_.addSprite3DToChild("guadian",Ft.selectHead),Ft.selectHead.transform.localScaleX=t,Ft.selectHead.transform.localScaleY=t,Ft.selectHead.transform.localScaleZ=t,Ft.selectFoot.transform.localScaleX=t,Ft.selectFoot.transform.localScaleY=t,Ft.selectFoot.transform.localScaleZ=t)}static updateMap(){Ft.map0&&Ft.bg&&(Ft.bloodLayer.pos(Ft.bg.x,Ft.bg.y),Ft.frontLayer.pos(Ft.bg.x,Ft.bg.y),Ft.footLayer.pos(Ft.bg.x,Ft.bg.y),Ft.topLayer.pos(Ft.bg.x,Ft.bg.y),Ft.map0.pos(Ft.bg.x,Ft.bg.y))}static openDoor(){Ft.isOpen||(console.log("开门"),Ft.battleLoader.index>=m.getTotal(Ft.battleLoader.chapterId)&&1e5!=Ft.battleLoader._configId&&(console.log("通关了"),Me.homeData.isPass=!0,Ft.battleLoader.chapterId>=Me.homeData.chapterId&&(Me.homeData.chapterId++,Me.homeData.setChapterId(Me.homeData.chapterId,0)),Ft.battleLoader.index=0,Me.homeData.mapIndex=0),Ft.cookie.setCookie(rt.CURRENT_BATTLE,{mapId:Ft.battleLoader.mapId,index:Ft.battleLoader.index,configId:Ft.battleLoader._configId,curhp:Ft.hero.gamedata.hp,maxhp:Ft.hero.gamedata.maxhp,skills:Ft.skillManager.skills,coins:Ft.battleCoins,chapterId:Ft.battleLoader.chapterId}),Ft.isOpen=!0,Me.homeData.isGuide?(Me.homeData.chapterId=1,Ft.scenneM.battle.setGuide("通过传送进入下一关。",5),u.sdkManager.log(r.BATTLE_GUIDE_5),Me.homeData.isGuide=!1,Ft.battleLoader.index=1,Ft.battleLoader.chapterId=1,K.randomDiamond(Ft.battleLoader.chapterId),Me.homeData.setChapterId(Me.homeData.chapterId,1),Ft.battleGuide=9999):Me.homeData.isPass||(Ft.battleLoader.index++,Ft.battleLoader.chapterId==Me.homeData.chapterId&&Me.homeData.mapIndex<Ft.battleLoader.index&&(Me.homeData.mapIndex=Ft.battleLoader.index-1,Me.homeData.setChapterId(Me.homeData.chapterId,Me.homeData.mapIndex))),Ft.bg.setDoor(1),Ft.layer3d.addChild(Ft.door),Ft.map0.setDoor(!0),Ft.shakeBattle(),Ft.battleLoader.clearMonster(!0),Me.saveData())}static shakeBattle(){Ft.scenneM.battle.pos(0,0),Z.execute(Ft.scenneM.battle,75,4)}static closeDoor(){console.log("关门===================="),Ft.isOpen=!1,Ft.door&&Ft.door.removeSelf(),Ft.map0.setDoor(!1),Ft.bg.setDoor(0)}static setSelectEffect(){Ft.selectHead||(Ft.selectHead=Laya.Sprite3D.instantiate(Laya.loader.getRes("h5/effects/head/monster.lh")),Ft.selectHead.addComponent(Ne)),Ft.selectFoot||(Ft.selectFoot=Laya.Sprite3D.instantiate(Laya.loader.getRes("h5/effects/foot/hero.lh")),Ft.selectFoot.addComponent(O))}static reset(){Ft.state=0,Ft.isPopupSkill=0,Ft.bloodLayer.removeChildren(),Ft.frontLayer.removeChildren(),Ft.footLayer.removeChildren(),Ft.layer3d.removeChildren(),Ft.layer3dCoins.removeChildren(),Ft.layer3dCube.removeChildren(),Ft.topLayer.removeChildren(),Ft.selectHead&&Ft.selectHead.removeSelf(),Ft.selectFoot&&Ft.selectFoot.removeSelf(),Ft.map0.reset(),Ft.e0_=null,Ft.executor&&Ft.executor.stop_(),Ft.ro&&Ft.ro.destroy()}static getRandPos(e,t=4){let i=Math.floor(e.hbox.y/ti.ww),a=Math.floor(e.hbox.x/ti.ww),s=t;var n=Ft.map0.info,o=[];for(let e=i-s;e<=i+s;e++)if(!(e<=3||e>=ti.MAP_ROW-3))for(let t=a-s;t<=a+s;t++)if((t!=i||e!=a)&&!(t<=1||t>=ti.MAP_COL-1)){var h=n[e+"_"+t];if(null!=h&&0==h){let i=[t,e];o.push(i)}}var r=[];o.length>0&&(r=o[Math.floor(o.length*Math.random())]);return 0==r.length&&(r=[i,a]),r}static showMain(){Be.recover(),Ft.selectFoot&&Ft.selectFoot.removeSelf(),Ft.selectHead&&Ft.selectHead.removeSelf(),Ft.skillManager.clear(),Ft.battleLoader.index=1,Ft.rebornTimes=2,Ft.hero&&(Ft.hero.resetBlood(),Ft.hero.resetSkill(),Ft.hero.resetAI()),Ft.battleExp=Ft.heroExp=0,Ft.battleLoader.clearMonster(),Ft.scenneM.showMain(),Ft.map0&&(Ft.map0.Eharr.length=0),Ft.AiArr.length=0,Ft.playBgMusic(),Ft.showCoinsNum>0&&(Ft.showCoinsNum=Ft.showCoinsNum+Math.floor(Ft.showCoinsNum*Me.talentData.lineGold/100),Laya.stage.event(h.ADD_COIN,Ft.showCoinsNum),Ft.showCoinsNum=0),Ft.showBlueNum=Ft.showRedNum=0,Laya.stage.event(h.SHOW_MAIN)}static playBgMusic(){Ft.playMusic("menu.mp3")}static playBattleMusic(){Ft.playMusic("state_fight.mp3")}static playMusic(e){Ft.cookie.getCookie(rt.MUSIC_SWITCH,t=>{null!=t&&1!=t.state||u.soundManager.play(e,!0)})}static playSound(e){Ft.cookie.getCookie(rt.SOUND_SWITCH,t=>{1==t.state&&u.soundManager.play(e)})}static dropDiamond(e){Ft.showBlueNum=Ft.showRedNum=0,0==Ft.map0.Eharr.length&&(Ft.battleLoader.index==K.dropIndex&&(K.blueNum>0?Ee.addEffect(e,K.blueNum,Te.TYPE_BLUE):K.redNum>0&&Ee.addEffect(e,K.redNum,Te.TYPE_RED)),Ft.battleLoader.index==K.heartIndex&&K.heartNum>0&&(Ee.addEffect(e,K.heartNum,Te.TYPE_HEART),setTimeout(()=>{Ee.flyHeart()},1e3)))}}Ft.codeVer="3.0.0.200118",Ft.resVer="3.0.0.200118",Ft.nativefiles=["loading/jianduxia.png","loading/jiandushang.png","loading/jiazai.jpg","loading/btn_kaishi.png","loading/dan.png","loading/loadingClip.png","loading/logo.png","loading/shouci.png","loading/zhudi.jpg"],Ft.userHeadUrl="",Ft.userName="",Ft.poolTagArr={},Ft.isStartBattle=!1,Ft.TestShooting=0,Ft.BigMapMode=1,Ft.state=0,Ft.isPopupSkill=0,Ft.rebornTimes=2,Ft.Event_MAIN_DIE="Event_MAIN_DIE",Ft.Event_PlayStop="Game.Event_PlayStop",Ft.Event_Short="Game.Event_Short",Ft.Event_Hit="Game.Event_Hit",Ft.Event_KeyNum="Game.Event_KeyNum",Ft.Event_ADD_HP="Event_ADD_HP",Ft.Event_UPDATE_ATTACK_SPEED="Event_UPDATE_ATTACK_SPEED",Ft.Event_NPC="Event_NPC",Ft.Event_COINS="Event_COINS",Ft.Event_EXP="Event_EXP",Ft.Event_LEVEL="Event_LEVEL",Ft.Event_SELECT_NEWSKILL="Event_SELECT_NEWSKILL",Ft.skillManager=new class{constructor(){this.skillList=[],this.arrowHeadId=0,this.skinsHeads=[2001,2002,2003,2004],this.skinSkills=[5001,5002,5003,5004,5005,5009]}clear(){this.skillList.length=0,this.arrowHeadId=0,Ze.reset()}get skills(){let e="";for(let t=0;t<this.skillList.length;t++)e+=","+this.skillList[t].id+"_"+this.skillList[t].curTimes;return e=e.substring(1)}addArrowHead(e){this.arrowHeadId=e,Laya.loader.create(["h5/bullets/skill/"+e+"/monster.lh"])}addSkill(e){if(null!=e){if(-1!=this.skinsHeads.indexOf(e.id)&&this.addArrowHead(e.id),e){let t=this.isHas(e.id);t?t.curTimes<t.upperLimit&&t.curTimes++:(this.skillList.push(e),e.curTimes++)}-1!=this.skinSkills.indexOf(e.id)&&Laya.loader.create(["h5/bullets/skill/"+e.id+"/monster.lh"]),e.id==jt.WUDI_5009&&Ft.hero.addBuff(jt.WUDI_5009),this.addAttack(),this.addAttackSpeed()}}addAttack(){let e,t=it.curHeroData.atk,i=this.isHas(3002);i&&(e=u.tableManager.getDataByNameAndId(Pe.NAME,i.skillEffect1))&&(t+=i.curTimes*e.addAttack),e=null;let a=this.isHas(3003);return a&&(e=u.tableManager.getDataByNameAndId(Pe.NAME,a.skillEffect1))&&(t+=a.curTimes*e.addAttack),t}addAttackSpeed(){let e,t=it.curHeroData.atkSpeed,i=this.isHas(3004);if(i&&(e=u.tableManager.getDataByNameAndId(Pe.NAME,i.skillEffect1)))for(let a=0;a<i.curTimes;a++)t*=1-e.addSpeed/1e3;e=null;let a=this.isHas(3005);if(a&&(e=u.tableManager.getDataByNameAndId(Pe.NAME,a.skillEffect1))){let i=1;for(let t=0;t<a.curTimes;t++)i*=e.addSpeed/1e3;t*=1-i}return t}isHas(e){for(let t=0;t<this.skillList.length;t++)if(this.skillList[t].id==e)return this.skillList[t];return null}removeSkill(e){let t=this.isHas(e);if(t){let e=this.skillList.indexOf(t);e>=0&&this.skillList.splice(e,1)}}getRotateSkills(){let e=[5001,5002,5003,5004],t=[];for(let i=0;i<e.length;i++)this.isHas(e[i])&&t.push(e[i]);return t}getRandomSkillByNpcId(e){let t=u.tableManager.getDataByNameAndId(ot.NAME,e).skillRandom.split(",");for(let e=0;e<this.skillList.length;e++){let i=this.skillList[e];if(i&&i.curTimes>=i.upperLimit){let e=t.indexOf(i.id+"");-1!=e&&t.splice(e,1)}}let i=Math.floor(Math.random()*t.length);return Number(t[i])}},Ft.AiArr=[],Ft.HeroArrows=[],Ft.layer3d=new Ot,Ft.layer3dCube=new Ot,Ft.layer3dCoins=new Ot,Ft.cameraY=10,Ft.sqrt3=10*Math.sqrt(3),Ft.footLayer=new Laya.Sprite,Ft.bloodLayer=new Laya.Sprite,Ft.frontLayer=new Laya.Sprite,Ft.topLayer=new Laya.Sprite,Ft.scenneM=new class{constructor(){}showMain(){this.main||(this.main=new St),Ft.isStartBattle=!1,u.layerManager.sceneLayer.removeChildren(),u.layerManager.sceneLayer.addChild(this.main),this.main.y=(Laya.stage.height-Laya.stage.designHeight)/2,this.battle&&this.battle._top&&this.battle._top.reset(),this.battle&&this.battle.up(null)}showBattle(){this.battle||(this.battle=new Gt),u.layerManager.sceneLayer.removeChildren(),u.layerManager.sceneLayer.addChild(this.battle),Ft.playBattleMusic()}},Ft.buffM=new class{constructor(){this.buffArr=[]}exe(e){for(let t=0;t<this.buffArr.length;t++)this.buffArr[t].exe(e)}addBuff(e,t,i){let a=new(Laya.ClassUtils.getRegClass("BUFF"+e))(e);if(a.to=t,this.buffArr.push(a),i){a.bullet=i,a.hurtValue=i.hurtValue,a.startTime+=Ft.executor.getWorldNow();let t=i.buffAry.indexOf(e);t>-1&&i.buffAry.splice(t,1)}}removeBuff(e){let t=e.to.buffAry.indexOf(e.skill.id);-1!=t&&e.to.buffAry.splice(t,1);let i=this.buffArr.indexOf(e);i>-1&&this.buffArr.splice(i,1)}},Ft.battleLoader=new class{constructor(){this.chapterId=0,this._index=1,this.resAry=[],this.pubResAry=[],this.isLoadPub=!1,this._isHeroLoaded=!1,this._isMonsterLoaded=!1,this.monsterRes={},this.cubeRes={},this._configId=0,this.monsterId=0,this.curBoTimes=0,this.maxBoTimes=0,this.bgRes={}}get index(){return this._index}set index(e){this._index=e}get mapId(){return this._mapId}onRelease(){}clearMonster(e=!1){for(let e in _.map)_.map[e]&&delete _.map[e];for(let e in this.monsterRes)if(""!=e){let t=Laya.loader.getRes(e);t&&t.destroy(!0)}if(!e)for(let e in this.cubeRes)if(""!=e){let t=Laya.loader.getRes(e);t&&t.destroy(!0)}let t=[Ae.TAG,Te.TAG,Ce.TAG];for(let e in Ft.poolTagArr)t.push(e);for(let e=0;e<t.length;e++){let i=Laya.Pool.getPoolBySign(t[e]);for(let e=0;e<i.length;e++){let t=i[e].sp3d;t&&(t.destroy(!0),t=null),i[e]=null}i.length>0&&Laya.Pool.clearBySign(t[e])}Laya.Resource.destroyUnusedResources()}load(e){if(Be.recover(),this.clearMonster(),this.continueRes=e,Ft.scenneM.battle&&Ft.scenneM.battle.up(null),Ft.ro&&Ft.ro.removeSelf(),this._loading||(this._loading=new I.test.LoadingUI,this._loading.mouseEnabled=!1),u.layerManager.alertLayer.addChild(this._loading),Ft.bg&&Ft.bg.clear(),this._loading.txt.text="0%",this.continueRes)this.chapterId=this.continueRes.chapterId,this._mapId=this.continueRes.mapId,this._index=this.continueRes.index,this._configId=this.continueRes.configId,Ft.battleCoins=this.continueRes.coins;else{let e,t=m.getTotal(this.chapterId);if(this._index>t&&(this._index=1),this._mapId=1e3*this.chapterId+this._index,Me.homeData.isGuide)e=1e5;else{this.sysMap=m.getData(this.chapterId,this._index),this.curBoTimes=0,this.maxBoTimes=this.sysMap.numEnemy,this.monsterGroup=this.sysMap.enemyGroup.split(",");let t=this.sysMap.stageGroup.split(",");e=Number(t[Math.floor(t.length*Math.random())])}this._configId=e}u.sdkManager.log(this._configId),console.log("当前地图",this._mapId,this._configId),Laya.loader.load("h5/mapConfig/"+this._configId+".json",new Laya.Handler(this,this.loadBg))}preload(){Laya.loader.load(["res/atlas/shengli.atlas","res/atlas/texiao/jiaxue.atlas","res/atlas/bg.atlas","res/atlas/jiesuan.atlas"],Laya.Handler.create(this,this.onCompletePre))}onCompletePre(){console.log("2D资源加载完毕"),this.loadHeroRes()}loadHeroRes(){let e=["h5/effects/door/monster.lh","h5/effects/foot/hero.lh","h5/effects/head/monster.lh","h5/bulletsEffect/20000/monster.lh","h5/bullets/skill/5009/monster.lh","h5/bullets/20000/monster.lh"];e.push("h5/hero/"+Me.heroData.nowRoleId+"/hero.lh"),Me.homeData.isGuide&&e.push("h5/effects/guide/monster.lh"),Laya.loader.create(e,Laya.Handler.create(this,this.onCompleteHero),new Laya.Handler(this,this.onProgress))}onCompleteHero(){console.log("主角所需资源加载完毕"),this._isHeroLoaded=!0,this.allLoadCom()}loadBg(){let e=Laya.loader.getRes("h5/mapConfig/"+this._configId+".json");ti.MAP_ROW=e.rowNum,ti.MAP_COL=e.colNum,ti.MAP_ROW2=Math.floor(.5*ti.MAP_ROW),ti.MAP_COL2=Math.floor(.5*ti.MAP_COL),ti.bgId=e.bgId,ti.bgWW=e.bgWidth,ti.bgHH=e.bgHeight,ti.bgHHReal=e.bgHeight,ti.bgCellWidth=e.cellWidth,ti.bgHH<1700&&(ti.bgHH=1700),ti.arr0=e.arr;let t=this.chapterId;t=Math.max(t,1),ti.BG_TYPE_NUM=t,ti.BG_TYPE="map_"+t,Laya.loader.clearRes("h5/mapConfig/"+this._configId+".json"),this.bgRes[ti.BG_TYPE_NUM]=ti.BG_TYPE_NUM,Laya.loader.load("res/atlas/map_"+t+".atlas",new Laya.Handler(this,this.onLoadMonster))}onLoadMonster(){let e;this.resAry.length=0,this.monsterRes={},this.cubeRes={};let t=0;for(let e=0;e<ti.MAP_ROW;e++)for(let e=0;e<ti.MAP_COL;e++){let e=ti.arr0[t];t<ti.arr0.length&&(null==this.continueRes&&x.isMonster(e)?this.getMonsterRes(e):x.isCube(e)&&this.getSceneRes(e)),t++}for(let e in this.monsterRes)""!=e&&this.resAry.push(e);if(this.resAry.length>0){let t=["h5/effects/monsterDie/monster.lh","h5/coins/1001/monster.lh","h5/effects/boom/monster.lh"];for(let i=0;i<t.length;i++)e=t[i],this.monsterRes[e]=e,this.resAry.push(e)}if(this.index==K.dropIndex){let e;K.blueNum>0?(e="h5/coins/1002/monster.lh",this.monsterRes[e]=e,this.resAry.push(e)):K.redNum>0&&(e="h5/coins/1003/monster.lh",this.monsterRes[e]=e,this.resAry.push(e))}this.index==K.heartIndex&&K.heartNum>0&&(e="h5/coins/1004/monster.lh",this.monsterRes[e]=e,this.resAry.push(e));for(let e in this.cubeRes)""!=e&&this.resAry.push(e);null==Laya.loader.getRes("h5/hero/"+Me.heroData.nowRoleId+"/hero.lh")&&this.resAry.push("h5/hero/"+Me.heroData.nowRoleId+"/hero.lh"),this._isMonsterLoaded=!1,console.log("资源列表",this.resAry),this.resAry.length>0?Laya.loader.create(this.resAry,Laya.Handler.create(this,this.onCompleteMonster),new Laya.Handler(this,this.onProgress)):this.onCompleteMonster()}getSceneRes(e){let t="h5/wall/"+Be.getType(e)+"/monster.lh";this.cubeRes[t]=t}onCompleteMonster(){console.log("怪物所需资源加载完毕"),this._isMonsterLoaded=!0,this.allLoadCom()}onProgress(e){this._loading&&(e=Math.ceil(100*e),e=Math.min(e,100),this._loading.txt.text=e+"%")}allLoadCom(){this._isHeroLoaded&&this._isMonsterLoaded&&(console.log("所有资源都加载完毕"),Ee.coinsAry.length=0,Ee.hearAry.length=0,Ft.scenneM.showBattle(),Ft.scenneM.battle.init(),this._loading.removeSelf())}getMonsterRes(e){console.log("怪物id",e);let t="",i=u.tableManager.getDataByNameAndId(y.NAME,e);if(t="h5/monsters/"+i.enemymode+"/monster.lh",this.monsterRes[t]=t,i.normalAttack>0){let e=u.tableManager.getDataByNameAndId(f.NAME,i.normalAttack);e.bulletMode>0&&(t="h5/bullets/"+e.bulletMode+"/monster.lh",this.monsterRes[t]=t),e.boomEffect>0&&(t="h5/bulletsEffect/"+e.boomEffect+"/monster.lh",this.monsterRes[t]=t)}if(i.skillId.length>0&&"0"!=i.skillId)for(var a=i.skillId.split(","),s=0;s<a.length;s++){let e=Number(a[s]);if(e>0){let i=u.tableManager.getDataByNameAndId(f.NAME,Number(e));if(i.bulletMode>0&&(t="h5/bullets/"+i.bulletMode+"/monster.lh",this.monsterRes[t]=t),i.boomEffect>0&&(t="h5/bulletsEffect/"+i.boomEffect+"/monster.lh",this.monsterRes[t]=t),"0"!=i.callInfo){let e=i.callInfo.split("|");for(let t=0;t<e.length;t++){let i=e[t].split(",");if(3==i.length){let e=Number(i[0]);this.getMonsterRes(e)}}}}}}},Ft.isOpen=!1,Ft.battleCoins=0,Ft.battleExp=0,Ft.heroExp=0,Ft.showCoinsNum=0,Ft.showBlueNum=0,Ft.showRedNum=0;class Wt extends I.test.SawHengUI{constructor(e,t,i){super(),this.line=new Qt,this.bg.width=i,this.pos(e,t),this.line.startX=e,this.line.startY=t,this.line.endX=e+i,this.line.endY=t}}class qt extends I.test.HengjuUI{constructor(e,t,i){super(),this.hbox=new N(56,56),this.cd=0,this.status=0,this.ww=i,this.ww-=ti.ww,this.pos(e+ti.ww2+5,t+ti.ww2),this.startX=this.x,this.on(Laya.Event.UNDISPLAY,this,this.onUnDis),this.on(Laya.Event.DISPLAY,this,this.onDis),this.box.scrollRect=new Laya.Rectangle(0,0,58,35)}onUnDis(){this.clearTimer(this,this.onLoop),this.huoxing.stop()}onDis(){this.frameLoop(1,this,this.onLoop),this.huoxing.play()}onLoop(){this.dianju.rotation+=20,0==this.status?this.x+=4:this.x-=4,this.x>=this.startX+this.ww?(this.status=1,this.scaleX=-1):this.x<=this.startX&&(this.status=0,this.scaleX=1),this.hbox.setXY(this.x,this.y),this.checkHero()}checkHero(){Ft.executor.getWorldNow()>=this.cd&&N.faceToLenth(this.hbox,Ft.hero.hbox)<ti.ww2&&Ft.hero.hbox.linkPro_&&(Ft.hero.hbox.linkPro_.event(Ft.Event_Hit,Ft.bg.saw.pro),this.cd=Ft.executor.getWorldNow()+1e3)}}class Kt extends I.test.SawZongUI{constructor(e,t,i){super(),this.line=new Qt,this.bg.height=i,this.pos(e,t),this.line.startX=e,this.line.startY=t,this.line.endX=e,this.line.endY=t+i}}class Zt extends I.test.ZongjuUI{constructor(e,t,i){super(),this.hbox=new N(35,70),this.cd=0,this.status=0,this.ww=i,this.ww-=ti.ww,this.pos(e+ti.ww2,t+ti.ww2),this.startY=this.y,this.on(Laya.Event.UNDISPLAY,this,this.onUnDis),this.on(Laya.Event.DISPLAY,this,this.onDis)}onUnDis(){this.clearTimer(this,this.onLoop),this.shudianju.stop(),this.shuhuoxing.stop()}onDis(){this.shudianju.play(),this.shuhuoxing.play(),this.frameLoop(1,this,this.onLoop)}onLoop(){0==this.status?this.y+=4:this.y-=4,this.y>=this.startY+this.ww?(this.status=1,this.scaleY=-1):this.y<=this.startY&&(this.status=0,this.scaleY=1),this.hbox.setXY(this.x,this.y),this.checkHero()}checkHero(){Ft.executor.getWorldNow()>=this.cd&&N.faceToLenth(this.hbox,Ft.hero.hbox)<ti.ww2&&Ft.hero.hbox.linkPro_&&(Ft.hero.hbox.linkPro_.event(Ft.Event_Hit,Ft.bg.saw.pro),this.cd=Ft.executor.getWorldNow()+1e3)}}class Jt extends Laya.Sprite{constructor(){super(),this.hengAry=[],this.zongAry=[],this.hengJuAry=[],this.zongJuAry=[],this.pro=new j(0),this.pro.hurtValue=150}addBg(e,t,i,a){if(1==a){let a=new Wt(e,t,i);this.addChild(a),this.hengAry.push(a);let s=new qt(e,t,i);this.hengJuAry.push(s)}else if(2==a){let a=new Kt(e,t,i);this.addChild(a),this.zongAry.push(a);let s=new Zt(e,t,i);this.zongJuAry.push(s)}}updateSaw(){for(var e=0;e<this.hengAry.length;e++)for(var t=0;t<this.zongAry.length;t++)if(this.zongAry[t].line.startX>this.hengAry[e].line.startX&&this.zongAry[t].line.startX<this.hengAry[e].line.endX&&this.zongAry[t].line.startY<this.hengAry[e].line.startY&&this.zongAry[t].line.endY>this.hengAry[e].line.startY){let i=this.zongAry[t].line.startX,a=this.hengAry[e].line.startY,s=new Laya.Image;s.skin="bg/503.png",this.addChild(s),s.pos(i,a+1)}for(e=0;e<this.hengJuAry.length;e++)this.addChild(this.hengJuAry[e]);for(e=0;e<this.zongJuAry.length;e++)this.addChild(this.zongJuAry[e])}clear(){this.removeChildren(),this.hengAry.length=this.zongAry.length=this.hengJuAry.length=this.zongJuAry.length=0}}Jt.TAG="SAW";class Qt{}var $t=Laya.Image,ei=Laya.Sprite;class ti extends Laya.Sprite{constructor(){super(),this.maskImg=new Laya.Image,this.bottomImg=new Laya.Image,this.bgh=0,this._box=new ei,this._top=new $t,this._bossImg=new $t,this._bottom=new $t,this._topShadow=new $t,this._leftShadow=new $t,this._door=new $t,this.saw=new Jt,this._sawInfo={},this._sawInfoZong={},this.npcId=0,this.npcP=new Laya.Point,this.npcDic={},ti.gameBG=this,this.mySp=new ei,this.mySp.graphics.drawRect(0,0,ti.mw,ti.mw,65280),this.doorNumber=z.getFontClip(.3)}static get3D(e,t){ti.v3d||(ti.v3d=new Laya.Vector3(0,0,0)),ti.v3d.x=e-6;let i=ti.bgHH/ti.ww/2;return ti.v3d.z=(t-i+.5)/Ft.cameraCN.cos0,ti.v3d}getBgh(){return this.bgh}isHit(e,t){var i=e-ti.mw2,a=t-ti.mw2,s=!1;for(let e=0;e<ti.arrsp.length;e++){var n=ti.arrsp[e];this.isHit_(i,a,n)&&(s=!0)}return s}isHit_(e,t,i){return e<i.x+ti.ww&&e+ti.mw>i.x&&t<i.y+ti.ww&&ti.mw+t>i.y}setZhuan(e){}updata(e,t){this.mySp.x=e-ti.mw2,this.mySp.y=t-ti.mw2}clear(){this._box.removeChildren(),this.saw.clear(),this._sawInfo={},this._sawInfoZong={},this.npcId=0,this._npcAni&&this._npcAni.removeSelf(),this._npcAni=null}drawR(e=!1){this.npcId=0;var t=ti.ww,i=0;let a=0;this.addChild(this._box),this.addChild(this.saw),this._box.cacheAs="bitmap";let s=0;this._box.graphics.clear();for(let e=0;e<ti.MAP_ROW;e++){ti.MAP_COL%2==0&&s++;for(let i=0;i<ti.MAP_COL;i++){let a=s%2==0?ti.BG_TYPE+"/10.png":ti.BG_TYPE+"/11.png";this._box.graphics.drawImage(Laya.loader.getRes(a),i*t,e*t,64,64),s++}}i=0;for(let e=0;e<ti.MAP_ROW;e++)for(let s=0;s<ti.MAP_COL;s++){if(a=ti.arr0[i],x.isWall(a)||a>=1&&a<=10){let i=ii.getOne(ti.BG_TYPE+"/y"+Be.getType(a)+".png");i.x=s*t,i.y=e*t,this._box.addChild(i)}else if(x.isFence(a)){let i=ii.getOne("bg/lanying.png");i.width=200,i.x=s*t-64,i.y=e*t+50,this._box.addChild(i)}i++}i=0;for(let e=0;e<ti.MAP_ROW;e++){this.bgh+=ti.ww;for(let t=0;t<ti.MAP_COL&&!(i>ti.arr0.length);t++){a=ti.arr0[i];let s=t*ti.ww,h=e*ti.ww;var n,o;if(x.isRiverPoint(a))(o=ii.getOne(ti.BG_TYPE+"/100.png")).pos(s,h),this._box.addChild(o);else if(x.isThorn(a))(n=$e.getOne()).hbox.setXY(s,h),n.pos(s,h),this._box.addChild(n);else if(x.isRiverScale9Grid(a)||x.isRiverScale9Grid2(a)||x.isRiverRow(a)||x.isRiverCol(a))(o=ii.getOne(ti.BG_TYPE+"/"+a+".png")).pos(s,h),this._box.addChild(o);else if(x.isFlower(a))(o=ii.getOne(ti.BG_TYPE+"/"+a+".png")).pos(s,h),this._box.addChild(o);else if(x.isSawHeng(a)){if(null==this._sawInfo[a]){let e=[];this._sawInfo[a]=e}let e=new Laya.Point(s,h);this._sawInfo[a].push(e)}else if(x.isSawZong(a)){if(null==this._sawInfoZong[a]){let e=[];this._sawInfoZong[a]=e}let e=new Laya.Point(s,h);this._sawInfoZong[a].push(e)}else if(x.isNpc(a)&&(this.npcId=a,this.npcP.x=s+ti.ww2,this.npcP.y=h,this.npcId==w.ANGLE)){if(this.npcId=1001,null==this.npcDic[this.npcId]){let e=Laya.ClassUtils.getClass("NPC"+this.npcId);this._npcAni=new e,this.npcDic[this.npcId]=this._npcAni}else this._npcAni=this.npcDic[this.npcId];this.showNpc()}a==w.DOOR?(this._door.pos(s-ti.ww2,h-ti.ww2),this._door.skin="bg/door.png"):a==w.HERO&&(it.bornX=s,it.bornY=h),i++}}this.saw.clear();for(let e in this._sawInfo){let t=this._sawInfo[e],i=t[0],a=t[1].x-t[0].x+ti.ww;this.saw.addBg(i.x,i.y,a,1)}for(let e in this._sawInfoZong){let t=this._sawInfoZong[e],i=t[0],a=t[1].y-t[0].y+ti.ww;this.saw.addBg(i.x,i.y,a,2)}this._box.addChild(this._door),this.saw.updateSaw(),this.startX=ti.ww2,this.x=-this.startX,this.y=.5*(Laya.stage.height-ti.bgHH),ti.cx=this.x,ti.cy=this.y,this.addChild(this.maskImg),this.addChild(this.bottomImg),this.maskImg.skin="battleBg/"+ti.BG_TYPE_NUM+".png",this.maskImg.sizeGrid="506,421,801,321",this.maskImg.width=ti.bgWW,this.maskImg.height=ti.bgHHReal,this.bottomImg.width=ti.bgWW,this.bottomImg.height=500,this.bottomImg.y=this.maskImg.y+this.maskImg.height,this.bottomImg.skin="battleBg/bottom_"+ti.BG_TYPE_NUM+".jpg"}showGuidePointer(){}hideGuidePointer(){}showNpc(){this._npcAni&&(this._npcAni.scale(1,1),Ft.topLayer.addChild(this._npcAni),this._npcAni.pos(this.npcP.x,this.npcP.y-800),Laya.Tween.to(this._npcAni,{y:this.npcP.y},300,Laya.Ease.circIn))}checkNpc(){if(!(this.npcId<=0)&&Ft.map0.checkNpc()){if(Ft.scenneM.battle.up(null),this.npcId==w.OTHER_NPC){this.npcId=0;let e=Ft.hero.lossBlood();this.npcId=e<=0?1002:e<=.1?1002:1001}else this.npcId==w.ANGLE&&(this.npcId=1001);this.npcId}}clearNpc(){this._npcAni&&(Laya.Tween.to(this._npcAni,{scaleX:.3},200,null,null,100),Laya.Tween.to(this._npcAni,{y:-300},300,Laya.Ease.circIn,new Laya.Handler(this,this.clearNpcCom),300))}clearNpcCom(){this._npcAni&&this._npcAni.removeSelf(),Ft.map0.clearNpc(),this.npcId=0,this._npcAni=null,0==Ft.map0.Eharr.length&&Ee.fly()}setDoor(e){this._door.visible=1==e}updateY(){var e=ti.cy-Ft.hero.pos2.z;e<=0&&e>=Laya.stage.height-ti.bgHH?(Ft.bg.y=e,Ft.camera.transform.localPositionZ=Ft.cameraCN.z+Ft.hero.z):e<Laya.stage.height-ti.bgHH?(Ft.bg.y=Laya.stage.height-ti.bgHH,Ft.camera.transform.localPositionZ=Ft.cameraCN.z+(ti.cy-Ft.bg.y)/ti.ww/Ft.cameraCN.cos0):(Ft.bg.y=0,Ft.camera.transform.localPositionZ=Ft.cameraCN.z+(ti.cy-Ft.bg.y)/ti.ww/Ft.cameraCN.cos0);let t=this.startX;var i=ti.cx-Ft.hero.pos2.x;i<=-t&&i>=Laya.stage.width-ti.bgWW+t?(Ft.camera.transform.localPositionX=Ft.hero.x,Ft.bg.x=i):i>-t?(Ft.bg.x=-t,Ft.camera.transform.localPositionX=(ti.cx-Ft.bg.x)/ti.ww):(Ft.bg.x=Laya.stage.width-ti.bgWW+t,Ft.camera.transform.localPositionX=(ti.cx-Ft.bg.x)/ti.ww),Ft.updateMap()}}ti.wnum=12,ti.hnum=49,ti.width=750,ti.height=1334,ti.ww=ti.width/ti.wnum,ti.ww2=ti.ww/2,ti.fw=.4*ti.ww,ti.mw=ti.ww-ti.fw,ti.mw2=ti.mw/2,ti.mw4=ti.mw/4,ti.orthographicVerticalSize=ti.wnum*ti.height/ti.width,ti.arrsp=[],ti.arr0=[];class ii extends Laya.Image{constructor(){super(),this.on(Laya.Event.UNDISPLAY,this,this.onUndis)}onInit(e){this.imgUrl||(this.skin=e,this.imgUrl=e)}onUndis(){Laya.Pool.recover(ii.TAG+this.imgUrl,this)}static getOne(e){let t=new ii;return t.onInit(e),t.imgUrl=e,t}}ii.TAG="BgGrid_";class ai{}ai.TEST=0,ai.H5=10,ai.WX=31,ai.TT=5;class si{}si.hit1=1,si.hit2=2,si.hit3=3,si.hit4=4;class ni{constructor(){this.starttime=0,this.playtime=0,this.movelen=0,this.ms=null,this.rad=0,this.now=0,this.cd=1300}ai(e){}isOk(){return Ft.executor.getWorldNow()>=this.now+this.cd}}class oi extends ni{constructor(){super()}zoom(e,t,i){e>1&&(e=1);let a=0;a=.8*t+(a=.2*t*(e=Math.sin(Math.PI*e*4))),i.sp3d.transform.localScaleX=a,i.sp3d.transform.localScaleZ=a,a=1.1*t-(a=.1*t*e),i.sp3d.transform.localScaleY=a}ai(e){if(0!=this.starttime){var t=Ft.executor.getWorldNow(),i=e.tScale;if(t>=this.starttime+this.playtime)e.sp3d.transform.localScaleZ=i,e.sp3d.transform.localScaleX=i,e.sp3d.transform.localScaleY=i,this.starttime=0;else{let a=t-this.starttime;a/=this.playtime,this.zoom(a,i,e)}}}}class hi extends ni{constructor(){super(),this.movelen=2.5*ti.ww,this.futureBox=new N(1,1),this.sp=new Laya.Point(0,0)}move(e){var t=this.movelen*e;let i=0,a=0;for(;a<10;){var s=(i+=t/10)*Math.cos(this.rad),n=i*Math.sin(this.rad);let e=this.sp.x+s,h=this.sp.y+n;if(e>=ti.bgWW-ti.ww||e<=ti.ww||h>=Ft.map0.endRowNum*ti.ww||h<=3*ti.ww)return;this.futureBox.setXY(e,h);var o=Ft.map0.Wharr;if(Ft.map0.chechHit_arr(this.futureBox,o))return;this.ms.setXY2DBox(this.futureBox.x,this.futureBox.y),a++}}zoom(e,t,i){e>1&&(e=1),e<.5&&(e=.5),e*=1,(e=Math.sin(Math.PI*e))<0&&(e*=-1);let a=0;a=.2*t+(a=.8*t*(1-e)),i.sp3d.transform.localScaleZ=a,a=1*t+(a=.2*t*(1-e)),i.sp3d.transform.localScaleX=a}ai(e){if(0!=this.starttime){var t=Ft.executor.getWorldNow(),i=e.tScale;if(t>=this.starttime+this.playtime)e.sp3d.transform.localScaleZ=i,e.sp3d.transform.localScaleX=i,e.sp3d.transform.localScaleY=i,this.starttime=0,this.ms=null;else{this.ms||(this.ms=e,this.rad=e.face2d+Math.PI,this.sp.x=e.hbox.x,this.sp.y=e.hbox.y,this.futureBox.setRq(this.sp.x,this.sp.y,e.hbox.ww,e.hbox.hh));let a=t-this.starttime;a/=this.playtime,this.move(a),this.zoom(a,i,e)}}}}class ri extends ni{constructor(){super(),this.movelen=ti.ww,this.futureBox=new N(1,1),this.sp=new Laya.Point(0,0)}move(e){var t=this.movelen*e,i=t*Math.cos(this.rad),a=t*Math.sin(this.rad);this.futureBox.setXY(this.sp.x+i,this.sp.y+a);var s=Ft.map0.Wharr;Ft.map0.chechHit_arr(this.futureBox,s)||this.ms.setXY2DBox(this.futureBox.x,this.futureBox.y)}zoom(e,t,i){e>1&&(e=1),e<.5&&(e=.5),e*=1,(e=Math.sin(Math.PI*e))<0&&(e*=-1);let a=0;a=.2*t+(a=.8*t*(1-e)),i.sp3d.transform.localScaleZ=a,a=1*t+(a=.2*t*(1-e)),i.sp3d.transform.localScaleX=a}ai(e){if(0!=this.starttime){var t=Ft.executor.getWorldNow(),i=e.tScale;if(t>=this.starttime+this.playtime)e.sp3d.transform.localScaleZ=i,e.sp3d.transform.localScaleX=i,e.sp3d.transform.localScaleY=i,this.starttime=0,this.ms=null;else{this.ms||(this.ms=e,this.rad=e.face2d+Math.PI,this.sp.x=e.hbox.x,this.sp.y=e.hbox.y,this.futureBox.setRq(this.sp.x,this.sp.y,e.hbox.ww,e.hbox.hh));let a=t-this.starttime;a/=this.playtime,this.zoom(a,i,e)}}}}class li extends ni{constructor(){super(),this.flag=!1}move(e,t){this.flag=!this.flag,t.sp3d.transform.localPositionX=t.sp3d.transform.localPositionX+(this.flag?.1:-.1)}ai(e){if(0!=this.starttime){var t=Ft.executor.getWorldNow();if(t>=this.starttime+this.playtime)this.starttime=0;else{let i=t-this.starttime;i/=this.playtime,this.move(i,e)}}}}class pi extends I.test.xiongmao1UI{constructor(){super()}}class di extends I.test.moguiUI{constructor(){super()}}class ci extends I.test.huziUI{constructor(){super()}}class gi{}gi.NOTHAS=0,gi.FLYHIT=1,gi.BULLET=2,gi.STONE=3,gi.SHITOUREN=4,gi.TREE=5,gi.RANDOM_MOVE=6,gi.MOVEHIT=8,gi.REBOUND=9,gi.JUMP_FOLLOW=10,gi.RED_LINE=11;class ui extends je{constructor(e){super(e),this.status=0,this.cd=0,e.sp3d.transform.localPositionY=1,ui.timdex>=4&&(ui.timdex=0),this.cd=Ft.executor.getWorldNow()+2e3*ui.timdex,ui.timdex++,e.setSpeed(1)}exeAI(e){if(this.run_){super.exeAI(e),this.checkHeroCollision();var t=this.pro.sysEnemy;if(!this.pro.isIce){if(0==this.status&&this.now>=this.cd){var i=N.faceTo3D(this.pro.hbox,Ft.hero.hbox);this.pro.rotation(i),this.cd=this.now+1e3,this.status=1,this.pro.acstr!=X.NormalAttack&&(this.pro.play(X.NormalAttack),this.pro.unBlocking=!0)}else 1==this.status&&this.now>=this.cd&&(this.pro.setSpeed(t.moveSpeed),this.cd=this.now+t.enemySpeed,this.status=0,this.pro.unBlocking=!1,this.pro.play(X.Run));1==this.status?this.pro.normalizedTime>.4?(this.pro.setSpeed(10),this.pro.move2D(this.pro.face2d)):(this.pro.setSpeed(1),this.pro.move2D(this.pro.face2d+Math.PI)):0==this.status&&this.traceHero()}}}traceHero(){if(N.faceToLenth(this.pro.hbox,Ft.hero.hbox)>ti.ww2){let e=N.faceTo3D(this.pro.hbox,Ft.hero.hbox);this.pro.rotation(e),this.pro.move2D(this.pro.face2d)}}hit(e){super.hit(e)}}ui.timdex=0;class mi extends X{constructor(e){super(),this.i=0,this.pro=e}hit(e){}exeAI(e){if(!e.move2D(e.face2d))return e.die(),!1}starAi(){this.i=0}stopAi(){this.i=0}}class yi extends I.game.boomRectUI{constructor(){super()}}class wi{constructor(){this.effectId=0}static getEffect(e,t){if(!t)return null;let i=wi.TAG+t.boomEffect;Ft.poolTagArr[i]=i;let a=Laya.Pool.getItemByClass(i,wi);if(t.attackAngle>0&&(a.boomCircle||(a.boomCircle=new yi),Ft.bg._box.addChild(a.boomCircle),a.boomCircle.img.scale(t.attackAngle/64,t.attackAngle/64),a.boomCircle.pos(e.hbox.cx,e.hbox.cy),Laya.timer.once(500,this,()=>{a.recover()}),N.faceToLenth(e.hbox,Ft.hero.hbox)<=t.attackAngle&&(e instanceof Xe?e.hurtValue=e.sysEnemy.enemyAttack:e instanceof Ii&&(e.hurtValue=e.enemy.sysEnemy.enemyAttack),Ft.hero.hbox.linkPro_.event(Ft.Event_Hit,e))),t.boomEffect<=0)return null;a.pro||(a.pro=e,a.effectId=t.boomEffect,a.sp3d=Laya.Sprite3D.instantiate(Laya.loader.getRes("h5/bulletsEffect/"+t.boomEffect+"/monster.lh"))),a.sp3d.transform.localPositionX=e.sp3d.transform.localPositionX,a.sp3d.transform.localPositionZ=e.sp3d.transform.localPositionZ,Ft.layer3d.addChild(a.sp3d),Laya.timer.once(500,this,()=>{a.recover()})}recover(){this.pro=null,this.boomCircle&&this.boomCircle.removeSelf(),this.sp3d&&this.sp3d.removeSelf(),Laya.Pool.recover(wi.TAG+this.effectId,this)}}wi.TAG="BoomEffect";class xi extends W{constructor(){super(...arguments),this.future=new N(2,2)}move2d(e,t,i){if(t.setSpeed(i),!(t.speed<=0)){if(1==t.sysBullet.bulletBlock){var a,s=t.speed*Math.cos(e),n=t.speed*Math.sin(e),o=t.hbox.cx,h=t.hbox.cy;if(this.future.setVV(o,h,s,n),1==t.sysBullet.bulletEjection){if(a=Ft.map0.chechHit_arr(this.future,Ft.map0.Hharr))return t.setXY2D(t.pos2.x+s,t.pos2.z+n),t.setSpeed(0),a.linkPro_&&(t.hurtValue=150,a.linkPro_.event(Ft.Event_Hit,t),t.event(Ft.Event_Hit,a.linkPro_)),this.hitEffect(t),!1;var r=Ft.map0.Aharr;if(a=Ft.map0.chechHit_arr(this.future,r)){if(t.gamedata.bounce<=0)return t.setXY2D(t.pos2.x+s,t.pos2.z+n),t.setSpeed(0),this.hitEffect(t),!1;if(t.gamedata.bounce--,Ft.map0.chechHit_arr(this.future.setVV(o,h,-1*s,n),r)){if(Ft.map0.chechHit_arr(this.future.setVV(o,h,s,-1*n),r))return this.hitEffect(t),!1;n*=-1}else s*=-1;e=2*Math.PI-Math.atan2(n,s),t.rotation(e)}return t.setXY2D(t.pos2.x+s,t.pos2.z+n),!0}return(a=Ft.map0.chechHit_arr(this.future,Ft.map0.Hharr))?(t.setXY2D(t.pos2.x+s,t.pos2.z+n),t.setSpeed(0),a.linkPro_&&(t.hurtValue=150,a.linkPro_.event(Ft.Event_Hit,t),t.event(Ft.Event_Hit,a.linkPro_)),this.hitEffect(t),!1):(a=Ft.map0.chechHit_arr(this.future,Ft.map0.Aharr))?(t.setXY2D(t.pos2.x+s,t.pos2.z+n),t.setSpeed(0),a.linkPro_&&(t.hurtValue=150,a.linkPro_.event(Ft.Event_Hit,t),t.event(Ft.Event_Hit,a.linkPro_)),this.hitEffect(t),!1):(t.setXY2D(t.pos2.x+s,t.pos2.z+n),!0)}var l=Ft.hero.hbox;t.curLen+=i,t.curLen>=t.moveLen&&(t.curLen=t.moveLen);var p=t.curLen/t.moveLen,d=(s=i*Math.cos(e),n=i*Math.sin(e),2*Math.sin(Math.PI*p));return t.sp3d.transform.localPositionY=.1+d,t.setXY2D(t.pos2.x+s,t.pos2.z+n),l.hit(l,t.hbox)?(Ft.hero&&(t.hurtValue=150,Ft.hero.event(Ft.Event_Hit,t),t.event(Ft.Event_Hit,Ft.hero.hbox.linkPro_),t.setSpeed(0)),!1):t.curLen!=t.moveLen||(this.hitEffect(t),!1)}}hitEffect(e){e.setSpeed(0),wi.getEffect(e,e.sysBullet)}}class fi extends Laya.Script3D{constructor(){super()}onAwake(){let e=this.owner;this.qiu=e.getChildAt(0),this.qiu.transform.localRotationEulerX=45,this.ball=this.qiu.getChildAt(0)}onStart(){}onUpdate(){Ft.executor.isRun&&(this.ball.transform.localRotationEulerY+=8)}onDisable(){}}class Ii extends j{constructor(){super(Y.MonstorArrow),this.setGameMove(new xi),this.setGameAi(new mi(this)),this._bulletShadow=new I.test.BulletShadowUI,Ft.footLayer.addChild(this._bulletShadow),this.setShadowSize(19)}setBubble(e){if(null!=e){var t;if(10004==e.bulletMode||10005==e.bulletMode?this._bulletShadow&&this._bulletShadow.removeSelf():Ft.footLayer.addChild(this._bulletShadow),this.sysBullet=e,!this.sp3d)t=Laya.Sprite3D.instantiate(Laya.loader.getRes("h5/bullets/"+e.bulletMode+"/monster.lh")),console.log("子弹id",this.sysBullet.id,this.sysBullet.bulletMode),10!=this.sysBullet.id&&11!=this.sysBullet.id&&20!=this.sysBullet.id&&(t.getChildAt(0).transform.localRotationEulerY=-t.transform.localRotationEulerY,t.addComponent(fi)),this.setSp3d(t);this.gamedata.bounce=e.ejectionNum}else console.error("这个子弹有问题")}static getBullet(e){let t=Ii.TAG+e.bulletMode;Ft.poolTagArr[t]=t;let i=Laya.Pool.getItemByClass(t,Ii);return i.isDie=!1,i.setBubble(e),i}die(){this.isDie||(this.isDie=!0,this.curLen=null,this.moveLen=null,this.stopAi(),this._bulletShadow&&this._bulletShadow.removeSelf(),this.sp3d.transform.localPositionY=-500,this.sp3d.transform.localPositionZ=-500,Laya.Pool.recover(Ii.TAG+this.sysBullet.bulletMode,this),He.ins.app(this.sp3d.url))}}Ii.TAG="MonsterBullet_",Ii.count=0;class vi{constructor(){this.scd=0,this.shootCd=1200,this.st=0,this.now=0,this.at=0,this.future=new N(2,2)}short_arrow(e,t,i,a=0){var s=Ii.getBullet(this._sysBullet);s.curLen=null,s.moveLen=null,s.enemy=t,s.sp3d.transform.localPositionY=.1,s.setXY2D(t.pos2.x,t.pos2.z),Ft.layer3d.addChild(s.sp3d),s.setSpeed(this._sysBullet.bulletSpeed),Ft.bloodLayer.graphics.clear(),s.rotation(e),s.curLen=0,s.hurtValue=t.hurtValue,s.moveLen=a+Math.sqrt((s.hbox.cy-Ft.hero.hbox.cy)*(s.hbox.cy-Ft.hero.hbox.cy)+(s.hbox.cx-Ft.hero.hbox.cx)*(s.hbox.cx-Ft.hero.hbox.cx)),s.startAi()}get attackOk(){return this.now=Ft.executor.getWorldNow(),this.now>=this.st}starAttack(e,t){return this.pro=e,!!this.attackOk&&(this.scd=0,e.play(t),this.at>0?Laya.stage.timer.frameLoop(this.at,this,this.ac0):this.ac0(),!0)}cancelAttack(){Laya.stage.timer.clear(this,this.ac0),this.scd=0}ac0(){this.pro.gamedata.hp<=0||this.pro.normalizedTime>=this.at&&(this.pro.normalizedTime>=1&&(Laya.stage.timer.clear(this,this.ac0),this.pro.play(X.Idle)),0==this.scd&&(this.scd=1,this.pro.event(Ft.Event_Short,null),this.st=Ft.executor.getWorldNow()+this.shootCd))}checkBallistic(e,t,i){var a=ti.mw2*Math.cos(e),s=ti.mw2*Math.sin(e),n=t.hbox.cx,o=t.hbox.cy;for(let e=0;e<6e3;e++){if(null,this.future.setVV(n,o,a,s),i.hbox.hit(i.hbox,this.future))return i;var h=Ft.map0.Aharr;if(Ft.map0.chechHit_arr(this.future,h))return null;n+=a,o+=s}return null}}class bi extends je{constructor(e){super(e),this.shooting=new vi,this.nextTime=0,this.status=0,this.shooting.at=.4,this.pro.setSpeed(this.sysEnemy.moveSpeed),this.pro.on(Ft.Event_Short,this,this.shootAc),this.nextTime=Ft.executor.getWorldNow()+Math.floor(2e3*Math.random())}shootAc(){let e=this.shooting._sysBullet;if(!e)return;let t=e.mixNum,i=e.maxNum,a=e.bulletAngle;if(this.shooting.shootCd=this.sysEnemy.enemySpeed,1==e.bulletType){if(360!=a)if(t%2==0){let i=e.bulletAngle,a=(i/=t-1)/180*Math.PI*.5,s=Math.floor(t/2);for(let t=0;t<e.bulletNum;t++)setTimeout(()=>{for(var e=1;e<=s;e++)this.shooting.short_arrow(this.pro.face3d+a*(2*e-1),this.pro,Y.MonstorArrow),this.shooting.short_arrow(this.pro.face3d-a*(2*e-1),this.pro,Y.MonstorArrow)},500*t)}else{let i=e.bulletAngle,a=(i/=t)/180*Math.PI,s=Math.floor(t/2);for(let t=0;t<e.bulletNum;t++)setTimeout(()=>{this.shooting.short_arrow(this.pro.face3d,this.pro,Y.MonstorArrow);for(var e=1;e<=s;e++)this.shooting.short_arrow(this.pro.face3d+a*e,this.pro,Y.MonstorArrow),this.shooting.short_arrow(this.pro.face3d-a*e,this.pro,Y.MonstorArrow)},500*t)}else if(360==a)for(let i=0;i<e.bulletNum;i++)setTimeout(()=>{for(var e=1;e<=t;e++)this.shooting.short_arrow(2*Math.PI/t*e,this.pro,Y.MonstorArrow)},500*i)}else if(2==e.bulletType){this.shooting.shootCd=this.sysEnemy.enemySpeed;let a=e.bulletAngle;a/=2;let s=t+Math.ceil(Math.random()*(i-t));for(let e=0;e<s;e++)setTimeout(()=>{let t=e%2==0?1:-1,i=a*Math.random()/180*Math.PI*t;this.shooting.short_arrow(this.pro.face3d+i,this.pro,Y.MonstorArrow,200*(Math.random()>.5?1:-1)*Math.random())},1e3*Math.random()+200)}}startAttack(){if(!(this.pro.gamedata.hp<=0)){if(this.shooting._sysBullet=null,this.normalSb&&(this.normalSb.bulletType!=Ue.NORMAL_BULLET&&this.normalSb.bulletType!=Ue.RANDOM_BULLET||(this.shooting._sysBullet=this.normalSb)),!this.shooting._sysBullet&&this.skillISbs.length>0){let e=Math.floor(this.skillISbs.length*Math.random()),t=this.skillISbs[e];t.bulletType!=Ue.NORMAL_BULLET&&t.bulletType!=Ue.RANDOM_BULLET||(this.shooting._sysBullet=t)}this.shooting._sysBullet&&this.now>=this.nextTime&&(this.faceToHero(),this.shooting.starAttack(this.pro,X.NormalAttack)),this.now>=this.nextTime&&(this.faceToHero(),this.nextTime=this.now+this.sysEnemy.enemySpeed)}}faceToHero(){var e=N.faceTo3D(this.pro.hbox,Ft.hero.hbox);this.pro.rotation(e)}exeAI(e){if(this.run_)return super.exeAI(e),this.onExe(),!1}onExe(){if(this.checkHeroCollision(),!this.pro.isIce){if(0==this.status&&this.now>=this.nextTime){this.pro.play(X.Idle),this.nextTime=this.now+this.sysEnemy.enemySpeed;var e=N.faceTo3D(this.pro.hbox,Ft.hero.hbox);this.pro.rotation(e),this.status=1}else 1==this.status&&this.now>=this.nextTime&&(this.startAttack(),this.status=0,this.nextTime=this.now+this.shooting.shootCd);if(1==this.status){if(this.sysEnemy.moveType==Ve.FIXED)return;this.pro.move2D(this.pro.face2d),this.pro.play(X.Run)}}}hit(e){super.hit(e)}die(){super.die(),this.shooting&&this.shooting.cancelAttack()}}class Li extends ze{constructor(e){super(e),this.callId=0,this.callCd=0;let t=this.sysBullet.callInfo.split(",");this.callId=Number(t[0]),this.callCd=Number(t[2]),this.cd=Ft.executor.getWorldNow()+this.callCd}exeSkill(e,t){if(e>=this.cd){t.play(X.NormalAttack);Xe.getMonster(this.callId,t.hbox.x+ti.ww,t.hbox.y-ti.ww);let i=new I.test.zhaohuanUI;return Ft.bloodLayer.addChild(i),i.pos(t.hbox.cx,t.hbox.cy),setTimeout(()=>{i.removeSelf()},1500),this.cd=e+this.callCd,!0}return!1}}class _i extends ze{constructor(e){super(e),e&&(this.sysBullet.bulletCd=4e3)}exeSkill(e,t){if(N.faceToLenth(t.hbox,Ft.hero.hbox)>6*ti.ww&&e>=this.cd){let i=N.faceTo3D(t.hbox,Ft.hero.hbox);return t.rotation(i),t.play(X.SkillStart),t.curLen=0,t.moveLen=N.faceToLenth(t.hbox,Ft.hero.hbox),this.cd=e+this.sysBullet.bulletCd,!0}return!1}}class ki extends bi{constructor(e){super(e),this.cd=0,this.skillcd=0,this.windCd=0,this.callSkill=new Li(this.skillISbs[0]),this.skillISbs.length>1&&(this.windSkill=new _i(this.skillISbs[1])),this.cd=this.sysEnemy.enemySpeed,this.nextTime=Ft.executor.getWorldNow()+this.cd}exeAI(e){if(this.run_&&!e.isDie&&(this.setShader(),!this.pro.isIce))return this.now=Ft.executor.getWorldNow(),this.now>=this.nextTime&&(this.onExe2(this.now),this.nextTime=this.now+this.cd),this.pro.moveLen>0&&(this.pro.setSpeed(8),this.pro.move2D(this.pro.face2d)&&(this.pro.curLen=this.pro.moveLen=0,this.pro.setSpeed(this.sysEnemy.moveSpeed),this.pro.play(X.SkillEnd))),!1}onExe2(e){if(this.callSkill){if(!this.callSkill.exeSkill(e,this.pro))if(this.windSkill){this.windSkill.exeSkill(e,this.pro)||this.normalAttack()}else this.normalAttack()}}normalAttack(){if(!this.pro.isDie)if(0==this.status&&this.now>=this.nextTime){this.pro.play(X.Idle),this.nextTime=this.now+this.sysEnemy.enemySpeed;var e=N.faceTo3D(this.pro.hbox,Ft.hero.hbox);this.pro.rotation(e),this.status=1}else 1==this.status&&this.now>=this.nextTime&&(this.startAttack(),this.status=0,this.nextTime=this.now+this.shooting.shootCd)}}class Si extends bi{constructor(e){super(e),this.pro.rotation(.5*Math.PI),Si.mindex>4&&(Si.mindex=0),Si.mindex++,this.nextTime=Ft.executor.getWorldNow()+this.sysEnemy.enemySpeed*Si.mindex}exeAI(e){if(this.run_)return super.exeAI(e),!1}onExe(){this.pro.isDie||(this.checkHeroCollision(),this.jump())}jump(){if(0==this.status&&this.now>=this.nextTime&&(this.onJump(),this.status=1),1==this.status){if(this.pro.move2D(this.pro.face2d)){if(1==this.status)if(this.skillISbs.length>0){let e=this.skillISbs[Math.floor(this.skillISbs.length*Math.random())];e&&e.bulletType==Ue.AOE?this.now>=this.nextTime&&(this.onAoe(e),this.nextTime=this.now+2*this.sysEnemy.enemySpeed,this.status=0):this.now>=this.nextTime&&(this.startAttack(),this.shootAc(),this.pro.play(X.NormalAttack),this.nextTime=this.now+2*this.shooting.shootCd,this.status=0)}else this.now>=this.nextTime&&(this.startAttack(),this.shootAc(),this.pro.play(X.NormalAttack),this.nextTime=this.now+2*this.shooting.shootCd,this.status=0);this.status=0}}}startAttack(){if(!this.pro.isDie&&(this.shooting._sysBullet=null,this.normalSb&&(this.normalSb.bulletType!=Ue.NORMAL_BULLET&&this.normalSb.bulletType!=Ue.RANDOM_BULLET||(this.shooting._sysBullet=this.normalSb)),!this.shooting._sysBullet&&this.skillISbs.length>0)){let e=Math.floor(this.skillISbs.length*Math.random()),t=this.skillISbs[e];t.bulletType!=Ue.NORMAL_BULLET&&t.bulletType!=Ue.RANDOM_BULLET||(this.shooting._sysBullet=t)}}onAoe(e){wi.getEffect(this.pro,e)}onJump(){this.pro.sp3d.transform.localPositionY=0;let e=Ft.getRandPos(this.pro);if(2==e.length){let a=e[0]*ti.ww,s=e[1]*ti.ww;if(a&&s){this.pro.curLen=0,this.pro.moveLen=Math.sqrt((this.pro.hbox.y-s)*(this.pro.hbox.y-s)+(this.pro.hbox.x-a)*(this.pro.hbox.x-a)),this.pro.setSpeed(Math.ceil(this.pro.moveLen/ti.ww));var t=a-this.pro.hbox.x,i=this.pro.hbox.y-s;this.pro.rotation(Math.atan2(i,t))}}}}Si.mindex=0;class Mi extends je{constructor(e){super(e),this.status=0,this.cd=0,Mi.timdex>=4&&(Mi.timdex=0),this.cd=Ft.executor.getWorldNow()+Mi.timdex*e.sysEnemy.enemySpeed,Mi.timdex++;var t=N.faceTo3D(this.pro.hbox,Ft.hero.hbox);this.pro.rotation(t)}exeAI(e){if(this.run_&&(super.exeAI(e),this.checkHeroCollision(),!this.pro.isIce)){var t=this.pro.sysEnemy;if(0==this.status&&this.now>=this.cd){var i=N.faceTo3D(this.pro.hbox,Ft.hero.hbox);this.pro.rotation(i),this.pro.setSpeed(t.moveSpeed),this.cd=this.now+t.enemySpeed,this.status=1,this.pro.play(X.Run)}else if(1==this.status&&this.now>=this.cd){i=N.faceTo3D(this.pro.hbox,Ft.hero.hbox);this.pro.rotation(i),this.cd=this.now+t.enemySpeed,this.status=0,this.pro.acstr!=X.NormalAttack&&this.pro.play(X.NormalAttack)}if(0==this.status)this.pro.acstr==X.NormalAttack?this.pro.normalizedTime>.4&&this.pro.normalizedTime<1?(this.pro.setSpeed(8),this.pro.move2D(this.pro.face2d)):this.pro.normalizedTime<=.4&&(this.pro.setSpeed(t.moveSpeed),this.pro.move2D(this.pro.face2d+Math.PI)):(this.pro.play(X.Run),this.pro.setSpeed(t.moveSpeed),this.pro.move2D(this.pro.face2d));else if(this.pro.play(X.Run),N.faceToLenth(this.pro.hbox,Ft.hero.hbox)>ti.ww2){let e=N.faceTo3D(this.pro.hbox,Ft.hero.hbox);this.pro.rotation(e),this.pro.move2D(this.pro.face2d)}}}hit(e){super.hit(e)}}Mi.timdex=0;class Di extends je{constructor(e){super(e),this.cd=0,this.status=0,this.f=[]}exeAI(e){if(this.run_&&(super.exeAI(e),this.checkHeroCollision(),!this.pro.isIce)){0==this.status&&(this.status=1,this.pro.rotation(Math.PI/180*360*Math.random()));var t=this.pro.getGameMove();return this.pro.move2D(this.pro.face2d),t&&t.rotation!=this.pro.face2d&&this.pro.rotation(2*Math.PI-t.rotation),this.pro.acstr!=X.Run&&this.pro.play(X.Run),!1}}}class Ti extends ze{constructor(e){super(e),this.sysBullet.bulletCd=3e3}exeSkill(e,t){if(N.faceToLenth(t.hbox,Ft.hero.hbox)>6*ti.ww&&e>=this.cd){t.sp3d.transform.localPositionY=0,t.curLen=0,t.moveLen=N.faceToLenth(t.hbox,Ft.hero.hbox),t.setSpeed(Math.ceil(t.moveLen/ti.ww));let i=N.faceTo3D(t.hbox,Ft.hero.hbox);return t.rotation(i),this.cd=e+this.sysBullet.bulletCd,!0}return!1}showEff(e){e.curLen=e.moveLen=0,wi.getEffect(e,this.sysBullet)}}class Ei extends bi{constructor(e){super(e),this.cd=0,this.skillcd=0,this.windCd=0,this.callSkill=new Li(this.skillISbs[0]),this.aoeSkill=new Ti(this.skillISbs[1]),this.cd=this.sysEnemy.enemySpeed,this.nextTime=Ft.executor.getWorldNow()+this.cd}exeAI(e){if(this.run_&&!this.pro.isIce)return this.setShader(),this.now=Ft.executor.getWorldNow(),this.now>=this.nextTime&&(this.onExe2(this.now),this.nextTime=this.now+this.cd),this.pro.moveLen>0&&this.pro.move2D(this.pro.face2d)&&this.aoeSkill.showEff(this.pro),!1}onExe2(e){if(!this.callSkill.exeSkill(e,this.pro)){this.aoeSkill.exeSkill(e,this.pro)||this.normalAttack()}}normalAttack(){if(0==this.status&&this.now>=this.nextTime){this.pro.play(X.Idle),this.nextTime=this.now+this.sysEnemy.enemySpeed;var e=N.faceTo3D(this.pro.hbox,Ft.hero.hbox);this.pro.rotation(e),this.status=1}else 1==this.status&&this.now>=this.nextTime&&(this.startAttack(),this.status=0,this.nextTime=this.now+this.shooting.shootCd)}onJump(){}}class Ai{constructor(e,t=1){this.vv=new B(0,0,0,1),this.future=new N(2,2),this.redLines=[],this.nn=1,this.show_=!1,this.nn=t,this.pro=e;for(let e=0;e<this.nn;e++){let e=new Laya.Image;e.skin="bg/hongtiao.png",e.anchorX=.5,e.anchorY=.5,e.alpha=.8,this.redLines.push(e)}}get show(){return this.show_}set show(e){if(this.show_=e,this.show_=!1,this.show_){console.log("显示红线");for(let e=0;e<this.redLines.length;e++){var t=this.redLines[e];Ft.frontLayer.addChild(t)}}else for(let e=0;e<this.redLines.length;e++){(t=this.redLines[e]).removeSelf()}}moveline(e,t,i,a){var s=this.vv,n=Ft.map0.Aharr,o=20*ti.ww*Math.cos(e),h=20*ti.ww*Math.sin(e);this.future.setVV(t,i,o,h);var r=Ft.map0.chechHit_arr_all(this.future,n);if(r){s.reset(t,i,t+o,i+h);var l=Ft.map0.getPointAndLine(s,r);if(l){var p=l[0];let e=l[1];s.reset(s.x0,s.y0,p.x,p.y);var d=new B(s.x0,s.y0,p.x,p.y);return(e=s.rebound(e))?[d,e]:[d,null]}}return null}drawMoveline(){if(!this.show_)return;var e=this.pro;let t=this.moveline(e.face2d,e.hbox.cx,e.hbox.cy,!0);for(let e=0;e<this.nn&&t;e++){let s=t[0],n=t[1];var i=s.getCenter(),a=this.redLines[e];Ft.frontLayer.addChild(a),a.x=i.x,a.y=i.y,a.height=s.getlen(),a.rotation=s.atan2()/Math.PI*180+270,n&&(t=this.moveline(n.atan2(),n.x0,n.y0,!1))}}}class Ci extends bi{constructor(e){if(super(e),!this.gi){var t=this.normalSb.ejectionNum+1;t<1&&(t=1),this.gi=new Ai(e,t),this.gi.show=!1}}faceToHero(){}onExe(){if(!(this.pro.gamedata.hp<=0)){if(this.checkHeroCollision(),0==this.status&&this.now>=this.nextTime)this.pro.rotation(Math.PI/4*Math.ceil(8*Math.random())),this.nextTime=this.now+1500,this.status=1,this.pro.play(X.Run);else if(1==this.status&&this.now>=this.nextTime){this.nextTime=this.now+1500,this.status=2,this.pro.play(X.Idle);var e=N.faceTo3D(this.pro.hbox,Ft.hero.hbox);this.pro.rotation(e),this.gi.show=!0,this.gi.drawMoveline()}else 2==this.status&&this.now>=this.nextTime?(this.gi.show=!1,this.nextTime=this.now+500,this.status=3):3==this.status&&this.now>=this.nextTime&&(this.startAttack(),this.nextTime=this.now+1e3,this.status=0);if(1==this.status)this.pro.move2D(this.pro.face2d);else if(2==this.status){e=N.faceTo3D(this.pro.hbox,Ft.hero.hbox);this.pro.rotation(e),this.gi.show=!0,this.gi.drawMoveline()}}}hit(e){super.hit(e),this.pro.gamedata.hp<=0&&(this.gi.show=!1)}}class Bi extends W{move2d(e,t,i){if(!(t.gamedata.hp<=0)){var a=t.speed*Math.cos(e),s=t.speed*Math.sin(e),n=Ft.map0.Flyharr;return(!Ft.map0.chechHitArrs(t,a,s,n)||(0!=s&&Ft.map0.chechHitArrs(t,a,0,n)&&(a=0),0!=a&&Ft.map0.chechHitArrs(t,0,s,n)&&(s=0),!Ft.map0.chechHitArrs(t,a,s,n)))&&(!!this.Blocking(t,a,s)&&(t.setXY2D(t.pos2.x+a,t.pos2.z+s),!0))}}}class Ni extends W{move2d(e,t,i){t.setSpeed(0);var a=t.speed*Math.cos(e),s=t.speed*Math.sin(e);return t.setXY2D(t.pos2.x+a,t.pos2.z+s),!0}}class Vi extends W{constructor(){super()}move2d(e,t,i){if(this.pro=t,t.curLen+=i,t.curLen>=t.moveLen)return t.curLen=t.moveLen,!0;var a=t.curLen/t.moveLen,s=i*Math.cos(e),n=i*Math.sin(e),o=2*Math.sin(Math.PI*a);return t.sp3d.transform.localPositionY=.1+2*o,t.setXY2D(t.pos2.x+s,t.pos2.z+n),null!=t.hbox.x&&null!=t.hbox.y||console.log("跳出问题了"),!1}}class Ui extends W{constructor(){super(...arguments),this.future=new N(1,1),this.rotation=-1*Math.PI}move2d(e,t,i){if(!(t.gamedata.hp<=0)){this.rotation=e;var a=Math.cos(e)*i,s=Math.sin(e)*i,n=Ft.map0.Wharr;if(this.future.setXY(t.hbox.x+a,t.hbox.y+s),Ft.map0.chechHit_arr(this.future,n)){this.future.setXY(t.hbox.x+a,t.hbox.y);var o=Ft.map0.chechHit_arr(this.future,n);this.future.setXY(t.hbox.x,t.hbox.y+s);var h=Ft.map0.chechHit_arr(this.future,n);null!=o?a*=-1:null!=h&&(s*=-1),this.future.setXY(t.hbox.x+a,t.hbox.y+s),Ft.map0.chechHit_arr(this.future,n)&&(a*=-1,s*=-1),this.rotation=Math.atan2(s,a)}return t.setXY2D(t.pos2.x+a,t.pos2.z+s),!0}}}class Yi{}class Pi extends we{constructor(e){super(e)}static create(e){return new Pi(e)}send(){let e="gamelogin/testlogin";u.platformId!=ai.H5&&u.platformId!=ai.TEST&&(e="gamelogin/login"),super.send(u.serverIP+e+"?scode="+u.platformId+"&jscode="+Pi.FRONT+this.jsCode,null,"get","text")}onSuccess(e){if(u.platformId==ai.TEST)Me.SKEY=e;else{let t=JSON.parse(e);Me.SKEY=t.openid}super.onSuccess(e),console.log("login success",e)}checkLogin(){(new(Laya.ClassUtils.getRegClass("p"+u.platformId))).login(e=>{this.jsCode=e,this.send()})}}Pi.FRONT="";class Hi extends we{constructor(e){super(e)}static create(e){return new Hi(e)}send(){super.send(u.serverIP+"game/get?skey="+Me.SKEY,null,"get","text")}onSuccess(e){u.sdkManager.log(r.LOGIN_SUCCESS),Me.parseData(e),super.onSuccess(e),console.log("receive data",e)}}class Ri extends I.game.homePageUI{constructor(){super(),this.isInit=!1,this.name="HomeLoading",this.mouseEnabled=!0,this.rect=new Laya.Rectangle(0,0,1,this.barImg.height),this.on(Laya.Event.DISPLAY,this,this.onDis)}onDis(){this.loadingBox.visible=!1,this.startBtn.visible=!0,this.idTxt.visible=u.platformId==ai.TEST||u.platformId==ai.H5,Ft.cookie.getCookie(rt.USER_ID,e=>{null==e||(u.soundManager.setMusicVolume(e.state),this.idTxt.text=e.userId)})}load(){this.loadingBox.visible=!0,this.startBtn.visible=!1,this.barImg.scrollRect=this.rect,this.sliderImg.x=this.rect.width,this.txt.text="0%",Laya.loader.load(["res/atlas/main.atlas","res/atlas/zhaohuan.atlas","res/atlas/guide.atlas"],new Laya.Handler(this,this.onHandler),new Laya.Handler(this,this.onProgress))}onHandler(){console.log("加载完成"),new Pi(new Laya.Handler(this,this.onSuccess)).checkLogin()}onSuccess(e){console.log("登录成功"),Hi.create(new Laya.Handler(this,this.onReceive)).send()}onReceive(e){this.isInit||(console.log("获取玩家数据成功"+e),this.isInit=!0,new dt,setTimeout(()=>{this.removeSelf()},300))}onProgress(e){this.rect.width=this.barImg.width*e,this.barImg.scrollRect=this.rect,this.sliderImg.x=this.rect.width,e*=100,this.txt.text=e.toFixed(0)+"%"}}class Xi extends Yi{checkUpdate(){}login(e){e&&e("woyecaonidayea233")}getUserInfo(e){this.cb=e,Laya.stage.getChildByName("HomeLoading").on(Laya.Event.CLICK,this,this.clickFun)}clickFun(e){if(e.target instanceof Ri){let e=Laya.stage.getChildByName("HomeLoading");Pi.FRONT="test"+e.idTxt.text,Ft.cookie.setCookie(rt.USER_ID,{userId:e.idTxt.text}),this.cb&&this.cb()}}onShare(e){e&&e(),Ft.hero.reborn()}}class zi extends Yi{constructor(){super(),this.tag=0}checkUpdate(){if(Laya.Browser.window.wx.setKeepScreenOn({keepScreenOn:!0}),Laya.Browser.window.wx.getUpdateManager){console.log("基础库 1.9.90 开始支持，低版本需做兼容处理");const e=Laya.Browser.window.wx.getUpdateManager();e.onCheckForUpdate(function(t){t.hasUpdate?(console.log("有新版本"),e.onUpdateReady(function(){console.log("新的版本已经下载好"),Laya.Browser.window.wx.showModal({title:"更新提示",content:"新版本已经下载，是否重启？",success:function(t){t.confirm&&e.applyUpdate()}})}),e.onUpdateFailed(function(){console.log("新的版本下载失败"),Laya.Browser.window.wx.showModal({title:"已经有新版本了",content:"新版本已经上线啦，请您删除当前小游戏，重新搜索打开"})})):console.log("没有新版本")})}else console.log("有更新肯定要用户使用新版本，对不支持的低版本客户端提示"),Laya.Browser.window.wx.showModal({title:"温馨提示",content:"当前微信版本过低，无法使用该应用，请升级到最新微信版本后重试。"})}login(e){Laya.Browser.window.wx.login({success:t=>{t.code&&Laya.Browser.window.tt.getUserInfo({success(i){console.log("用户信息",i),Ft.userHeadUrl=i.userInfo.avatarUrl,Ft.userName=i.userInfo.nickName,e&&e(t.code)},fail(i){e&&e(t.code)}})}})}getUserInfo(e){Laya.Browser.window.tt.authorize({scope:"scope.userInfo",success(){e&&e()},fail(t){e&&e()}})}onShare(e){Laya.Browser.window.wx.shareAppMessage({title:"来吧，pk一下吧！",imageUrl:"https://img.kuwan511.com/arrowLegend/share.jpg",destWidth:500,destHeight:400}),Laya.Browser.window.wx.onShow(e=>{console.log("onShow",this.tag),1e3==this.tag&&(Ft.hero.reborn(),Laya.Browser.window.wx.offShow(),Laya.Browser.window.wx.offHide(),this.tag=-1)}),Laya.Browser.window.wx.onHide(e=>{this.tag=1e3,console.log("onHide")})}}class Gi{constructor(){this.skillCD=0,this.chixuCD=0,this.hurtValue=0,this.nextTime=0,this.startTime=0,this.curTimes=0}exe(e){}}class ji extends Gi{constructor(e){super(),this.skill=u.tableManager.getDataByNameAndId(Ze.NAME,e),this.buff=u.tableManager.getDataByNameAndId(Pe.NAME,this.skill.skillEffect1)}exe(e){if(this.buff.times>0&&this.curTimes>this.buff.times)return console.log("移除火焰buff"),void Ft.buffM.removeBuff(this);e>this.nextTime&&(this.curTimes++,this.nextTime=this.startTime+this.buff.buffCD*this.curTimes,this.bullet.hurtValue=Math.floor(this.hurtValue*this.buff.damagePercent/100),2==this.skill.skilltarget&&this.to.hit(this.bullet,!0))}}class Oi extends Gi{constructor(e){super(),this.isExe=!1,this.skill=u.tableManager.getDataByNameAndId(Ze.NAME,e),this.buff=u.tableManager.getDataByNameAndId(Pe.NAME,this.skill.skillEffect1)}exe(e){let t=e-this.startTime;if((t/=this.buff.buffCD)>=1)return console.log("移除冰冻buff"),void Ft.buffM.removeBuff(this);let i=e-this.startTime;(i/=this.buff.buffDot)>=1&&this.to.offCie(),this.onCie()}onCie(){this.isExe||(this.isExe=!0,this.to.onCie(),this.buff.damagePercent>0&&2==this.skill.skilltarget&&(this.bullet.hurtValue=Math.floor(this.hurtValue*this.buff.damagePercent/100),this.to.hit(this.bullet,!0)))}}class Fi extends Gi{constructor(e){super(),this.skill=u.tableManager.getDataByNameAndId(Ze.NAME,e),this.buff=u.tableManager.getDataByNameAndId(Pe.NAME,this.skill.skillEffect1)}exe(e){this.buff=u.tableManager.getDataByNameAndId(Pe.NAME,this.skill.skillEffect1),e>this.skillCD?(this.skillCD=e+this.buff.buffCD,this.chixuCD=e+this.buff.buffDot,Ft.hero.setWudi(!0)):e>this.chixuCD&&Ft.hero.setWudi(!1)}}class Wi extends bi{constructor(e){super(e)}onExe(){if(this.checkHeroCollision(),0==this.status&&this.now>=this.nextTime){var e=N.faceTo3D(this.pro.hbox,Ft.hero.hbox);this.pro.rotation(e),this.startAttack(),this.nextTime=this.now+this.shooting.shootCd,Math.random()>.7&&(this.status=1)}else 1==this.status&&this.now>=this.nextTime?(this.nextTime=this.now+1e3,this.status=2,this.pro.rotation(Math.floor(8*Math.random())*(Math.PI/4))):2==this.status&&this.now>=this.nextTime&&(this.pro.play(X.Idle),this.nextTime=this.now+500,this.status=0);2==this.status&&(this.pro.move2D(this.pro.face2d),this.pro.play(X.Run))}}class qi extends W{move2d(e,t,i){if(!(t.gamedata.hp<=0)){var a=t.speed*Math.cos(e),s=t.speed*Math.sin(e),n=Ft.map0.Flyharr;return(!Ft.map0.chechHitArrs(t,a,s,n)||(0!=s&&Ft.map0.chechHitArrs(t,a,0,n)&&(a=0),0!=a&&Ft.map0.chechHitArrs(t,0,s,n)&&(s=0),!Ft.map0.chechHitArrs(t,a,s,n)))&&(!!this.Blocking(t,a,s)&&(t.setXY2D(t.pos2.x+a,t.pos2.z+s),!0))}}}var Ki=Laya.Handler,Zi=Laya.Loader;class Ji{constructor(){this.handler=null,this.fileNameArr=[],this.resultArr=[]}static load(e,t){this.instance.loadFile(e,t)}loadFile(e,t){this.handler=t,Laya.loader.load(e,new Ki(this,this.zipFun),null,Zi.BUFFER)}zipFun(e,t){this.handler=t,Laya.Browser.window.JSZip.loadAsync(e).then(e=>{this.analysisFun(e)})}analysisFun(e){for(var t in this.currentJSZip=e,e.files)this.fileNameArr.push(t+"");this.exeOne()}exeOne(){this.currentJSZip.file(this.fileNameArr[0]).async("text").then(e=>{this.over(e)})}over(e){var t=this.fileNameArr.shift();this.resultArr.push(t),this.resultArr.push(e),0!=this.fileNameArr.length?this.exeOne():this.handler.runWith([this.resultArr])}}Ji.instance=new Ji;class Qi extends I.test.tianshi_1UI{constructor(){super(),this.grid1=new Ut(new Laya.Handler(this,this.onClick)),this.grid2=new Ut(new Laya.Handler(this,this.onClick)),this.queding.visible=!1,this.box1.addChild(this.grid1),this.box2.addChild(this.grid2),this.on(Laya.Event.DISPLAY,this,this.onDis),this.on(Laya.Event.UNDISPLAY,this,this.onUndis)}onUndis(){Laya.Browser.window.tt&&u.sdkManager.hideBanner()}onClick(e){console.log(e.skillName),Ft.hero.changeBlood(e)||Ft.skillManager.addSkill(e),Ft.bg.clearNpc(),this.removeSelf()}onDis(){Ft.executor.stop_();let e=1==Ft.battleLoader.chapterId?1006:1001,t=u.tableManager.getDataByNameAndId(ot.NAME,e);this.box1.scaleX=1,this.box2.scaleX=1,this.grid1.update(Ft.skillManager.getRandomSkillByNpcId(e)),this.grid2.update(t.skillId),Laya.Browser.window.tt&&u.sdkManager.showBanner()}removeSelf(){return Ft.executor.start(),Ft.state=0,super.removeSelf()}}class $i{}class ea extends $i{constructor(){super()}setCookie(e,t){Laya.LocalStorage.setJSON(e,t)}getCookie(e,t){let i=Laya.LocalStorage.getJSON(e);t&&t(i)}removeCookie(e){Laya.LocalStorage.removeItem(e)}clearAll(){Laya.LocalStorage.clear()}}class ta extends $i{constructor(){super(),this.wx=Laya.Browser.window.wx}setCookie(e,t){this.wx.setStorage({key:e,data:t,success(e){}})}getCookie(e,t){this.wx.getStorage({key:e,success(e){t&&t(e.data)},fail(e){t&&t(null)},complete(e){}})}removeCookie(e){this.wx.removeStorage({key:e,success(e){}})}clearAll(){this.wx.clearStorage()}}class ia extends I.test.initViewUI{constructor(){super(),this.on(Laya.Event.DISPLAY,this,this.onDis)}onDis(){this.initTxt.text="0%",Laya.loader.load("h5/config.json",new Laya.Handler(this,this.configFun))}configFun(){let e,t=Laya.loader.getRes("h5/config.json");u.platformId=t.platformId,u.serverIP=t.platforms[u.platformId],u.platformId!=ai.WX?e=new ea:u.platformId==ai.WX?e=new ta:u.platformId==ai.TT&&(e=new ta),Ft.cookie=e,Ft.cookie.getCookie(rt.MUSIC_SWITCH,e=>{null==e?(Ft.cookie.setCookie(rt.MUSIC_SWITCH,{state:1}),u.soundManager.setMusicVolume(1)):u.soundManager.setMusicVolume(e.state)}),Ft.cookie.getCookie(rt.SOUND_SWITCH,e=>{null==e?(Ft.cookie.setCookie(rt.SOUND_SWITCH,{state:1}),u.soundManager.setSoundVolume(1)):u.soundManager.setSoundVolume(e.state)}),Ft.playBgMusic();let i=[{url:"h5/tables.zip",type:Laya.Loader.BUFFER}];for(let e=0;e<Ft.nativefiles.length;e++)i.push({url:Ft.nativefiles[e],type:Laya.Loader.IMAGE});Laya.loader.load(i,new Laya.Handler(this,this.onInitCom),new Laya.Handler(this,this.onInitProgress))}onInitCom(){Laya.stage.event(h.INIT_COM)}onInitProgress(e){e*=100,this.initTxt.text=e.toFixed(0)+"%"}}new class{constructor(){this.isSuccess=!1,UIConfig.popupBgAlpha=.8,window.Laya3D?Laya3D.init(ti.width,ti.height):Laya.init(ti.width,ti.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.bgColor="#000000",Laya.stage.scaleMode=Laya.Stage.SCALE_FIXED_WIDTH,Laya.stage.screenMode=Laya.Stage.SCREEN_VERTICAL,Laya.URL.exportSceneToJson=e.exportSceneToJson,console.log("代码版本",Ft.codeVer),console.log("代码版本",Ft.resVer),Laya.Browser.window.tt&&(Laya.Browser.window.wx=Laya.Browser.window.tt),Laya.Browser.window.wx&&(Laya.URL.basePath="https://img.kuwan511.com/arrowLegend/tt/"+Ft.resVer+"/",Laya.MiniAdpter.nativefiles=Ft.nativefiles,Laya.Browser.window.wx.getSystemInfo({success(e){e.model,ti.height=ti.width/e.windowWidth*e.windowHeight}})),u.init(),u.soundManager.pre="h5/sounds/",this._initView=new ia,Laya.stage.once(h.INIT_COM,this,this.onInitCom),Laya.stage.addChild(this._initView),$.initBtnEffect();let t=new I.test.StageBgUI;Laya.stage.addChild(t),t.centerY=0,t.zOrder=-10,t.mouseEnabled=!1}zipFun(e){dt.initDialog(),dt.initTable(e),Me.init(),this.authSetting(),Laya.stage.event(h.CONFIG_OVER)}onInitCom(){Laya.stage.addChild(u.layerManager),Ji.instance.zipFun(Laya.loader.getRes("h5/tables.zip"),new Laya.Handler(this,this.zipFun)),this.regClass(),u.gameSoundManager.reg(c.BTN,u.soundManager.pre+"fx_button.wav")}authSetting(){this.homePage||(this.homePage=new Ri),Laya.stage.addChild(this.homePage),u.sdkManager.log(r.SHOW_GAME_VIEW);let e=Laya.ClassUtils.getRegClass("p"+u.platformId);this.curBP||(this.curBP=new e),this.curBP.checkUpdate(),this.curBP.getUserInfo(this.getUserInfoSuccess.bind(this)),this._initView&&this._initView.removeSelf()}getUserInfoSuccess(){this.isSuccess||(this.isSuccess=!0,u.sdkManager.log(r.CLICK_START_BTN),this.homePage.load(),console.log("授权成功，开始加载"))}regClass(){var e=Laya.ClassUtils.regClass;e("HIT_"+si.hit1,oi),e("HIT_"+si.hit2,hi),e("HIT_"+si.hit3,li),e("HIT_"+si.hit4,ri),e("NPC1001",pi),e("NPC1002",di),e("NPC1003",ci),e("NPCVIEW1001",Qi),e(Ue.TAG+gi.NOTHAS,je),e(Ue.TAG+gi.FLYHIT,ui),e(Ue.TAG+gi.BULLET,bi),e(Ue.TAG+gi.STONE,ki),e(Ue.TAG+gi.SHITOUREN,Wi),e(Ue.TAG+gi.TREE,Si),e(Ue.TAG+gi.RANDOM_MOVE,Oe),e(Ue.TAG+gi.MOVEHIT,Mi),e(Ue.TAG+gi.REBOUND,Di),e(Ue.TAG+gi.JUMP_FOLLOW,Ei),e(Ue.TAG+gi.RED_LINE,Ci),e(Ve.TAG+Ve.FLY,Bi),e(Ve.TAG+Ve.MOVE,Fe),e(Ve.TAG+Ve.FIXED,Ni),e(Ve.TAG+Ve.JUMP,Vi),e(Ve.TAG+Ve.BACK,Ui),e(Ve.TAG+Ve.BOOM,qi),e("p"+ai.TEST,Xi),e("p"+ai.H5,Xi),e("p"+ai.WX,zi),e("p"+ai.TT,zi),e("BUFF"+jt.WUDI_5009,Fi),e("BUFF"+jt.FIRE_2001,ji),e("BUFF"+jt.FIRE_5001,ji),e("BUFF"+jt.DU_2002,ji),e("BUFF"+jt.DU_5002,ji),e("BUFF"+jt.ICE_2003,Oi),e("BUFF"+jt.ICE_5003,Oi)}}}();